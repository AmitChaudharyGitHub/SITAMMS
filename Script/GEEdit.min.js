function GetEmp1(t) { var e = "<option value='0'> Please wait...</option>"; $("#Employee").html(e).show(); for (var i = "<option value='0'>Select Employee</option>", a = 0; a < t.length; a++) i += "<option value=" + t[a].Value + ">" + t[a].Text + "</option>"; $("#Employee").html(i).show() } function GetStatusList(t) { var e = "<option value='0'> Please wait...</option>"; $("#StatusTypeNo").html(e).show(); for (var i = "<option value='0'>Select No</option>", a = 0; a < t.length; a++) i += "<option value=" + t[a].Value + ">" + t[a].Text + "</option>"; $("#StatusTypeNo").html(i).show() } $(document).ready(function () { window.GetPrj = function (t) { return $("#dvLoading").show(), $.ajax({ type: "POST", url: GetProjectByEmpId, dataType: "json", data: { E: ss }, success: function (t) { var e = "<option value='0'> Please wait...</option>"; $("#Projects").html(e).show(); var i = "<option value='0'>Select Project</option>"; $("#Projects").html(i).show(), t = $.parseJSON(t); var a = $("#Projects"); $.each(t, function (t, e) { a.append($("<option/>", { value: e.Value, text: e.Text })) }), 1 == Trig1 && ($("#Projects").val(Master.ProjectNo), $("#Projects").trigger("change"), $("#Status").val(Master.Status), $("#Status").trigger("change"), Trig1 = !1) }, complete: function () { $("#dvLoading").hide() }, error: function (t) { alert("Failed to retrieve Project." + t) } }), !1 }, GetPrj() }), $(document).ready(function () { $("#Projects").change(function () { return $("#GateEntryNo").empty(), 0 != $("#Projects option:selected").val() ? ($("#dvLoading").show(), $.ajax({ type: "POST", url: GetProjectGateEntryNo, dataType: "json", data: { id: $("#Projects").val() }, success: function (t) { t = $.parseJSON(t), $("#GateEntryNo").val(t.Message), GetEmp1(t.List), 1 == Trig2 && ($("#Employee").val(Master.EmpId), Trig2 = !1) }, complete: function () { $("#dvLoading").hide() }, error: function (t) { } }), !1) : void 0 }) }), $(document).ready(function () { $("#Status").change(function () { 1 == Trig3 && (markup = "<option value=" + Master.StatusTypeId + ">" + Master.StatusTypeNo + "</option>", $("#StatusTypeNo").html(markup).show(), $("#StatusTypeNo").trigger("change"), Trig3 = !1) }) }), $(document).ready(function () { function t() { ("Dispatch" == $("#Status").val() || "Receive" == $("#Status").val()) && ($("#ChallanNo").val($("div[class='Challan']").attr("challanno")), $("#VehicleNo").val($("div[class='Challan']").attr("vehicleno")), $("#ChallanDate").val($("div[class='Challan']").attr("challandate"))) } $("#StatusTypeNo").change(function () { return 0 != $("#StatusTypeNo option:selected").val() ? ($("#dvLoading").show(), $.ajax({ type: "GET", url: Grid, data: { Type: $("#Status").val(), PurchaseNo: $("#StatusTypeNo").val() }, complete: function () { $("#dvLoading").hide() }, success: function (e) { $("#formbody").html(e), 1 == Trig4 ? (GetMast(), GetChild(), Trig4 = !1) : t() }, error: function (t) { alert("Failed to retrieve Project Code." + t) } }), !1) : void 0 }) }), $(document).ready(function () { $(document).on("keyup", "td[class^='CDispatch_']", function () { var t = $(this).find("input").val(), e = $(this).attr("class"), i = e.substring(10), a = $("#Dispatch_" + i).find("input").val(); t = +t + +a; var n = $("#Qty_" + i).find("input").val(); +t > +n && (alert("Total Dispatch Quantity Can,t Greater than Qty"), $(this).find("input").val("")) }), $(document).on("keyup", "td[class^='CReceive_']", function () { var t = $(this).find("input").val(), e = $(this).attr("class"), i = e.substring(9), a = $("#Receive_" + i).find("input").val(); t = +t + +a; var n = $("#Dispatch_" + i).find("input").val(); +t > +n && (alert("Total Receive Quantity Can,t Greater than Dispatch Qty"), $(this).find("input").val("")) }) }), $(document).ready(function () { $(".DatePicker").datepicker({ dateFormat: "dd M yy", changeMonth: !0, changeYear: !0, value: "" }) }), $(document).ready(function () { function t() { var t = []; $("#grid tbody tr").each(function (e) { var i = !1, a = new Object; 0 != $(this)[0].rowIndex && 1 != $(this)[0].rowIndex && (x = $(this).children(), a.ReceiveQty = $(this).children().eq(8).find("input").val(), null != a.ReceiveQty && 0 != a.ReceiveQty && (i = !0, a.GateEntryNo = $("#GateEntryNo").val(), a.Status = $("#Status option:selected").val(), a.StatusTypeId = $("#StatusTypeNo option:selected").val(), a.StatusTypeNo = $("#StatusTypeNo option:selected").text().trim(), a.ItemNo = $(this).children().eq(0).attr("it"), a.Item = $(this).children().eq(2).text().trim(), a.ItemGroup = $(this).children().eq(1).text().trim(), a.Unit = $(this).children().eq(3).text().trim(), a.StatusChildId = $(this).children().eq(0).attr("lpuid"), a.Vendor = $("td[class='Ven']").text().trim(), a.VendorNo = $("td[class='Ven']").attr("vid"), a.Rate = $(this).children().eq(0).attr("rate"), a.UId = $(this).children().eq(0).attr("UId"), a.MUId = $(this).children().eq(0).attr("MUId"), t.push(a))) }); return [ValidChild, t] } function e() { var t = !1, e = []; $("#grid tbody tr").each(function (i) { var a = new Object; 0 != $(this)[0].rowIndex && 1 != $(this)[0].rowIndex && (x = $(this).children(), a.ReceiveQty = $(this).children().eq(9).find("input").val(), null != a.ReceiveQty && 0 != a.ReceiveQty && (t = !0, a.GateEntryNo = $("#GateEntryNo").val(), a.Status = $("#Status option:selected").val(), a.StatusTypeId = $("#StatusTypeNo option:selected").val(), a.StatusTypeNo = $("#StatusTypeNo option:selected").text().trim(), a.ItemNo = $(this).children().eq(0).attr("IT"), a.Item = $(this).children().eq(2).text().trim(), a.ItemGroup = $(this).children().eq(1).text().trim(), a.Unit = $(this).children().eq(3).text().trim(), a.StatusChildId = $(this).children().eq(0).attr("IPOUId"), a.Vendor = $("td[class='Ven']").text().trim(), a.VendorNo = $("td[class='Ven']").attr("vid"), a.Rate = $(this).children().eq(0).attr("rate"), a.UId = $(this).children().eq(0).attr("UId"), a.MUId = $(this).children().eq(0).attr("MUId"), e.push(a))) }); return [t, e] } function i() { var t = [], e = !1; $("#grid tbody tr").each(function (i) { var a = new Object; 0 != $(this)[0].rowIndex && 1 != $(this)[0].rowIndex && 2 != $(this)[0].rowIndex && (x = $(this).children(), a.ReceiveQty = $(this).children().eq(7).find("input").val(), null != a.ReceiveQty && 0 != a.ReceiveQty && (e = !0, a.GateEntryNo = $("#GateEntryNo").val(), a.Status = $("#Status option:selected").val(), a.StatusTypeId = $("#StatusTypeNo option:selected").val(), a.StatusTypeNo = $("#StatusTypeNo option:selected").text().trim(), a.ItemNo = $(this).children().eq(0).attr("it"), a.ItemGroupNo = $(this).children().eq(0).attr("ig"), a.Item = $(this).children().eq(2).text().trim(), a.ItemGroup = $(this).children().eq(1).text().trim(), a.Unit = $(this).children().eq(3).text().trim(), a.UnitNo = $(this).children().eq(0).attr("unitno"), a.StatusChildId = $(this).children().eq(0).attr("ostuid"), a.Vendor = $("td[class='RVen']").attr("receivename"), a.VendorNo = $("td[class='RVen']").attr("receiveno"), a.Rate = $(this).children().eq(0).attr("rate"), a.TaxPer = $(this).children().eq(0).attr("taxper"), a.DeliveryUnitCharge = $(this).children().eq(0).attr("dperunit"), a.UId = $(this).children().eq(0).attr("UId"), a.MUId = $(this).children().eq(0).attr("MUId"), t.push(a))) }); return [e, t] } function a() { var t = [], e = !1; $("#grid tbody tr").each(function (i) { var a = new Object; 0 != $(this)[0].rowIndex && 1 != $(this)[0].rowIndex && 2 != $(this)[0].rowIndex && (x = $(this).children(), a.ReceiveQty = $(this).children().eq(7).find("input").val(), null != a.ReceiveQty && 0 != a.ReceiveQty && (e = !0, a.GateEntryNo = $("#GateEntryNo").val(), a.Status = $("#Status option:selected").val(), a.StatusTypeId = $("#StatusTypeNo option:selected").val(), a.StatusTypeNo = $("#StatusTypeNo option:selected").text().trim(), a.ItemNo = $(this).children().eq(0).attr("it"), a.ItemGroupNo = $(this).children().eq(0).attr("ig"), a.Item = $(this).children().eq(2).text().trim(), a.ItemGroup = $(this).children().eq(1).text().trim(), a.Unit = $(this).children().eq(3).text().trim(), a.UnitNo = $(this).children().eq(0).attr("unitno"), a.StatusChildId = $(this).children().eq(0).attr("ostuid"), a.Vendor = $("td[class='DVen']").attr("dispatchname"), a.VendorNo = $("td[class='DVen']").attr("dispatchno"), a.Rate = $(this).children().eq(0).attr("rate"), a.TaxPer = $(this).children().eq(0).attr("taxper"), a.DeliveryUnitCharge = $(this).children().eq(0).attr("dperunit"), a.UId = $(this).children().eq(0).attr("UId"), a.MUId = $(this).children().eq(0).attr("MUId"), t.push(a))) }); return [e, t] } function n() { var t = new Object; return t.Date = $("#Date").val(), t.Time = $("#Time").val(), t.ProjectNo = $("#Projects option:selected").val(), t.ProjectName = $("#Projects option:selected").text(), t.GateEntryNo = $("#GateEntryNo").val(), t.EmpId = $("#Employee option:selected").val(), t.EmpName = $("#Employee option:selected").text(), t.ChallanNo = $("#ChallanNo").val(), t.ChallanDate = $("#ChallanDate").val(), t.VehicleNo = $("#VehicleNo").val(), t.Status = $("#Status option:selected").val(), t.StatusTypeId = $("#StatusTypeNo option:selected").val(), t.StatusTypeNo = $("#StatusTypeNo option:selected").text(), t.EmpId = $("#Employee option:selected").val(), 0 != t.EmpId && (t.EmpName = $("#Employee option:selected").text()), t.UId = Master.UId, t.SessionId = Master.SessionId, t.CreatedBy = Master.CreatedBy, t.CreatedName = Master.CreatedName, t } function r() { var t = $("#Projects option:selected").val(), e = $("#GateEntryNo").val(), i = $("#Status option:selected").val(), a = $("#StatusTypeNo option:selected").val(), n = $("#Date").val(), r = !0; return "0" == t ? ($("#Projects").css("border-color", "#f0551b"), r = !1) : $("#Projects").css("border-color", ""), "" == e ? ($("#GateEntryNo").css("border-color", "#f0551b"), r = !1) : $("#GateEntryNo").css("border-color", ""), "" == i ? ($("#Status").css("border-color", "#f0551b"), r = !1) : $("#Status").css("border-color", ""), "" == a ? ($("#StatusTypeNo").css("border-color", "#f0551b"), r = !1) : $("#StatusTypeNo").css("border-color", ""), "" == n ? ($("#Date").css("border-color", "#f0551b"), r = !1) : $("#Date").css("border-color", ""), r } $("#btnsave").click(function (o) { var d = r(); if (0 != d) { var s = [], l = null, l = UpM_UpC; if ("LP" == $("#Status").val()) { var c = t(); if (d = c[0], 0 == d) return; s = c[1] } else if ("IPO" == $("#Status").val()) { var c = e(); if (d = c[0], 0 == d) return; s = c[1] } else if ("Dispatch" == $("#Status").val()) { var c = i(); if (d = c[0], 0 == d) return; s = c[1] } else if ("Receive" == $("#Status").val()) { var c = a(); if (d = c[0], 0 == d) return; s = c[1] } var h = n(), u = { Child: s, Master: h }; $("#dvLoading").show(), $.ajax({ type: "POST", url: l, data: JSON.stringify(u), contentType: "application/json; charset=utf-8", dataType: "json", processdata: !0, success: function (t) { "1" == t && ($("#myModal").modal("show"), $("#myModal").modal("show"), $("#Time").prop("selectedIndex", 0), $("#Projects").prop("selectedIndex", 0), $("#Employee").prop("selectedIndex", 0), $("#Status").prop("selectedIndex", 0), $("#StatusTypeNo").prop("selectedIndex", 0), $("#formbody").html(""), $("#GateEntryNo").val(""), $("#ChallanNo").val(""), $("#ChallanDate").datepicker("setDate", ""), $("#VehicleNo").val("")) }, complete: function () { $("#dvLoading").hide() }, error: function () { alert("Error in Submit Data") } }) } }) }), $(document).ready(function () { window.Master = Master, window.Trig1 = !0, window.Trig2 = !0, window.Trig3 = !0, window.Trig4 = !0, window.GetMast = function () { $("#Time").val(Master.Time), $("#GateEntryNo").val(Master.GateEntryNo), $("#ChallanNo").val(Master.ChallanNo), $("#VehicleNo").val(Master.VehicleNo) }, window.GetChild = function () { var t = Child; if ("LP" == $("#Status option:selected").val()) for (var e = 0; e < t.length; e++) { var i = t[e]; $("#grid tbody tr").each(function (t) { if (0 != $(this)[0].rowIndex && 1 != $(this)[0].rowIndex) { var e = $(this).children().eq(0).attr("LPUId"); if (e == i.StatusChildId) { var a = $(this).children().eq(7).find("input").val(); null == a && (a = 0), null == i.ReceiveQty && (i.ReceiveQty = 0), $(this).children().eq(7).find("input").val(a - i.ReceiveQty), $(this).children().eq(8).find("input").val(i.ReceiveQty), $(this).children().eq(0).attr("UId", i.UId), $(this).children().eq(0).attr("MUId", i.MUId) } } }) } if ("IPO" == $("#Status option:selected").val()) for (var e = 0; e < t.length; e++) { var i = t[e]; $("#grid tbody tr").each(function (t) { if (0 != $(this)[0].rowIndex && 1 != $(this)[0].rowIndex) { var e = $(this).children().eq(0).attr("IPOUId"); if (e == i.StatusChildId) { var a = $(this).children().eq(8).find("input").val(); null == a && (a = 0), null == i.ReceiveQty && (i.ReceiveQty = 0), $(this).children().eq(8).find("input").val(a - i.ReceiveQty), $(this).children().eq(9).find("input").val(i.ReceiveQty), $(this).children().eq(0).attr("UId", i.UId), $(this).children().eq(0).attr("MUId", i.MUId) } } }) } if ("Receive" == $("#Status option:selected").val()) for (var e = 0; e < t.length; e++) { var i = t[e]; $("#grid tbody tr").each(function (t) { if (0 != $(this)[0].rowIndex && 1 != $(this)[0].rowIndex && 2 != $(this)[0].rowIndex) { var e = $(this).children().eq(0).attr("ostuid"); if (e == i.StatusChildId) { var a = $(this).children().eq(6).find("input").val(); null == a && (a = 0), null == i.ReceiveQty && (i.ReceiveQty = 0), $(this).children().eq(6).find("input").val(a - i.ReceiveQty), $(this).children().eq(7).find("input").val(i.ReceiveQty), $(this).children().eq(0).attr("UId", i.UId), $(this).children().eq(0).attr("MUId", i.MUId) } } }) } if ("Dispatch" == $("#Status option:selected").val()) for (var e = 0; e < t.length; e++) { var i = t[e]; $("#grid tbody tr").each(function (t) { if (0 != $(this)[0].rowIndex && 1 != $(this)[0].rowIndex && 2 != $(this)[0].rowIndex) { var e = $(this).children().eq(0).attr("ostuid"); if (e == i.StatusChildId) { var a = $(this).children().eq(5).find("input").val(); null == a && (a = 0), null == i.ReceiveQty && (i.ReceiveQty = 0), $(this).children().eq(5).find("input").val(a - i.ReceiveQty), $(this).children().eq(7).find("input").val(i.ReceiveQty), $(this).children().eq(0).attr("UId", i.UId), $(this).children().eq(0).attr("MUId", i.MUId) } } }) } } }), $(document).ready(function () { $(document).on("keyup", "td[class^='Receive_']", function () { var t = $(this).find("input").val(), e = $(this).attr("class"), i = e.substring(8), a = $("#Qty_" + i).find("input").val(), n = $("#PReceive_" + i).find("input").val(), r = +t + +n; +r > +a && (alert("Total Greater than  Purchase Qty"), $(this).find("input").val("")) }) }), $(document).ready(function () { function t(t, e) { var i = t.which ? t.which : event.keyCode; return 45 == i && -1 == $(e).val().indexOf("-") || 46 == i && -1 == $(e).val().indexOf(".") || !(48 > i || i > 57) ? !0 : !1 } $(document).on("keypress", "input[id='Receive']", function (e) { return t(e, this) }) });