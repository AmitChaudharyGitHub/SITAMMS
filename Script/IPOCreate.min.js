function GetEmp1(t){var e="<option value='0'> Please wait...</option>";$("#Employee").html(e).show();for(var o="<option value='0'>Select Employee</option>",a=0;a<t.length;a++)o+="<option value="+t[a].Value+">"+t[a].Text+"</option>";$("#Employee").html(o).show()}function GetInd1(t){var e="<option value='0'> Please wait...</option>";$("#Indents").html(e).show();for(var o="<option value='0'>Select Indent</option>",a=0;a<t.length;a++)o+="<option value="+t[a].Value+">"+t[a].Text+"</option>";$("#Indents").html(o).show()}function GetVendor(t){var e="<option value='0'> Please wait...</option>";$("#VNAME").html(e).show();for(var o="<option value='0'>Select Vendor</option>",a=0;a<t.length;a++)null!=t[a].Value&&(o+="<option value="+t[a].Value+">"+t[a].Text+"</option>");$("#VNAME").html(o).show()}$(document).ready(function(){window.lol=function(){alert("lol")},window.GetPrj=function(t){return $("#dvLoading").show(),$.ajax({type:"POST",url:GetProjectByEmpId,dataType:"json",data:{E:ss},complete:function(){$("#dvLoading").hide()},success:function(t){var e="<option value='0'> Please wait...</option>";$("#Projects").html(e).show();var o="<option value='0'>Select Project</option>";$("#Projects").html(o).show(),t=$.parseJSON(t);var a=$("#Projects");$.each(t,function(t,e){a.append($("<option/>",{value:e.Value,text:e.Text}))}),$("#Projects").prop("selectedIndex",1).trigger("change")},error:function(t){alert("Failed to retrieve Project."+t)}}),!1},GetPrj()}),$(document).ready(function(){$("#Projects").change(function(){if(0!=$("#Projects option:selected").val())return $("#PurchaseOrderNo").empty(),$("#dvLoading").show(),$.ajax({type:"POST",url:GetProjectPurchaseOrderNo,dataType:"json",data:{PRJID:$("#Projects").val()},complete:function(){$("#dvLoading").hide()},success:function(t){t=$.parseJSON(t),$("#PurchaseOrderNo").val(t.No),$("#ProjectAddress").val(t.Address),GetEmp1(t.List),GetInd1(t.List1)},error:function(t){}}),!1;var t="<option value='0'>Select Employee</option>";$("#Employee").html(t).show()})}),$(document).ready(function(){$("#VGID").change(function(){if(0!=$("#VGID option:selected").val())return $("#dvLoading").show(),$("#VNAME").empty(),$.ajax({type:"POST",url:GetVendorByGroup,dataType:"json",data:{Vid:$("#VGID").val(),Pid:$("#Projects").val()},complete:function(){$("#dvLoading").hide()},success:function(t){t=$.parseJSON(t),GetVendor(t)},error:function(t){}}),!1;var t="<option value='0'>Select Vendor</option>";$("#VNAME").html(t).show()})}),$(document).ready(function(){$("#VNAME").change(function(){return 0!=$("#VNAME option:selected").val()?($("#SupplierAddress").val(""),$("#SupplierTinNo").val(""),$("#dvLoading").show(),$.ajax({type:"POST",url:GetVendorDetail,dataType:"json",data:{ID:$("#VNAME").val()},complete:function(){$("#dvLoading").hide()},success:function(t){t=$.parseJSON(t),$("#SupplierAddress").val(t.Address),$("#SupplierTinNo").val(t.TinNo)},error:function(t){}}),!1):($("#SupplierAddress").val(""),void $("#SupplierTinNo").val(""))})}),$(document).ready(function(){function t(){$("#Total").val(""),$("#Vat").val(""),$("#VatAmount").val(""),$("#SubTotal").val(""),$("#SurCharge").val(""),$("#Cartage").val(""),$("#GrandTotal").val(""),$("#Rupees").val("")}$("#Indents").change(function(){return 0!=$("#Indents option:selected").val()?($("#dvLoading").show(),$.ajax({type:"GET",url:Grid,data:{IndentNo:$("#Indents").val()},complete:function(){$("#dvLoading").hide()},success:function(e){$("#formbody").html(e),t()},error:function(t){alert("Failed to retrieve Project Code."+t)}}),!1):void $("#formbody").html("")})}),$(document).ready(function(){$(document).on("click","span.checkVal",function(){$(this).find("input").val();var t=$(this).attr("id");t.substring(8)}),$(document).on("click","td[class^='Item_']",function(){alert($(this).attr("class")),alert($(this).text()),alert($(this).val()),$(this).find("input").val();var t=$(this).attr("id");t.substring(8)})}),$(document).ready(function(){function t(){var t=0;$("td[class^='Amount_").each(function(){if(null!=$(this).find("input").val()){var e=$(this).find("input").val();t=+t+ +e}}),$("#Total").val(t.toFixed(2))}function e(){var t=0,e=0,o=$("#Total").val(),a=$("#Vat").val();t=+(o*a/100),e=+o+ +t,$("#VatAmount").val(t.toFixed(2)),$("#SubTotal").val(e.toFixed(2))}function o(){var t=0,e=0,o=0,a=0;null!=$("#SubTotal").val()&&(e=$("#SubTotal").val()),null!=$("#SurCharge").val()&&(o=$("#SurCharge").val()),null!=$("#Cartage").val()&&(a=$("#Cartage").val()),t=+e+ +o+ +a,$("#GrandTotal").val(t.toFixed(2))}$(document).on("keyup","td[class^='Qty_']",function(){var a=$(this).find("input").val(),n=$(this).attr("class"),l=n.substring(4),r=$("#Balance_"+l).find("input").val(),i=$(".Rate_"+l).find("input").val();if(+a>+r&&(alert("Quantity Can,t Greater than Remaining"),$(this).find("input").val("")),null!=i&&null!=a){var d=a*i;d.toFixed(2);$(".Amount_"+l).find("input").val(d.toFixed(2))}t(),e(),o()}),$(document).on("keyup","td[class^='Rate_']",function(){var a=$(this).find("input").val(),n=$(this).attr("class"),l=n.substring(5),r=$(".Qty_"+l).find("input").val();if(null!=a&&null!=r){var i=r*a;i.toFixed(2);$(".Amount_"+l).find("input").val(i.toFixed(2))}t(),e(),o()}),$(document).on("keyup","td[class^='Discount_']",function(){var a=$(this).find("input").val(),n=$(this).attr("class"),l=n.substring(9),r=$(".Qty_"+l).find("input").val(),i=$(".Rate_"+l).find("input").val();if(null!=i&&null!=r&&null!=a){var d=r*i,c=d.toFixed(2);c-=c*a/100,$(".Amount_"+l).find("input").val(c.toFixed(2))}t(),e(),o()}),$(document).on("change","td[class^='Amount_']",function(){t()}),$(document).on("click","#Total",function(){t()}),$(document).on("keyup","#SurCharge",function(){o()}),$(document).on("keyup","#Cartage",function(){o()}),$("#btnCalc").click(function(a){t(),e(),o()}),$(document).on("keyup","#Vat",function(){e()})}),$(document).ready(function(){$(".DatePicker").datepicker({dateFormat:"dd M yy",changeMonth:!0,changeYear:!0,value:""}).val("")}),$(document).ready(function(){function t(){var t=[],e=($("#webgrid tbody tr").each(function(e){var o=new Object;if(0!=$(this)[0].rowIndex){var a=0;x=$(this).children();var a=$(this).children().eq(9).find("input").val();0!=a&&null!=a&&(o.IndentId=$(this).children().eq(0).text().trim(),o.ItemNo=$(this).children().eq(1).text().trim(),o.Qty=$(this).children().eq(6).find("input").val(),o.Rate=$(this).children().eq(7).find("input").val(),o.Discount=$(this).children().eq(8).find("input").val(),o.Amount=a,t.push(o))}}),new Object);e.PurchaseOrderDate=$("#Date").val(),e.PurchaseOrderNo=$("#PurchaseOrderNo").val(),e.ProjectNo=$("#Projects option:selected").val(),e.SupplierNo=$("#VNAME option:selected").val(),e.IndentRefNo=$("#Indents option:selected").text(),e.AcilTinNo=$("#AcilTinNo").val(),e.Total=$("#Total").val(),e.Vat=$("#Vat").val(),e.VatAmount=$("#VatAmount").val(),e.SubTotal=$("#SubTotal").val(),e.SurCharge=$("#SurCharge").val(),e.Cartage=$("#Cartage").val(),e.GrandTotal=$("#GrandTotal").val(),e.Rupees=$("#Rupees").val(),e.SendTo=$("#Employee option:selected").val();var o={Child:t,Master:e};return o}function e(){var t=$("#Date").val(),e=$("#PurchaseOrderNo").val(),o=$("#Projects option:selected").val(),a=$("#VNAME option:selected").val(),n=$("#Indents option:selected").val(),l=($("#AcilTinNo").val(),$("#Total").val()),r=($("#Vat").val(),$("#VatAmount").val(),$("#SubTotal").val()),i=($("#SurCharge").val(),$("#Cartage").val(),$("#GrandTotal").val()),d=($("#Rupees").val(),$("#Employee option:selected").val(),!0);if(""==t?($("#Date").css("border-color","#f0551b"),d=!1):$("#Date").css("border-color",""),""==e?($("#PurchaseOrderNo").css("border-color","#f0551b"),d=!1):$("#PurchaseOrderNo").css("border-color",""),""==o?($("#Projects").css("border-color","#f0551b"),d=!1):$("#Projects").css("border-color",""),""==a?($("#VNAME").css("border-color","#f0551b"),d=!1):$("#VNAME").css("border-color",""),""==n?($("#Indents").css("border-color","#f0551b"),d=!1):$("#Indents").css("border-color",""),""==l?($("#Total").css("border-color","#f0551b"),d=!1):$("#Total").css("border-color",""),""==r?($("#SubTotal").css("border-color","#f0551b"),d=!1):$("#SubTotal").css("border-color",""),""==i?($("#GrandTotal").css("border-color","#f0551b"),d=!1):$("#GrandTotal").css("border-color",""),0==d)return!1;var c=0;return $("td[class^='Amount_").each(function(){if(null!=$(this).find("input").val()){var t=$(this).find("input").val();c=+c+ +t}}),0==c?(alert("Items Grid Not Fill Correctly "),!1):!0}$("#btnsave").click(function(o){var a=e();if(0!=a){var n=t(),l=AddM_AddC;$.ajax({type:"POST",url:l,data:JSON.stringify(n),contentType:"application/json; charset=utf-8",dataType:"json",processdata:!0,success:function(t){"1"==t&&($("#myModal").modal("show"),$("#Date").datepicker("setDate",""),$("#PurchaseOrderNo").val(""),$("#SupplierAddress").val(""),$("#SupplierTinNo").val(""),$("#Projects").prop("selectedIndex",0),$("#VGID").prop("selectedIndex",0),$("#VNAME").prop("selectedIndex",0),$("#Indents").prop("selectedIndex",0),$("#formbody").html(""),$("#Total").val(""),$("#Vat").val(""),$("#VatAmount").val(""),$("#SubTotal").val(""),$("#SurCharge").val(""),$("#Cartage").val(""),$("#GrandTotal").val(""),$("#Rupees").val(""),$("#Employee").prop("selectedIndex",0))},error:function(){alert("Error in Submit Data")}})}})});