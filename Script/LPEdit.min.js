function GetEmp1(e) { var t = "<option value='0'> Please wait...</option>"; $("#empName1").html(t).show(); for (var a = "<option value='0'>Select Employee</option>", o = 0; o < e.length; o++) a += "<option value=" + e[o].Value + ">" + e[o].Text + "</option>"; $("#empName1").html(a).show() } function GetVendor(e) { var t = "<option value='0'> Please wait...</option>"; $("#VNAME").html(t).show(); for (var a = "<option value='0'>Select Vendor</option>", o = 0; o < e.length; o++) null != e[o].Value && (a += "<option value=" + e[o].Value + ">" + e[o].Text + "</option>"); $("#VNAME").html(a).show() } function Getgt() { null != $("#roundoff").val() && (r = $("#roundoff").val()), null != $("#freight").val() && (f = $("#freight").val()), null != $("#exciseduty").val() && (ex = $("#exciseduty").val()), GT = +pf + +Tax - +Tdis + +r + +f + +ex, $("#granttotal").val(GT.toFixed(2)) } $(document).ready(function () { window.lol = function () { alert("lol") }; var e = null; window.getUniqueId = function () { return e || (e = (new Date).getTime()), e++ }, window.parseDate = function (e) { var t = e.Split(" "), a = t[0], o = t[1], n = a + "T" + o; return new Date(n) }, window.toArray = function (e) { var t = []; for (var a in e) { var o = e[a]; "object" == typeof o ? t.push(toArray(o)) : t.push(o) } return t }, window.GetMaster = function () { var e = Master; $("#name").val(e.CashPurchaseNo), $("#RefNo").val(e.RefNo), $("#deliveryaddress").val(e.Delivery_Address), $("#pf").val(e.P_F), $("#exciseduty").val(e.ExciseDuty), $("#freight").val(e.Freight), $("#dcharges").val(e.D_Charges), $("#vat").val(e.Vat), $("#roundoff").val(e.RondOff), $("#granttotal").val(e.GrandTotal) }, GetMaster(), window.GetChild = function () { for (var e = Child, t = 0; t < e.length; t++) { var a = e[t], o = new Object; o.Id = getUniqueId(), o.UId = a.UId, o.ItemGroup = a.ItemGr, o.ItemId = a.ItemId, o.Unit = a.Unit, o.PurchaseQty = a.PurchaseQty, o.Rate = a.Rate, o.Discount = a.Discount, o.TaxType = a.TaxType, o.Vat = a.Vat, o.Amount = a.Amount, o.Makename = a.Make, o.Partname = a.PartNo, o.ItemGroupID = "", o.Itemname = a.Item, gridList.push(o), $("#grid").prepend("<tr class='danger _tempRow'><td>" + o.ItemGroup + "</td><td>" + o.Itemname + "</td><td>" + o.Unit + "</td><td>" + o.Makename + "</td><td>" + o.Partname + "</td><td>" + o.PurchaseQty + "</td><td>" + o.Rate + "</td><td>" + o.Discount + "</td><td>" + o.TaxType + "</td><td>" + o.Vat + "</td><td>" + o.Amount + "</td><td><a href='#' id='removeItem' uniqueId='" + o.Id + "'>Remove</a></td></tr>") } }, GetChild() }), $(document).ready(function () { $("#prjtid1").change(function () { return $("#name").empty(), $("#VNAME").empty(), $('select[name^="VGId"] option:selected').attr("selected", null), 0 != $("#prjtid1 option:selected").val() ? ($("#dvLoading").show(), $.ajax({ type: "POST", url: Getprojectcodes, dataType: "json", data: { id: $("#prjtid1").val() }, complete: function () { $("#dvLoading").hide() }, success: function (e) { e = $.parseJSON(e), $("#name").val(e.Message), GetEmp1(e.List) }, error: function (e) { } }), !1) : void 0 }) }), $(document).ready(function () { $("#VGID1").change(function () { return $("#VNAME").empty(), 0 != $("#VGID1 option:selected").val() ? ($("#dvLoading").show(), $.ajax({ type: "POST", url: GetVendorByGroup, dataType: "json", data: { Vid: $("#VGID1").val(), Pid: $("#prjtid1").val() }, complete: function () { $("#dvLoading").hide() }, success: function (e) { e = $.parseJSON(e), GetVendor(e) }, error: function (e) { } }), !1) : void 0 }) }), $(document).ready(function () { $("#taxtype1").change(function () { var e = $("#taxtype1 option:selected").val(); $("#taxper1").val(e) }) }), $(document).ready(function () { function e() { if (null != $("#rate1").val() && null != $("#quantity1").val()) { var e = $("#rate1").val() * $("#quantity1").val(); $("#amount1").val(e.toFixed(2)) } else $("#amount1").val(0) } $("#rate1").keyup(function () { e() }), $("#quantity1").keyup(function () { e() }) }), $(document).ready(function () { $("#roundoff").keyup(function () { Getgt() }) }), $(document).ready(function () { $("#freight").keyup(function () { Getgt() }) }), $(document).ready(function () { $("#exciseduty").keyup(function () { Getgt() }) }), $(document).ready(function () { $("#quantity1").keyup(function () { if (0 != $("#rate1").val() && 0 != $("#quantity1").val()) { var e = $("#rate1").val() * $("#quantity1").val(); $("#amount1").val(e.toFixed(2)) } }) }), $(document).ready(function () { $("#tblItemMaster").change(function () { return $("#make1").empty(), $("#partno1").empty(), $("#unit1").empty(), 0 != $("#tblItemMaster option:selected").val() ? ($("#dvLoading").show(), $.ajax({ type: "POST", url: GetItemDetail, dataType: "json", data: { id: $("#tblItemMaster").val() }, complete: function () { $("#dvLoading").hide() }, success: function (e) { e = $.parseJSON(e), $("#make1").val(e.Make), $("#partno1").val(e.PartNo), $("#unit1").val(e.Unit) }, error: function (e) { alert("Failed to retrieve Make." + e) } }), !1) : void 0 }) }), $(document).ready(function () { $("#itemgroupname1").change(function () { return $("#tblItemMaster").empty(), $("#tblItemMaster").append($("<option></option").val("").html("Select Item Name")), 0 != $("#itemgroupname1 option:selected").val() ? ($("#dvLoading").show(), $.ajax({ type: "POST", url: GetItemByGroup, dataType: "json", data: { id: $("#itemgroupname1").val() }, complete: function () { $("#dvLoading").hide() }, success: function (e) { e = $.parseJSON(e), $.each(e, function (e, t) { $("#tblItemMaster").append('<option value="' + t.Value + '">' + t.Text + "</option>") }) }, error: function (e) { alert("Failed to retrieve Item Name." + e) } }), !1) : void 0 }) }); var gridList = [], pf = 0, Tdis = 0, Tax = 0, GT = 0, r = 0, f = 0, ex = 0, nowTemp = new Date, now = new Date(nowTemp.getFullYear(), nowTemp.getMonth(), nowTemp.getDate(), 0, 0, 0, 0); $(document).ready(function () { function e() { pf = 0, Tdis = 0, Tax = 0, GT = 0, null != $("#roundoff").val() && (r = $("#roundoff").val()), null != $("#freight").val() && (f = $("#freight").val()), null != $("#exciseduty").val() && (ex = $("#exciseduty").val()); for (var e = 0; e < gridList.length; e++) pf = +pf + +gridList[e].Amount, $("#pf").val(pf.toFixed(2)), Tdis = +Tdis + +(gridList[e].Amount * gridList[e].Discount / 100), $("#dcharges").val(Tdis.toFixed(2)), Tax = +Tax + +(gridList[e].Amount * gridList[e].Vat / 100), $("#vat").val(Tax.toFixed(2)); GT = +pf + +Tax - +Tdis + +r + +f + +ex, $("#granttotal").val(GT.toFixed(2)) } $("#addNew").click(function () { var t = new Object; t.Id = getUniqueId(), t.ItemGroup = $("#itemgroupname1 option:selected").text(), t.ItemId = $("#tblItemMaster option:selected").val(), t.Unit = $("#unit1").val(), t.ItemGroupID = $("#itemgroupname1 option:selected").val(), t.Itemname = $("#tblItemMaster option:selected").text(), t.Makename = $("#make1").val(), t.Partname = $("#partno1").val(), t.PurchaseQty = $("#quantity1").val(), t.Rate = $("#rate1").val(), t.Discount = $("#disper1").val(), 0 != $("#taxtype1 option:selected").val() ? t.TaxType = $("#taxtype1 option:selected").text() : t.TaxType = "", t.Vat = $("#taxper1").val(), t.Amount = $("#amount1").val(), "" == t.PurchaseQty && $("#quantity1").css("border-color", "#f0551b"), "" == t.Rate ? $("#rate1").css("border-color", "#f0551b") : (gridList.push(t), $("#grid").prepend("<tr class='danger _tempRow'><td>" + t.ItemGroup + "</td><td>" + t.Itemname + "</td><td>" + t.Unit + "</td><td>" + t.Makename + "</td><td>" + t.Partname + "</td><td>" + t.PurchaseQty + "</td><td>" + t.Rate + "</td><td>" + t.Discount + "</td><td>" + t.TaxType + "</td><td>" + t.Vat + "</td><td>" + t.Amount + "</td><td><a href='#' id='removeItem' uniqueId='" + t.Id + "'>Remove</a></td></tr>"), e(), $("#quantity1").val(""), $("#rate1").val(""), $("#amount1").val(""), $("#quantity1").css("border-color", ""), $("#rate1").css("border-color", ""), $("#tblItemMaster").css("border-color", ""), $("#disper1").val("")) }), $("#Submit").click(function () { if (gridList.length < 1) return void alert("Add Any Item"); var e = new Object; e.UId = Master.UId, e.CashPurchaseNo = $("#name").val(), e.Date = $("#OrderDate").val(), e.VendorId = $("#VNAME option:selected").val(), e.VendorName = $("#VNAME option:selected").text(), e.RefNo = $("#RefNo").val(), e.RefDate = $("#RefDate").val(), e.ProjectId = $("#prjtid1 option:selected").val(), e.EmpId = $("#empName1 option:selected").val(), e.ProjectName = $("#prjtid1 option:selected").text(), e.EmpName = $("#empName1 option:selected").text(), 0 != e.EmpId && (e.EmpName = $("#empName1 option:selected").text()), e.Delivery_Address = $("#deliveryaddress").val(), e.Delivery_Date = $("#deliverydate").val(), e.P_F = $("#pf").val(), e.ExciseDuty = $("#exciseduty").val(), e.Freight = $("#freight").val(), e.D_Charges = $("#dcharges").val(), e.Vat = $("#vat").val(), e.RondOff = $("#roundoff").val(), e.GrandTotal = $("#granttotal").val(); var t = { Child: gridList, Master: e }, a = $("#prjtid1 option:selected").val(), o = $("#itemgroupname1 option:selected").val(), n = $("#empName1 option:selected").val(), r = $("#tblItemMaster option:selected").val(), d = $("#OrderDate").val(), i = $("#VGID1 option:selected").val(), l = $("#VNAME option:selected").val(), c = !0; if ("0" == a || "" == a || null == a ? ($("#prjtid1").css("border-color", "#f0551b"), c = !1) : $("#prjtid1").css("border-color", ""), "" == o ? ($("#itemgroupname1").css("border-color", "#f0551b"), c = !1) : $("#itemgroupname1").css("border-color", ""), "" == n || "0" == n || null == n ? ($("#empName1").css("border-color", "#f0551b"), c = !1) : $("#empName1").css("border-color", ""), "" == r ? ($("#tblItemMaster").css("border-color", "#f0551b"), c = !1) : $("#tblItemMaster").css("border-color", ""), "" == d ? ($("#OrderDate").css("border-color", "#f0551b"), c = !1) : $("#OrderDate").css("border-color", ""), "" == i ? ($("#VGID1").css("border-color", "#f0551b"), c = !1) : $("#VGID1").css("border-color", ""), "" == l || "0" == l || null == l ? ($("#VNAME").css("border-color", "#f0551b"), c = !1) : $("#VNAME").css("border-color", ""), 0 != c) { var s = SendList2; $("#dvLoading").show(), $.ajax({ type: "Post", url: s, data: JSON.stringify(t), contentType: "application/json; charset=utf-8", dataType: "json", processdata: !0, complete: function () { $("#dvLoading").hide() }, success: function (e) { "1" == e && ($("#myModal").modal("show"), $("#name").val(""), $("#prjtid1").val(""), $("#empName1").val(""), $("#itemgroupname1").val(""), $("#tblItemMaster").val(""), $("#RefNo").val(""), $("#OrderDate").datepicker("setDate", ""), $("#RefDate").datepicker("setDate", ""), $("#deliveryaddress").val(""), $("#deliverydate").datepicker("setDate", now), $("#pf").val(""), $("#exciseduty").val(""), $("#freight").val(""), $("#dcharges").val(""), $("#vat").val(""), $("#roundoff").val(""), $("#granttotal").val(""), gridList = [], $("#grid").empty(), $("#VNAME").empty(), $("#empName1").empty()) }, error: function () { alert("Error in Submit Data") } }) } }), $("body").on("click", "#removeItem", function () { for (var t = $(this).attr("uniqueId"), a = 0; a < gridList.length; a++) gridList[a].Id == t && (gridList.splice(a, 1), $(this).parents("._tempRow").remove()); e() }); var t = null; getUniqueId = function () { return t || (t = (new Date).getTime()), t++ } }), $(document).ready(function () { $(".DatePicker").datepicker({ dateFormat: "dd M yy", changeMonth: !0, changeYear: !0 }) });