function ValidMaster(){var e=$("#PurchaseIRNo").val(),t=$("#PurchaseIRDate").val(),o=$("#Project option:selected").val(),r=$("#SendTo option:selected").val(),a=!0;return"0"==o?($("#Project").css("border-color","#f0551b"),a=!1):$("#Project").css("border-color",""),"0"==r?($("#SendTo").css("border-color","#f0551b"),a=!1):$("#SendTo").css("border-color",""),""==t?($("#PurchaseIRDate").css("border-color","#f0551b"),a=!1):$("#PurchaseIRDate").css("border-color",""),""==e?($("#PurchaseIRNo").css("border-color","#f0551b"),a=!1):$("#PurchaseIRNo").css("border-color",""),a}$(document).ready(function(){window.GetPrj=function(e){return $("#dvLoading").show(),$.ajax({type:"POST",url:GetProjectByEmpId,dataType:"json",data:{E:ss},complete:function(){$("#dvLoading").hide()},success:function(e){var t="<option value='0'> Please wait...</option>";$("#Project").html(t).show();var o="<option value='0'>Select Project</option>";$("#Project").html(o).show(),e=$.parseJSON(e);var r=$.parseJSON(e.List1),a=$("#Project");$.each(r,function(e,t){a.append($("<option/>",{value:t.Value,text:t.Text}))}),$("#Project").prop("selectedIndex",1).trigger("change")},error:function(e){alert("Failed to retrieve Projects."+e)}}),!1},GetPrj()}),$(document).ready(function(){function e(e){var t="<option value='0'> Please wait...</option>";$("#SendTo").html(t).show();for(var o="<option value='0'>Select Employee</option>",r=0;r<e.length;r++)o+="<option value="+e[r].Value+">"+e[r].Text+"</option>";$("#SendTo").html(o).show()}$("#Project").change(function(){return $("#PurchaseIRNo").empty(),0!=$("#Project option:selected").val()?($("#dvLoading").show(),$.ajax({type:"POST",url:GetPurchaseIRNo,dataType:"json",data:{ProjectID:$("#Project").val()},complete:function(){$("#dvLoading").hide()},success:function(t){t=$.parseJSON(t),$("#PurchaseIRNo").val(t.Message),e(t.List)},error:function(e){alert("Failed to retrieve PurchaseIR No."+e)}}),!1):void 0})}),$(document).ready(function(){$("#ItemGroup").change(function(){return $("#ItemMaster").empty(),$("#ItemMaster").append($("<option></option").val("").html("Select Item Name")),0!=$("#ItemGroup option:selected").val()?($("#dvLoading").show(),$.ajax({type:"POST",url:GetItemByGroup,dataType:"json",data:{id:$("#ItemGroup").val()},complete:function(){$("#dvLoading").hide()},success:function(e){e=$.parseJSON(e),$.each(e,function(e,t){$("#ItemMaster").append('<option value="'+t.Value+'">'+t.Text+"</option>")})},error:function(e){alert("Failed to retrieve Item Name."+e)}}),!1):void 0})}),$(document).ready(function(){$("#ItemMaster").change(function(){return $("#Unit").empty(),0!=$("#ItemMaster option:selected").val()?($("#dvLoading").show(),$.ajax({type:"POST",url:GetItemDetail,dataType:"json",data:{id:$("#ItemMaster").val(),PrjId:$("#DispatchSite").val()},complete:function(){$("#dvLoading").hide()},success:function(e){e=$.parseJSON(e),$("#Unit").val(e.Unit),$("#Unit").attr("UNo",e.UnitNo)},error:function(e){alert("Failed to retrieve Unit"+e)}}),!1):void 0})});var gridList=[],pf=0,Tdl=0,Tax=0,GT=0,f=0,child=0,nowTemp=new Date,now=new Date(nowTemp.getFullYear(),nowTemp.getMonth(),nowTemp.getDate(),0,0,0,0);$(document).ready(function(){function e(){var e=new Object;return e.PurRequisitionNo=$("#PurchaseIRNo").val(),e.Date=$("#PurchaseIRDate").val(),e.ProjectNo=$("#Project option:selected").val(),e.ProjectName=$("#Project option:selected").text(),e.SendTo=$("#SendTo  option:selected").val(),e.SendToName=$("#SendTo  option:selected").text(),e}$("#addNew").click(function(){var e=new Object;return e.Id=getUniqueId(),e.ItemGroupName=$("#ItemGroup option:selected").text(),e.ItemGroupNo=$("#ItemGroup option:selected").val(),e.ItemName=$("#ItemMaster option:selected").text(),e.ItemNo=$("#ItemMaster option:selected").val(),e.Unit=$("#Unit").val(),e.UnitNo=$("#Unit").attr("UNo"),e.DemandQty=$("#Qty").val(),""==e.Qty?void $("#Qty").css("border-color","#f0551b"):(gridList.push(e),$("#grid").prepend("<tr class='danger _tempRow'><td>"+e.ItemGroupName+"</td><td>"+e.ItemName+"</td><td>"+e.Unit+"</td><td>"+e.DemandQty+"</td><td><a href='#' id='removeItem' uniqueId='"+e.Id+"'>Remove</a></td></tr>"),$("#Qty").val(""),void $("#Qty").css("border-color",""))}),$("#Submit").click(function(){if(gridList.length<1)return void alert("Add Any Item");var t=ValidMaster();if(0!=t){var o=e(),r={Child:gridList,Master:o},a=SendList1;$("#dvLoading").show(),$.ajax({type:"Post",url:a,data:JSON.stringify(r),contentType:"application/json; charset=utf-8",dataType:"json",processdata:!0,complete:function(){$("#dvLoading").hide()},success:function(e){"1"==e&&($("#myModal").modal("show"),$("#PurchaseIRNo").val(""),$("#PurchaseIRDate").datepicker("setDate",""),$("#Project").prop("selectedIndex",0),$("#SendTo").prop("selectedIndex",0),gridList=[],$("#grid").empty())},error:function(){alert("Error in Submit Data")}})}}),$("body").on("click","#removeItem",function(){for(var e=$(this).attr("uniqueId"),t=0;t<gridList.length;t++)gridList[t].Id==e&&(gridList.splice(t,1),$(this).parents("._tempRow").remove())});var t=null;getUniqueId=function(){return t||(t=(new Date).getTime()),t++}}),$(document).ready(function(){$(".DatePicker").datepicker({dateFormat:"dd M yy",changeMonth:!0,changeYear:!0,value:""}).val("")});