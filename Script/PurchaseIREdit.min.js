function ValidMaster(){var e=$("#PurchaseIRNo").val(),t=$("#PurchaseIRDate").val(),o=$("#Project option:selected").val(),r=$("#SendTo option:selected").val(),a=!0;return"0"==o?($("#Project").css("border-color","#f0551b"),a=!1):$("#Project").css("border-color",""),"0"==r?($("#SendTo").css("border-color","#f0551b"),a=!1):$("#SendTo").css("border-color",""),""==t?($("#PurchaseIRDate").css("border-color","#f0551b"),a=!1):$("#PurchaseIRDate").css("border-color",""),""==e?($("#PurchaseIRNo").css("border-color","#f0551b"),a=!1):$("#PurchaseIRNo").css("border-color",""),a}$(document).ready(function(){window.Trig1=!0;var e=null;window.getUniqueId=getUniqueId=function(){return e||(e=(new Date).getTime()),e++},window.GetPrj=function(e){return $("#dvLoading").show(),$.ajax({type:"POST",url:GetProjectByEmpId,dataType:"json",data:{E:ss},complete:function(){$("#dvLoading").hide()},success:function(e){var t="<option value='0'> Please wait...</option>";$("#Project").html(t).show();var o="<option value='0'>Select Project</option>";$("#Project").html(o).show(),e=$.parseJSON(e);var r=$.parseJSON(e.List1),a=$("#Project");$.each(r,function(e,t){a.append($("<option/>",{value:t.Value,text:t.Text}))}),1==Trig1&&($("#Project").val(Master.ProjectNo),$("#PurchaseIRNo").val(Master.PurRequisitionNo),$("#SendTo").val(Master.SendTo),Trig1=!1)},error:function(e){alert("Failed to retrieve Projects."+e)}}),!1},GetPrj(),window.GetChild=function(){for(var e=Child,t=0;t<e.length;t++){var o=e[t],r=new Object;r.Id=getUniqueId(),r.UId=o.UId,r.MId=o.MId,r.ItemGroupName=o.ItemGroupName,r.ItemGroupNo=o.ItemGroupNo,r.ItemName=o.ItemName,r.ItemNo=o.ItemNo,r.Unit=o.Unit,r.UnitNo=o.UnitNo,r.DemandQty=o.DemandQty,r.PurRequisitionNo=o.PurRequisitionNo,r.Date=o.Date,r.ProjectNo=o.ProjectNo,r.ProjectName=o.ProjectName,gridList.push(r),$("#grid").prepend("<tr class='danger _tempRow'><td>"+r.ItemGroupName+"</td><td>"+r.ItemName+"</td><td>"+r.Unit+"</td><td>"+r.DemandQty+"</td><td><a href='#' id='removeItem' uniqueId='"+r.Id+"'>Remove</a></td></tr>")}},GetChild()}),$(document).ready(function(){$("#ItemGroup").change(function(){return $("#ItemMaster").empty(),$("#ItemMaster").append($("<option></option").val("").html("Select Item Name")),0!=$("#ItemGroup option:selected").val()?($("#dvLoading").show(),$.ajax({type:"POST",url:GetItemByGroup,dataType:"json",data:{id:$("#ItemGroup").val()},complete:function(){$("#dvLoading").hide()},success:function(e){e=$.parseJSON(e),$.each(e,function(e,t){$("#ItemMaster").append('<option value="'+t.Value+'">'+t.Text+"</option>")})},error:function(e){alert("Failed to retrieve Item Name."+e)}}),!1):void 0})}),$(document).ready(function(){$("#ItemMaster").change(function(){return $("#Unit").empty(),0!=$("#ItemMaster option:selected").val()?($("#dvLoading").show(),$.ajax({type:"POST",url:GetItemDetail,dataType:"json",data:{id:$("#ItemMaster").val(),PrjId:$("#DispatchSite").val()},complete:function(){$("#dvLoading").hide()},success:function(e){e=$.parseJSON(e),$("#Unit").val(e.Unit),$("#Unit").attr("UNo",e.UnitNo)},error:function(e){alert("Failed to retrieve Unit"+e)}}),!1):void 0})});var gridList=[],pf=0,Tdl=0,Tax=0,GT=0,f=0,child=0,nowTemp=new Date,now=new Date(nowTemp.getFullYear(),nowTemp.getMonth(),nowTemp.getDate(),0,0,0,0);$(document).ready(function(){function e(){var e=new Object;return e.UId=Master.UId,e.PurRequisitionNo=$("#PurchaseIRNo").val(),e.Date=$("#PurchaseIRDate").val(),e.ProjectNo=$("#Project option:selected").val(),e.ProjectName=$("#Project option:selected").text(),e.SendTo=$("#SendTo  option:selected").val(),e.SendToName=$("#SendTo  option:selected").text(),e}$("#addNew").click(function(){var e=new Object;return e.Id=getUniqueId(),e.ItemGroupName=$("#ItemGroup option:selected").text(),e.ItemGroupNo=$("#ItemGroup option:selected").val(),e.ItemName=$("#ItemMaster option:selected").text(),e.ItemNo=$("#ItemMaster option:selected").val(),e.Unit=$("#Unit").val(),e.UnitNo=$("#Unit").attr("UNo"),e.DemandQty=$("#Qty").val(),""==e.Qty?void $("#Qty").css("border-color","#f0551b"):(gridList.push(e),$("#grid").prepend("<tr class='danger _tempRow'><td>"+e.ItemGroupName+"</td><td>"+e.ItemName+"</td><td>"+e.Unit+"</td><td>"+e.DemandQty+"</td><td><a href='#' id='removeItem' uniqueId='"+e.Id+"'>Remove</a></td></tr>"),$("#Qty").val(""),void $("#Qty").css("border-color",""))}),$("#Submit").click(function(){if(gridList.length<1)return void alert("Add Any Item");var t=ValidMaster();if(0!=t){var o=e(),r={Child:gridList,Master:o},a=SendList2;$("#dvLoading").show(),$.ajax({type:"Post",url:a,data:JSON.stringify(r),contentType:"application/json; charset=utf-8",dataType:"json",processdata:!0,complete:function(){$("#dvLoading").hide()},success:function(e){"1"==e&&($("#myModal").modal("show"),$("#PurchaseIRNo").val(""),$("#PurchaseIRDate").datepicker("setDate",""),$("#Project").prop("selectedIndex",0),$("#SendTo").prop("selectedIndex",0),gridList=[],$("#grid").empty())},error:function(){alert("Error in Submit Data")}})}}),$("body").on("click","#removeItem",function(){for(var e=$(this).attr("uniqueId"),t=0;t<gridList.length;t++)gridList[t].Id==e&&(gridList.splice(t,1),$(this).parents("._tempRow").remove())})}),$(document).ready(function(){$(".DatePicker").datepicker({dateFormat:"dd M yy",changeMonth:!0,changeYear:!0,value:""})});