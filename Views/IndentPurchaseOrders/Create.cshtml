
@{
    ViewBag.Title = "Index";
    string layout = "";
    var cheking = Session["EmailCheck"].ToString();
    if (cheking == "admin@sitanet.in")
    {
        layout = "~/Views/Shared/_AdminLayout.cshtml";
    }
    else
    {
        layout = "~/Views/Shared/_Layout.cshtml";//
    }

    Layout = layout;

    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_Layout.cshtml";
    WebGrid grid = new WebGrid(source: Model, canPage: false);
    var Date = (DateTime)ViewBag.Date;
}
<style type="text/css">
    #dvLoading {
        background: #000 url(../../Images/Loading.gif) no-repeat center center;
        height: 64px;
        width: 64px;
        position: fixed;
        z-index: 1000;
        left: 50%;
        top: 50%;
        margin: -16px 0 0 -16px;
    }
</style>
<style>
    .Piv1 {
        display: normal;
    }

    .Piv2 {
        display: none;
    }
</style>


@*<script src="~/Scripts/jquery-1.7.1.js"></script>*@
<script src="~/Scripts/jquery-1.7.1.min.js"></script>
<link href="@Url.Content("~/Content/themes/base/minified/jquery-ui.min.css")" rel="stylesheet" type="text/css" />

@* Converting Amount Here *@
<script type="text/javascript">
    var iWords = ['Zero', ' One', ' Two', ' Three', ' Four', ' Five', ' Six', ' Seven', ' Eight', ' Nine'];
    var ePlace = ['Ten', ' Eleven', ' Twelve', ' Thirteen', ' Fourteen', ' Fifteen', ' Sixteen', ' Seventeen', ' Eighteen', ' Nineteen'];
    var tensPlace = ['', ' Ten', ' Twenty', ' Thirty', ' Forty', ' Fifty', ' Sixty', ' Seventy', ' Eighty', ' Ninety'];
    var inWords = [];

    var numReversed, inWords, actnumber, i, j;

    function tensComplication() {
        'use strict';
        if (actnumber[i] === 0) {
            inWords[j] = '';
        } else if (actnumber[i] === 1) {
            inWords[j] = ePlace[actnumber[i - 1]];
        } else {
            inWords[j] = tensPlace[actnumber[i]];
        }
    }

    function testSkill() {
        debugger;
        'use strict';
        var junkVal = document.getElementById('SumOfAll_Grand_Total_amt').value;
        junkVal = Math.floor(junkVal);
        var obStr = junkVal.toString();
        numReversed = obStr.split('');
        actnumber = numReversed.reverse();

        if (Number(junkVal) >= 0) {
            //do nothing
        } else {
            window.alert('wrong Number cannot be converted');
            return false;
        }
        if (Number(junkVal) === 0) {
            document.getElementById('container').innerHTML = obStr + '' + 'Rupees Zero Only';
            return false;
        }
        if (actnumber.length > 9) {
            window.alert('Oops!!!! the Number is too big to covertes');
            return false;
        }



        var iWordsLength = numReversed.length;
        var finalWord = '';
        j = 0;
        for (i = 0; i < iWordsLength; i++) {
            switch (i) {
                case 0:
                    if (actnumber[i] === '0' || actnumber[i + 1] === '1') {
                        inWords[j] = '';
                    } else {
                        inWords[j] = iWords[actnumber[i]];
                    }
                    inWords[j] = inWords[j] + ' Only';
                    break;
                case 1:
                    tensComplication();
                    break;
                case 2:
                    if (actnumber[i] === '0') {
                        inWords[j] = '';
                    } else if (actnumber[i - 1] !== '0' && actnumber[i - 2] !== '0') {
                        inWords[j] = iWords[actnumber[i]] + ' Hundred and';
                    } else {
                        inWords[j] = iWords[actnumber[i]] + ' Hundred';
                    }
                    break;
                case 3:
                    if (actnumber[i] === '0' || actnumber[i + 1] === '1') {
                        inWords[j] = '';
                    } else {
                        inWords[j] = iWords[actnumber[i]];
                    }
                    if (actnumber[i + 1] !== '0' || actnumber[i] > '0') {
                        inWords[j] = inWords[j] + ' Thousand';
                    }
                    break;
                case 4:
                    tensComplication();
                    break;
                case 5:
                    if (actnumber[i] === '0' || actnumber[i + 1] === '1') {
                        inWords[j] = '';
                    } else {
                        inWords[j] = iWords[actnumber[i]];
                    }
                    if (actnumber[i + 1] !== '0' || actnumber[i] > '0') {
                        inWords[j] = inWords[j] + ' Lakh';
                    }
                    break;
                case 6:
                    tensComplication();
                    break;
                case 7:
                    if (actnumber[i] === '0' || actnumber[i + 1] === '1') {
                        inWords[j] = '';
                    } else {
                        inWords[j] = iWords[actnumber[i]];
                    }
                    inWords[j] = inWords[j] + ' Crore';
                    break;
                case 8:
                    tensComplication();
                    break;
                default:
                    break;
            }
            j++;
        }


        inWords.reverse();
        for (i = 0; i < inWords.length; i++) {
            finalWord += inWords[i];
        }
        document.getElementById('container').innerHTML =   finalWord;
        document.getElementById('Rupees').value =  "Rupees" + finalWord;  
    }
</script>




<script>
    GetFloor();
    function GetFloor()
    {
        var url = '@Url.Action("View_GTCData", "IndentPurchaseOrders")';
        $('#progress').show();
        $.ajax({
            url: url,
            type: 'GET',
            data: { },
            complete: function () {
                $('#progress').hide();
            },
            success: function (result) {

                $('#Gtc_DatasLoad').html(result);
            }
        });
        return false;
        GetFloor();
    }

</script>

<script>
    GetSi();
    function GetSi()
    {
        var url = '@Url.Action("View_SIData", "IndentPurchaseOrders")';
        $('#progress').show();
        $.ajax({
            url: url,
            type: 'GET',
            data: { },
            complete: function () {
                $('#progress').hide();
            },
            success: function (result) {

                $('#Si_DatasLoad').html(result);
            }
        });
        return false;
        GetSi();
    }

</script>

<script>
    GetSTC();
    function GetSTC()
    {
        var url = '@Url.Action("View_STCData", "IndentPurchaseOrders")';
        $('#progress').show();
        $.ajax({
            url: url,
            type: 'GET',
            data: { },
            complete: function () {
                $('#progress').hide();
            },
            success: function (result) {

                $('#STC_DatasLoad').html(result);
            }
        });
        return false;
        GetSTC();
    }

</script>

<script>
    $(document).ready(function()
    {
        GetFloor();
        GetSi();
        GetSTC();
    });
</script>


<script type="text/javascript">
    var ss = @Html.Raw(Json.Encode(ViewBag.EmpId));
    var GetProjectByEmpId = '@Url.Action("GetProjectByEmpId", "IndentPurchaseOrders")';

    var GetProjectPurchaseOrderNo ='@Url.Action("GetProjectPurchaseOrderNo", "IndentPurchaseOrders")';
    @*var GetProjectPurchaseOrderNo = '@Url.Action("GetProjectPurchaseOrderNo", "IndentPurchaseOrders")';*@

    var GetVendorByGroup = '@Url.Action("GetVendorByGroup", "IndentPurchaseOrders")';
    var GetVendorDetail = '@Url.Action("GetVendorDetail", "IndentPurchaseOrders")';
    var Grid = '@Url.Action("Grid", "IndentPurchaseOrders")';

    var AddM_AddC = '@Url.Action("AddM_AddC", "IndentPurchaseOrders")';

    @*var redidtUrl = '@Url.Action("Index", "View_PO_Details_ByUser_Created")';*@

    var logoutUrl = '@Url.Action("Index", "View_PO_Details_ByUser_Created")';
    var GetBindEmployeeData ='@Url.Action("GetForwardEmployeeType", "IndentPurchaseOrders")';
    var BindPurchaseOnly = '@Url.Action("GetPurchaseEmployeOnly", "IndentPurchaseOrders")';

</script>

@*<script src="~/Script/IPOCreate.js"></script>*@

@*<script src="~/Script/IPOCreateNew.js"></script>*@

<script type="text/javascript">
    

    
    $(document).ready(function () {
    
        window['lol'] = function() { alert('lol');   };

        window['GetPrj'] = function (dateString)
        { 
            // var ss = @Html.Raw(Json.Encode(ViewBag.EmpId));
            $('#dvLoading').show();
            $.ajax({
                type: 'POST',
                url: GetProjectByEmpId, // Calling json method

                dataType: 'json',
                data: { E: ss},
                complete: function () {
                    $('#dvLoading').hide();
                },
                success: function (result) {
                    var procemessage = "<option value='0'> Please wait...</option>";
                    $("#Projects").html(procemessage).show();
                    var markup = "<option value='0'>Select Project</option>";
                    $("#Projects").html(markup).show();
                    result = $.parseJSON(result)
                    var selectedDeviceModel = $('#Projects');
                    $.each(result, function (index, item) {
                        selectedDeviceModel.append(
                            $('<option/>', {
                                value: item.Value,
                                text: item.Text
                            })
                        );
                    });
                    //$("#Projects").prop('selectedIndex', 1);$("#prjtid1")
                    $("#Projects").prop('selectedIndex', 1).trigger('change');
                    $("#prjtid1").prop('selectedIndex', 1).trigger('change');
                    //$.each(partes, function (i, state)
                    //{
                    //markup += "<option value=" + state.Value + ">" + state.Text + "</option>";
                    //});
                    //$("#Prj").html(markup).show();
                },
                error: function (ex) {
                    alert('Failed to retrieve Project.' + ex);
                }
            });
            return false;
        };
        GetPrj();





    }
        )
    $(document).ready(function () {
        
        // alert("Proj Change");
        //Country Dropdown Selectedchange event
        $("#Projects").change(function () {
            if($("#Projects option:selected").val()!=0)
            {
                $("#PurchaseOrderNo").empty();
                $('#dvLoading').show();
                $.ajax({
                    type: 'POST',
                    url: GetProjectPurchaseOrderNo, // Calling json method

                    dataType: 'json',

                    data: { PRJID: $("#Projects").val() },
                    // Get Selected Country ID.
                    complete: function () {
                        $('#dvLoading').hide();
                    },
                    success: function (obj) {
                        obj = $.parseJSON(obj)
                        //  var r = toArray(obj);ProjectAddress


                        $("#PurchaseOrderNo").val(obj.No);
                        $("#ProjectAddress").val(obj.Address);
                      //  GetEmp1(obj.List);
                        //GetInd1(obj.List1);
                    },
                    error: function (ex) {
                        // alert('Failed to retrieve Project Code.' + ex);
                    }
                });
                return false;}else
            { var markup = "<option value='0'>Forward To</option>";
               
              //  $("#Employee").html(markup).show();
            }
        })
    });

  




    function GetEmp1(data) {
        var procemessage = "<option value='0'> Please wait...</option>";
        $("#Employee").html(procemessage).show();
        var markup = "<option value='0'>Forward To</option>";
        for (var x = 0; x < data.length; x++) {


            //console.log(data[x].Value);

            markup += "<option value=" + data[x].Value + ">" + data[x].Text + "</option>";

        }
        $("#Employee").html(markup).show();

    }

  



    function GetInd1(data) {
        var procemessage = "<option value='0'> Please wait...</option>";
        $("#Indents").html(procemessage).show();
        var markup = "<option value='0'>Select Indent</option>";
        for (var x = 0; x < data.length; x++) {      

            markup += "<option value=" + data[x].Value + ">" + data[x].Text + "</option>";

        }
        $("#Indents").html(markup).show();

    }
   
    $(document).ready(function () {
        //Country Dropdown Selectedchange event
        $("#VNAME").change(function () {
            if($("#VNAME option:selected").val()!=0)
            { debugger
              $("#pnl_toggel_vendor-detail").show();
              //  $("#SupplierAddress").val('');
              //  $("#SupplierTinNo").val('');
                $('#dvLoading').show();
                $.ajax({
                    type: 'POST',
                    url: GetVendorDetail, // Calling json method

                    dataType: 'json',

                    data: { ID: $("#VNAME").val() },
                    // Get Selected Country ID.
                    complete: function () {
                        $('#dvLoading').hide();
                    },
                    success: function (obj) {
                        obj = $.parseJSON(obj)
                        //  var r = toArray(obj);ProjectAddress
                        debugger;

                        $("#lbl_vendor_address").text(obj.Address);
                        $("#lbl_vendorCountry").text(obj.VCountry);
                        $("#lbl_vendor_state").text(obj.VState);
                        $("#lbl_vendor_City").text(obj.VCity);
                        $("#lbl_vendor_PinNo").text(obj.V_PIN);
                        $("#lbl_vendor_TinNO").text(obj.TinNo);
                        $("#lbl_vendor_GSTNO").text(obj.GST);
                        $("#lbl_vendor_AadhaarNo").text(obj.vAdhar);
                        $("#lbl_Vendor_CP_name").text(obj.CpName);
                        $("#lbl_Vendor_CP_Mobile").text(obj.CpMobile);
                        $("#lbl_vendor_CP_Phone").text(obj.CpPhone);
                        $("#lbl_vendor_CP_Email").text(obj.CpEmail);




                    },
                    error: function (ex) {
                        // alert('Failed to retrieve Project Code.' + ex);
                    }
                });
                return false;
            }
            else{
                $("#pnl_toggel_vendor-detail").hide();
                $("#SupplierAddress").val('');
                $("#SupplierTinNo").val('');}
        })
    });






    
    $(document).ready(function () {
        //  alert('testing');
        $(document).on('click','span.checkVal',function(){
            // alert($(this).attr('id'));
            //var getQty = $(this).data('qtyid'); 
            // alert(  $(this).find('input').val());
            $(this).find('input').val();

            var str=$(this).attr('id');
            //alert( str.substring(8));
            var a= str.substring(8);
            // alert(   $(".Qty_"+a).find('input').val());
        });
        
        $(document).on('click',"td[class^='Item_']",function(){
            alert($(this).attr('class'));
            alert( $(this).text()); 
            alert( $(this).val()); 
            // alert(  $(this).find('input').val());
            $(this).find('input').val();

            var str=$(this).attr('id');
            //alert( str.substring(8));
            var a= str.substring(8);
            // alert(   $(".Qty_"+a).find('input').val());
        });
        //alert(   $(".Qty_"+a).find('input').val());  "input[name^='news']" "td[class^='Qty_']" $('*[class^="text"]') 
        
        //Country Dropdown Selectedchange event
        // document.getElementById("#Qty_").change(function () {
        //    alert("Round");
        // Getgt();


    });

    $(document).ready(function () {
        var mytst =0;
        $(document).on('keyup', "td[class^='Qty_']", function () {

            var qty=$(this).find('input').val();
            var str=$(this).attr('class');
            var a = str.substring(4);
            
            var Balance= $("#Balance_"+a).find('input').val();
            var Rate=$(".Rate_"+a).find('input').val();
            if(+qty>+Balance)
            { 
             
                alert("Quantity Can't Greater than Remaining");
                $(this).find('input').val('');
            }
            // alert(qty + "" + Rate);
            if(Rate!=null&&qty!=null)
            { var temp1=qty * Rate;
                var Amount = temp1.toFixed(2);
                $(".Amount_"+a).find('input').val(temp1.toFixed(2));
            }
            GetTotal()  ;
            GetSubTotal()  ;
            GetGrandTotal()  ;
            //alert(   $(".Qty_"+a).find('input').val());  "input[name^='news']" "td[class^='Qty_']" $('*[class^="text"]')
        });


        $(document).on('keyup', "td[class^='Rate_']", function () {
           
            var Rate=$(this).find('input').val();
            var str=$(this).attr('class');
            var a = str.substring(5);
            
            var cmrts = $("#RatingsCompares").val();
            

            var Qty= $(".Qty_"+a).find('input').val();
            // alert(Qty + "" + Rate);
            if(Rate!=null&&Qty!=null)
            { var temp1=Qty * Rate;
                var Amount = temp1.toFixed(2);
                $(".Amount_"+a).find('input').val(temp1.toFixed(2));
            }
            if (+cmrts < +Rate)
            {               
                alert("Rate Can't Greater than Fixed Rate");
                $(this).find('input').val(cmrts);
            }

            GetTotal()  ;
            GetSubTotal()  ;
            GetGrandTotal()  ;
              
        });
        $(document).on('keyup',"td[class^='Discount_']",function(){
           
                         
            var Discount = $(this).find('input').val();
           
            var str=$(this).attr('class');
            var a=str.substring(9);
            var Qty= $(".Qty_"+a).find('input').val();
            var Rate= $(".Rate_"+a).find('input').val();
            if(Rate!=null&&Qty!=null&&Discount!=null)
            { var temp1=Qty * Rate;
                var Amount = temp1.toFixed(2);
                Amount = Amount - (Amount * Discount/100);
                $(".Amount_"+a).find('input').val(Amount.toFixed(2));
            }
            GetTotal()  ;
            GetSubTotal()  ;
            GetGrandTotal()  ;
              
        });
        $(document).on('keyup', "td[class^='Vat_']", function () {
            
            
            var Vat = $(this).find('input').val();
            var str = $(this).attr('class');
            var a = str.substring(4);
            var Amount = $(".Amount_" + a).find('input').val();
            //var Rate = $(".Rate_" + a).find('input').val();
            if (Amount != "" && Vat != "") {

                var temp1 = (Amount * Vat) / 100;
                var vat = temp1.toFixed(2);
                var SubAmount = +Amount + +vat;
                $(".SubTotal_" + a).find('input').val(SubAmount.toFixed(2));
            }
            else {
                alert('Vat field is required');
            }
            GetTotal();
            GetSubTotal();
            GetGrandTotal();
        });

        $(document).on('change',"td[class^='Amount_']",function()
        {
            GetTotal()  ;              
        });

        $(document).on('click',"#Total" ,function()
        {     
            GetTotal()  ;
        });
        $(document).on('keyup',"#SurCharge" ,function()
        {     
            GetGrandTotal()  ;
        });
        $(document).on('keyup',"#cartage" ,function()   // here change from #cartage to CartageRate
        { 
            GetGrandTotal()   ;
        });
        $('#btnCalc').click(function (e)
        {//alert("A");
            GetTotal() ;
            GetSubTotal() ;
            GetGrandTotal() ;
        });
        function GetTotal() 
        {
            var T = 0; Topi = 0, ToAmt = 0;
             
            $("td[class^='SubTotal_").each(function () {
                
                if($(this).find('input').val()!=null)
                { 
                    var A= $(this).find('input').val()
                    T=+T + +A;
                }
            });
        
            $("#Total").val(T.toFixed(2));
            //alert(T.toFixed(2))
            //"td[class^='Discount_']"

            $("td[class^='Qty_']").each(function () {
             
                if ($(this).find('input').val() != null) {
                    var Aop = $(this).find('input').val()
                    Topi = +Topi + +Aop;
                }
            });  

            $("#Hidden1").val(Topi);
            // document.getElementById('Hidden1').value = Topi.toFixed(2);
            var hv = $('#Hidden1').val();
            //alert(hv);
            // alert(Topi.toFixed(2))


            $("td[class^='Amount_']").each(function () {
             
                if ($(this).find('input').val() != null) {
                    var Aop1 = $(this).find('input').val()
                    ToAmt = +ToAmt + +Aop1;
                }
            });  

            $("#Hidden2").val(ToAmt);
            var hv1 = $('#Hidden2').val();
        }
        
        function GetSubTotal() 
        {
            //alert("GetSubTotal");
            //var VA=0;
            //var ST=0;      
            //var T=$("#Total").val();
            //var V=$("#Vat").val();

            //VA= +(T * V/100);
            //ST=+T + +VA;
            //$("#VatAmount").val(VA.toFixed(2));
            //$("#SubTotal").val(ST.toFixed(2));
        }
        function GetGrandTotal() 
        {
            //alert("GetSubTotal");
            var Td =0;
            var currVal =0;
            var GT=0;
            var T=0; 
            var S=0;
            var C=0;
            var E=0;
            if($("#Total").val()!=null)
                T=$("#Total").val();
            if($("#SurCharge").val()!=null)
                S=$("#SurCharge").val();

            if($("#Cartage").val()!=null) // here change from #Cartage to CartageRate
                C=$("#Cartage").val(); // here change from #Cartage to CartageRate

            if($("#ExciseDuty").val()!=null) // here change from #ExciseDutyRate to ExciseDutyRate
                E=$("#ExciseDuty").val(); // here change from #ExciseDutyRate to ExciseDutyRate

            GT=+T + +S + +C + +E; 
            // GT=+T + +S + +Td; 
            $("#GrandTotal").val(GT.toFixed(2));
        }
        $("#ExciseDutyRate").keyup(function () {
            //mytst
            var currVal=0;
            var Tid =0;
            if($("#ExciseDutyRate").val() !=null)
            {
                if($("#ExciseDuty").val() != null)
                {
                    if($('#Hidden2').val() !=null)
                        currVal =$('#Hidden2').val();
                    Tid = currVal * $("#ExciseDutyRate").val()/100;
                }
            }
            $("#ExciseDuty").val(Tid.toFixed(2)) ;
            mytst = Tid;
            GetGrandTotal() ;
        });
        $("#CartageRate").keyup(function () {
            //mytst
            var currVal=0;
            var Tid =0;
            if($("#CartageRate").val() !=null)
            {
                if($("#ddlCart").val() == "1")
                {
                    $("#CartageRate").attr('readonly',false);
                    if($('#Hidden1').val() !=null)
                        currVal =$('#Hidden1').val();
                    Tid = currVal * $("#CartageRate").val();
                }
                else if($("#ddlCart").val() == "2")
                {
                    $("#CartageRate").attr('readonly',false);
                    Tid = $("#CartageRate").val();
                }
                else if($("#ddlCart").val() == "3")
                {
                    $("#CartageRate").attr("readonly", true);
                    Tid = 0;
                    $("#CartageRate").val(Tid);
                }
                else{
                    $("#CartageRate").attr('readonly',false);
                }
            }
            //  document.getElementById('<%=Cartage.ClientID%>').value = Tid;
            $("#Cartage").val(Tid) ;
            mytst = Tid;
            GetGrandTotal() ;
            // alert($('#Hidden1').val())

            //alert($("#CartageRate").val())
        });
        $("#ddlCart").change(function () {
            //mytst
            var currVal=0;
            var Tid =0;
            if($("#CartageRate").val() !=null)
            {
                if($("#ddlCart").val() == "1")
                {
                    $("#CartageRate").attr('readonly',false);
                    if($('#Hidden1').val() !=null)
                        currVal =$('#Hidden1').val();
                    Tid = currVal * $("#CartageRate").val();
                }
                else if($("#ddlCart").val() == "2")
                {
                    $("#CartageRate").attr('readonly',false);
                    Tid = $("#CartageRate").val();
                }
                else if($("#ddlCart").val() == "3")
                {
                    $("#CartageRate").attr("readonly", true);
                    Tid = 0;
                    $("#CartageRate").val(Tid);
                }
                else{
                    $("#CartageRate").attr('readonly',false);
                }
            }
            //  document.getElementById('<%=Cartage.ClientID%>').value = Tid;
            $("#Cartage").val(Tid) ;
            mytst = Tid;
            GetGrandTotal() ;
            // alert($('#Hidden1').val())

            //alert($("#CartageRate").val())
        });
        //$(document).on('keyup',"#Vat",function()
        //{
        //    GetSubTotal() ;
              
        //});


    });







    $(document).ready(function () {
        $(".DatePicker").datepicker({
            dateFormat: 'dd M yy',
            changeMonth: true,
            changeYear: true,
            value:"",
            maxDate: new Date()
        });

    });


    $(document).ready(function ()
    {
        
        $('#btnsave').click(function (e)
        {                      
            debugger;
            var V=   Valid();
            
            if(V==false)
                return;
            //debugger;
            var _griddata = gridToArray();
            console.log(_griddata);
            //console.log(otArr);
            var url = AddM_AddC;
            $.ajax({
                type: 'POST',
                url: url,           
                data: JSON.stringify({ Grid : _griddata}),
                contentType: "application/json",	
                dataType: "json" ,
                processdata: true,
      
                success: function (json) 
                {
                    debugger;
                    
                    if (json.Status == "1")
                    {
                        alert("Data Saved Successfully");
                       
                        url: json.redidtUrl,
                        window.location.href = logoutUrl;

                      
                   
                    }

                    else if(json.Status == "3")
                    {
                        alert("Administration Problem. Please Re-load Page.")
                    }
                    else if(json.Status =="4")
                    {
                        alert("Some Problem Occured. Please Contact Administration.")
                    }
                    else if(json.Status == "2")
                    {
                        alert("Some exception problem has occured.");
                    }
                    else if(json.Status == "5")
                    {
                        alert("Session has Expired. Please Re-login or Re-Load Page.");
                    } 
                    else if(json.Status == "6")
                    {
                        alert("Data is already exist.");
                    }
                   
                },
               
                
               
              


            
                error: function (ex)
                {
                    debugger;

                    var errors = ex.responseJSON;

                    console.log(errors);


                    // alert('Failed to retrieve Project Code.' + ex);
                    alert('Error in Submit Data' + ex);
                    debugger;
                }
            });
        });

        function gridTojson() {
            var json = '{';
            var otArr = [];
            var tbl2 = $('#grid tbody tr').each(function (i) {
                if ($(this)[0].rowIndex != 0) {
                    x = $(this).children();
                    var itArr = [];
                    x.each(function () {
                        if ($(this).children('input').length > 0) {
                            itArr.push('"' + $(this).children('input').val() + '"');
                        }
                        else {
                            itArr.push('"' + $(this).text() + '"');
                        }
                    });
                    otArr.push('"' + i + '": [' + itArr.join(',') + ']');
                }
            })
            json += otArr.join(",") + '}'
            return json;
        }

        function gridToArray() {
            
            var otArr = [];
          

            var tbl2 =  $('div.single').find('div.second').each(function (i)
            {
                debugger;
                var obj = new Object();
             
                var jh = jQuery(this).data('dhdn');
                var currQty=$('td.CQty_'+jh).find('input').val();
            

                if(currQty !=null && currQty !=0)
                { debugger;
                    obj.Item_description = $('td.SrNo_'+jh).find('textarea#IDesc').val();
                    obj.Qty = $('td.CQty_'+jh).find('input').val();
                    obj.Rate = $('td.CRate_'+jh).find('input').val();
                    obj.Discount = $('td.CDiscount_'+jh).find('input').val();
                    obj.PackingCharges  = $('td.Packingcharge_'+jh).find('input').val();
                    obj.ExciseDutyType = $('td.Exciseduty_'+jh).find('#ExciseDutyType_'+jh).find(':selected').text();
                    obj.ExcisepercentageAmt = $('td.ExciseAmtUpto_'+jh).find('#ExciseDutyAmtUptoValue_'+jh).val();
                    obj.Cartage1_ID = $('td.CartageType_'+jh).find('#CartageTypeddl_'+jh).find(':selected').val();
                    obj.Cartage_rate =  $('td.CartagerateValue_'+jh).find('#CartageRate1_'+jh).val();
                    obj.CartageAmount =  $('td.Cartageamt_'+jh).find('input').val(); 

                    //2nd Block
                    obj.Insurance1_Type = $('td.InsuranceTypeSel1_'+jh).find('#Insurance_Type_1_'+jh).find(':selected').text();
                    obj.Insurance1Amount =  $('td.InsuranceAmtUpto1_'+jh).find('#InsuranceAmtUptoValue1_'+jh).val();
                    obj.Tax_Type =  $('td.Tax_'+jh).find('#ddl_tax'+jh).find(':selected').text();
                    obj.Tax_Amount = $('td.taxAmtUptoValue_'+jh).find('#txtamtvalupto_'+jh).val();
                    obj.Cartage2_Id  =  $('td.CartageType2_'+jh).find('#CartageTypeddl2_'+jh).find(':selected').val();
                    obj.Cartage2_rate =   $('td.CartagerateValue2_'+jh).find('#CartageRate2_'+jh).val();
                    obj.CartageAmount2 = $('td.Cartageamt2_'+jh).find('#CartageAmount2_'+jh).val();
                    obj.Insurance2_Type = $('td.InsuranceTypeSel2_'+jh).find('#Insurance_Type_2_'+jh).find(':selected').text();
                    obj.Insurance2_Amount = $('td.InsuranceAmtUpto2_'+jh).find('#InsuranceAmtUptoValue2_'+jh).val();

                    obj.ItemNo = $('#hdn_itemnoto_'+jh).val();
                    obj.IndentId = $('#hdn_indent_uid_'+jh).val();
                    obj.RemOrApprovQty = $('#hdn_remaing_qty_'+jh).val();
                    obj.PIQty =$('#hdn_item_approv_qty_'+jh).val();
                    obj.Item_TotalAmt = $('#Ctotal_amount_'+jh).val();
                    obj.Item_SubTotal1 = $('#total_SubTotal_Amount1_'+jh).val();
                    obj.Item_SubTotal2 = $('#total_SubTotal_Amount2_'+jh).val();
                    obj.Item_GrandTotal = $('#total_GrandTotal_Amount_'+jh).val();

                    // additional 
                    obj.IsExcise =  $('td.IsExcise_'+jh).find('#Isexcisedd-'+jh).find(':selected').text();
                    obj.IsInsurance1 = $('td.Insurance1_'+jh).find('#Insuranceddl1_'+jh).find(':selected').text();
                    obj.Insurance1Rate =  $('td.InsuranceValue1_'+jh).find('#Insurancerate1_'+jh).val();
                    obj.IsCartage1 =  $('td.IsCartageType_'+jh).find('#IsCar_tageddl_'+jh).find(':selected').text();
                    obj.IsInsurance2 = $('td.Insurance2_'+jh).find('#Insuranceddl2_'+jh).find(':selected').text();
                    obj.Insurance2Rate =  $('td.InsuranceValue2_'+jh).find('#Insurancerate2_'+jh).val();
                    obj.IsTax =  $('td.IsTax_'+jh).find('#Isexciseddl_'+jh).find(':selected').text();
                    obj.TaxPercentage = $('td.taxValue_'+jh).find('#txtamtval_'+jh).val();
                    obj.IsInsurance3 = $('td.Insurance3_'+jh).find('#Insuranceddl3_'+jh).find(':selected').text();
                    obj.Insurance3_Type = $('td.InsuranceTypeSel3_'+jh).find('#Insurance_Type_3_'+jh).find(':selected').text();
                    obj.Insurance3_Rate =  $('td.InsuranceValue3_'+jh).find('#Insurancerate3_'+jh).val();
                    obj.Insurance3_Amount =  $('td.InsuranceAmtUpto3_'+jh).find('#InsuranceAmtUptoValue3_'+jh).val();
                    obj.IsCartage2 =  $('td.IsCartageType2_'+jh).find('#IsCar_tageddl2_'+jh).find(':selected').text();

                    obj.IsInsurance4 = $('td.Insurance4_'+jh).find('#Insuranceddl4_'+jh).find(':selected').text();
                    obj.Insurance4_Type = $('td.InsuranceSelect4_'+jh).find('#Insurance_Type_4_'+jh).find(':selected').text();
                    obj.Insurance4_Rate =  $('td.InsuranceTypeSel4_'+jh).find('#Insurancerate4_'+jh).val();
                    obj.Insurance4_Amount =  $('td.InsuranceAmtUptoTypeSel4_'+jh).find('#Insurancerate4amtUptoVal_'+jh).val();

                    otArr.push(obj)
                   // oatFirstBlock.push(obj);
                }

                    
                    
            });

            debugger;
            var obj1 = new Object();
           
            obj1.PurchaseOrderDate = $("#Date").val();
            obj1.PurchaseOrderNo = $("#PurchaseOrderNo").val();

            obj1.ProjectNo = $("#hdn_purchase_project_Id").val();
            obj1.Vendor_Group_Id = $("#VGID option:selected").val();
            
            obj1.SupplierNo = $("#VNAME option:selected").val();

            //for code here refereces
            obj1.Reference = $("#Reference1").val();

            obj1.IndentRefNo = $("#hdn_purch_indent_no_ber").val();       
           // obj1.AcilTinNo = $("#AcilTinNo").val();

            obj1.Total = $("#SumOfTotalVal").val();
            //obj1.Vat = $("#Vat").val();
            //obj1.VatAmount = $("#VatAmount").val();

            obj1.SubTotal = $("#SumOfSubTotalAll1Amt").val();
            obj1.SubTotal2 = $("#SumOf_total_Sub_2").val();

           // obj1.SurCharge = $("#SurCharge").val();
           // obj1.Cartage = $("#Cartage").val();
            obj1.GrandTotal = $("#SumOfAll_Grand_Total_amt").val();
            //  obj1.Rupees = $("#Rupees").val(); 
            if(parseFloat($("#hdn_poLimitval").val()) >= parseFloat($("#SumOfAll_Grand_Total_amt").val()))
            {
                obj1.SendTo = $("#PMCEmployee option:selected").val();
                obj1.CheckedBeyondPOLimit =1;
                obj1.Purchase_Id = $("#PMCEmployee option:selected").val();
                
            }
            else
            {
                obj1.SendTo = $("#Employee option:selected").val();
                obj1.CheckedBeyondPOLimit =0;
                obj1.PMC_Id = $("#PMCEmployee option:selected").val();
                
            }

            
            debugger;

          //  obj1.SendTo = $("#Employee option:selected").val();
            obj1.QuotationRefNo = $("#Quot_ion_refId").val();
            obj1.Remarks = $("#PORemarks").val();
          //  obj1.Cartage_Rate = $("#CartageRate").val();
           // obj1.Cartage_Type = $("#ddlCart option:selected").text();
          //  obj1.ExciseDutyRate = $("#ExciseDutyRate").val();
          //  obj1.ExciseDuty = $("#ExciseDuty").val();
        
            var otArr2 = [];
            var tbl2 = $('#grid tbody tr').each(function (i) {

                
                var obj = new Object();
                if ($(this)[0].rowIndex != 0)
                {
                    
                    x = $(this).children().eq(0).find('input');
                    var c = x.is(':checked');
                    // var c = x.attr("checked");
                    //if (x.checked == "checked")
                    if (c == true)
                    {
                        obj.STC_Master_ID = x.val();
                        obj.Purchase_Order_No = $("#PurchaseOrderNo").val();

                        obj.ProjectId = $("#Projects option:selected").val();

                        //obj.IndentId = $(this).children().eq(0).text().trim();                       
                        obj.HeaderTitle = $(this).children().eq(2).find('input').val().trim();
                        
                        obj.STC_Description = $(this).children().eq(3).find('textarea').val().trim();
                      
                        otArr2.push(obj);
                    }
                   
                }
            })
       
            var otArr3 = [];
            var tbl2 = $('#grid2 tbody tr').each(function (i) {

               
                var obj = new Object();
                if ($(this)[0].rowIndex != 0) {

                    x = $(this).children().eq(0).find('input');
                    var c = x.is(':checked');
                    // var c = x.attr("checked");
                    //if (x.checked == "checked")
                    if (c == true) {
                        obj.SI_Master_ID = x.val();
                        obj.Purchase_Order_No = $("#PurchaseOrderNo").val();

                        obj.ProjectId = $("#Projects option:selected").val();

                        //obj.IndentId = $(this).children().eq(0).text().trim();                       
                        obj.Header_Title = $(this).children().eq(2).find('input').val().trim();
                        obj.SI_Description = $(this).children().eq(3).find('textarea').val().trim();

                        otArr3.push(obj);
                    }

                }
            })

            var otArr4 = [];
            var tbl2 = $('#grid_gtcs tbody tr').each(function (i) {

                
                var obj = new Object();
                if ($(this)[0].rowIndex != 0) {

                    x = $(this).children().eq(0).find('input');
                    var c = x.is(':checked');
                    // var c = x.attr("checked");
                    //if (x.checked == "checked")
                    if (c == true) {
                        obj.GTC_Master_ID = x.val();
                        obj.Purchase_Order_No = $("#PurchaseOrderNo").val();

                        obj.ProjectId = $("#Projects option:selected").val();

                        //obj.IndentId = $(this).children().eq(0).text().trim();                       
                        obj.Header_Title = $(this).children().eq(2).find('input').val().trim();
                        obj.GTC_Description = $(this).children().eq(3).find('textarea').val().trim();

                        otArr4.push(obj);
                    }

                }
            })

            debugger;
            var obj5 = new Object();

            obj5.ProjectId = $("#prjtid1 option:selected").val();
            obj5.Purchase_order_No = $("#PurchaseOrderNo").val();
            obj5.Delivery_Schedule = $("#Delivery_Schedule1").val();
            obj5.Delivery_Address = $("#Delivery_Address1").val();
            obj5.Billing_Address = $("#Billing_Address1").val();
            // obj5.Contact_Person_Name = $("#contact_Person_Info1").val();
            obj5.Contact_Person_Name = $("#ddlPurchaseEmployePerson option:selected").text();
            obj5.Contact_Person_Mobile = $("#contact_Person_Mobile1").val();



            var session = {
                'Child': otArr,
                'Child2': otArr2,
                'Child3': otArr3,
                'Child4': otArr4,
                'Child5': obj5,
                'Master': obj1
            };
            return session;
        }

        function Valid() {
        
            var PurchaseOrderDate = $("#Date").val();
        //    var PurchaseOrderNo = $("#PurchaseOrderNo").val();

          //  var ProjectNo = $("#Projects option:selected").val();     
            var SupplierNo = $("#VNAME option:selected").val();
            var Vendor_Group_Id = $("#VGID option:selected").text();
            var Reference  =  $("#Reference1").val();

          //  var IndentRefNo = $("#Indents option:selected").val();       
          //  var AcilTinNo = $("#AcilTinNo").val();

          //  var Total = $("#Total").val();
            //var Vat = $("#Vat").val();
            //var VatAmount = $("#VatAmount").val();

            
            var Remarks = $("#PORemarks").val();

            var Delivery_Schedules = $("#Delivery_Schedule1").val();

            var DeliveryContactPerson = $("#ddlPurchaseEmployePerson option:selected").val();
            var DeliveryContactpersonMobile =  $("#contact_Person_Mobile1").val();

            var Rupees = $("#Rupees").val();

            var SendTo = $("#Employee option:selected").text();    
            
            var rr = true;

            if (PurchaseOrderDate == "") {
                alert('OrderDate field is empty');
                $('#Date').css('border-color', '#f0551b');
                
                rr = false;
            }
            else {
                $('#Date').css('border-color', '');
            }                    


            if (Vendor_Group_Id == "Select Vendor Group")
            {
                alert('Vendor Group field is empty');
                $('#VGID').css('border-color', '#f0551b');
                
                rr = false;
            }
            else {
                $('#VGID').css('border-color', '');

            }

            if (SupplierNo == "")
            {
                alert('Vendor Name field is empty');
                $('#VNAME').css('border-color', '#f0551b');
                
                rr = false;
            }
            else {
                $('#VNAME').css('border-color', '');

            }


            if (Reference == "") {
                alert('Reference can not be Empty.');
                $('#Reference1').css('border-color', '#f0551b');

                rr = false;
            }
            else {
                $('#Reference1').css('border-color', '');
            }


            if (Remarks == "") {
                alert('Remarks can not be Empty.');
                $('#PORemarks').css('border-color', '#f0551b');

                rr = false;
            }
            else {
                $('#PORemarks').css('border-color', '');
            }

            if (Delivery_Schedules == "") {
                alert('Delivery Schedule field is empty');
                $('#Delivery_Schedule1').css('border-color', '#f0551b');

                rr = false;
            }
            else {
                $('#Delivery_Schedule1').css('border-color', '');
            }

         if (Rupees == "") {
                alert('Amount in Word field is empty');
                $('#Rupees').css('border-color', '#f0551b');

                rr = false;
            }
            else {
                $('#Rupees').css('border-color', '');
            }
            
         if(DeliveryContactPerson =="0")
         {
             alert('Select Delivery Contact Person Name.');
             $('#ddlPurchaseEmployePerson').css('border-color', '#f0551b');

             rr = false;
         }
         else{
             $('#ddlPurchaseEmployePerson').css('border-color', '');
         }

         if(DeliveryContactpersonMobile =="")
         {
             alert('Contact Person Mobile can not be empity.');
             $('#contact_Person_Mobile1').css('border-color', '#f0551b');

             rr = false;
         }
         else
         {
             $('#contact_Person_Mobile1').css('border-color', '');
         }

           



           
           
        
            if (rr == false)
            {
            
             
                return false;
            }
            else
            {
                //var T=0;
             
                //$( "td[class^='Amount_" ).each(function() {
                
                //    if($(this).find('input').val()!=null)
                //    { 
                //        var A= $(this).find('input').val()
                //        T=+T + +A;
                //    }
                //});
                //if(T==0)
                //{ alert("Items Grid Not Fill Correctly ");
                //    return false;
                //}
                return true;
            }
        }
    });










</script>

<style>
    .nav-tabs.nav-tabs-border > li.active > a {
        border-top: 2px solid #4a89dc;
        margin-top: -1px;
    }

    .nav-tabs > li.active > a, .nav-tabs > li.active > a:hover, .nav-tabs > li.active > a:focus {
        background: #ffffff none repeat scroll 0 0;
        color: #555555;
        cursor: default;
    }

    .nav-tabs-left > li > a {
        border-left: 1px solid transparent;
        border-right: 1px solid #ddd;
    }

    .nav-tabs > li > a {
        border-left: 1px solid #ddd;
        border-radius: 0;
        color: #777;
        font-size: 12px;
        line-height: 18px;
        padding: 10px 18px;
    }

    .tab-content .tab-pane {
        padding: 20px 0;
    }
</style>

<script>
    $(document).ready(function() {
        $('.continue').click(function () {

            $('.nav-tabs > .active').next('li').find('a').trigger('click');
        });
        $('.back').click(function () {
            $('.nav-tabs > .active').prev('li').find('a').trigger('click');
        });

    });
</script>

@*//dynamic webgrid for terms and conditions*@
<script type="text/javascript">
    $(document).ready(function () {
        //Country Dropdown Selectedchange event
        $("#prjtid1").change(function () {
            $("#Delivery_Address1").empty();
            $("#Billing_Address1").empty();
            $.ajax({
                type: 'POST',
                url: '@Url.Action("GetProjectAdress")', // Calling json method

                dataType: 'json',

                data: { id: $("#prjtid1").val() },
                // Get Selected Country ID.

                success: function (partes) {

                    //    $.each(states, function (i, state) {
                    //alert(state.Value)
                    $("#Delivery_Address1").val(partes);
                    $("#Billing_Address1").val(partes);
                    // });
                },
                error: function (ex) {
                    alert('Failed to retrieve Part No.' + ex);
                }
            });


            $.ajax({
                type: 'POST',
                url: BindPurchaseOnly, // Calling json method

                dataType: 'json',

                data: { ProjectId: $("#prjtid1 option:selected").val() },
                 

                success: function (objpur) {
                    objpur = $.parseJSON(objpur)
                    //  var r = toArray(obj);


                  
                    GetPurchaseEmpOnlyList(objpur);

                },
                complete: function () {
                    $('#loading').hide();
                },
                error: function (ex) {
                    alert('Failed to retrieve.' + ex);
                }
            });



            return false;
        })
    });

    function GetPurchaseEmpOnlyList(data)
    {
        var procemessage = "<option value='0'> Please wait...</option>";
        $("#ddlPurchaseEmployePerson").html(procemessage).show();
        var markup = "<option value='0'>Select Contact Person Name</option>";
        for (var x = 0; x < data.length; x++) {


            if (data[x].Value != null)
                markup += "<option value=" + data[x].Value + ">" + data[x].Text + "</option>";

        }
        $("#ddlPurchaseEmployePerson").html(markup).show();
    }


</script>

@*<script type="text/javascript">
    $(document).ready(function () {
    // closed recently on date 07 june 2017
        $("#prjtid1").change(function () {
            $("#contact_Person_Info1").empty();
            $.ajax({
                type: 'POST',
                url: '@Url.Action("GetEmployeeName")', 

                dataType: 'json',

                data: { id: $("#prjtid1").val() },
                success: function (partes) {
                    $("#contact_Person_Info1").val(partes);
                },
                error: function (ex) {
                    alert('Failed to retrieve Part No.' + ex);
                }
            });
            return false;
        })
    });
</script>*@

<script type="text/javascript">
    $(document).ready(function () {
        //Country Dropdown Selectedchange event
        $("#ddlPurchaseEmployePerson").change(function () {
            $("#contact_Person_Mobile1").empty();
            $.ajax({
                type: 'POST',
                url: '@Url.Action("GetEmployeeContact")', // Calling json method

                dataType: 'json',

                data: { id: $("#ddlPurchaseEmployePerson option:selected").val() },
                success: function (partes) {
                    $("#contact_Person_Mobile1").val(partes);
                },
                error: function (ex) {
                    alert('Failed to retrieve Mobile No.' + ex);
                }
            });
            return false;
        })
    });
</script>

<script type="text/javascript">
    $(document).ready(function() {
    
        var timer;
        $(function(){
            $('#dateTime').html(getDateTime());
    
            // Do a $.ajax call and update start time in your database
    
            timer = setTimeout(function(){
                update();
            }, 1000);
    
            //$('#btn').click(function(){        
            //    clearTimeout(timer); 
            //    var currentdatetime = getDateTime();
        
            //    // Do a $.ajax call and update end time in your database
            //});
        });

        function update() {
            $('#dateTime').html(getDateTime());
    
            timer = setTimeout(function(){
                update();
            }, 1000);    
        }

        function getDateTime(){
            var currentdate = new Date(); 
            var datetime = "System Date Time: " + currentdate.getDate() + "/"
                        + (currentdate.getMonth()+1)  + "/" 
                        + currentdate.getFullYear() + " "  
                        + currentdate.getHours() + ":"  
                        + currentdate.getMinutes() + ":" 
                        + currentdate.getSeconds();
            return datetime;
        }
    
    });

</script>

<script type="text/javascript">

    $(document).ready(function(){
        //var gettofind_Id = $("#hdn_pur_req_id").val();
        //alert(gettofind_Id);
        //$(document).on('click', '.mahajet', function(){
        //    var ytttsds = jQuery(this).data('trautoincrm');
        //    var vg=  $("#Ctotal_amount_" +ytttsds).val()
        //    alert(vg);

        //    //$("#18135").each(function ()
        //    //{ debugger;
        //    //    alert("yes")
        //    //});
        //});






      var GetPu_OnPodetail= '@Url.Action("GetDetailOnPO", "IndentPurchaseOrders")';

        $.getJSON(GetPu_OnPodetail, { Purchasereq: $("#hdn_PurreqNo").val() }, function (data) {

            data = $.parseJSON(data);



            $.each(data, function(i, item) {
                $('#lblprojctnmWithaddd').text(item.ProjectName + ' ,' + item.Location);
                $('#PurchaseOrderNo').val(item.PONumber);
                $('#lblPurch_indentno').text(item.PurRequisitionNo);
                $('#lbl_pur_indentdate').text(item.Date);
                $('#lbl_purIndent_QuotrefNo').text(item.QuotationRefNo);
                $('#hdn_Purchase_Indent_detail').val(item.UId);
                $('#hdn_purchase_project_Id').val(item.ProjectNo);
                $('#hdn_purch_indent_no_ber').val(item.PurRequisitionNo);

            });
            BindrecordThroughPurchaseIndentReq($('#hdn_Purchase_Indent_detail').val());


        });


        function BindrecordThroughPurchaseIndentReq(xret)
        {
            if(xret!=null)
            {
                $('#dvLoading').show();

                $.ajax({
                    type:  'GET',
                    url: Grid, // Calling json method
                    data: { IndentNo_New: xret },
                    // Get Selected Country ID.
                    complete: function () {
                        $('#dvLoading').hide();
                    },
                    success: function (result) {

                        $('#formbody').html(result);
                        ClearValues() ;
                    },
                    error: function (ex) {
                        alert('Failed to retrieve Project Code.' + ex);
                    }
                });
                //return false;
            }
            else
            { $('#formbody').html('');}
        }


        function ClearValues()
        {
            $("#Total").val('');
            $("#Vat").val('');
            $("#VatAmount").val('');
            $("#SubTotal").val('');
            $("#SurCharge").val('');
            $("#Cartage").val('');
            $("#GrandTotal").val('');
            $("#Rupees").val('');
            $("ExciseDutyRate").val();
            $("ExciseDuty").val();
        }

        $("#VGID").change(function ()
        {

            if($("#VGID option:selected").val()!=0)
        {
            $('#dvLoading').show();
            $("#VNAME").empty();
            $.ajax({
                type: 'POST',
                url: GetVendorByGroup, // Calling json method

                dataType: 'json',

                data: { Vid: $("#VGID").val(), Pid: $('#hdn_purchase_project_Id').val() },
                // Get Selected Country ID.
                complete: function () {
                    $('#dvLoading').hide();
                },
                success: function (obj) {
                    obj = $.parseJSON(obj)



                    // console.log(obj)
                    GetVendor(obj);

                },
                error: function (ex) {
                    // alert('Failed to retrieve Project Code.' + ex);
                }
            });
            return false;
        }else
        { var markup = "<option value='0'>Select Vendor</option>";

            $("#VNAME").html(markup).show();
        }
        })

        function GetVendor(data) {
            var procemessage = "<option value='0'> Please wait...</option>";
            $("#VNAME").html(procemessage).show();
            var markup = "<option value='0'>Select Vendor</option>";
            for (var x = 0; x < data.length; x++) {


                //console.log(data[x].Value);
                if (data[x].Value != null)
                    markup += "<option value=" + data[x].Value + ">" + data[x].Text + "</option>";

            }
            $("#VNAME").html(markup).show();

        }

        validteq();
        CalculateTotal();
        EnableOrDisableOfCartageAndInsurance();

        ForSubTotal1();
        T1();
        Cl(); C2(); C1_lum(); 
        //C2_lum2();
        SeconedLevelRowCal();
        ItemWiseFullCalculation();
      

    });

    function validteq()
    {

        $(document).on('keyup', "td[class^='CQty_']", function () {

            var q = $(this).find('input').val();
            var str=$(this).attr('class');
            var a = str.substring(4);
            var remq = $("#hdn_remaing_qty" + a).val();

            if(+q>+remq)
            { 
             
                alert("Quantity Can't Greater than Remaining");
                $(this).find('input').val('');
            }

        });


        



    }


    function CalculateTotal()
    {

        $(document).on('keyup', "td[class^='CRate_']", function () {

             var temp1 =0; var Temp2 =0; var Tolt =0;
            var Rate=$(this).find('input').val();
            var str=$(this).attr('class');
            var a = str.substring(5);

            var cmrts = $("#RatingsCompares").val();


            var Qty= $(".CQty" +a).find('input').val();
           //  Disc = $(".CDiscount" +a).find('input').val();

            if(Rate!=null&&Qty!=null)
            { temp1=Qty * Rate;}

            if(temp1 !=null)
            { $("#Ctotal_amount" + a).val(temp1.toFixed(2));}




            //if (+cmrts < +Rate)
            //{
            //    alert("Rate Can't Greater than Fixed Rate");
            //    $(this).find('input').val(cmrts);
            //}

            //GetTotal()  ;
            //GetSubTotal()  ;
            //GetGrandTotal()  ;

        });


        $(document).on('keyup', "td[class^='CDiscount_']", function () {

            var Disc = 0; var temp1 =0; var Temp2 =0; var Tolt =0;
            var Disc= $(this).find('input').val();
            var str=$(this).attr('class');
            var a = str.substring(9);

            var Rate = $(".CRate" +a).find('input').val();
            var Qty= $(".CQty" +a).find('input').val();

            if(Disc !=null)
            {

            if(Rate!=null&&Qty!=null)
            { temp1=Qty * Rate;}
            if(temp1 !=null && Disc !=null)
            {Temp2 = temp1 * (Disc/100);}
            if(temp1!=null && Temp2 !=null)
            {Tolt=(temp1-Temp2);}
            if(Tolt !=null)
            {


                $("#Ctotal_amount" + a).val(Tolt.toFixed(2));

            }
            }

        });

       


    function ForSubTotal1()
    {
        //debugger;
        //$("td[class^='IsExcise_").each(function () {
        //    debugger;
        //    var str = $(this).attr('class');
        //    debugger;
        //    alert("jsdksj")
        //    var a = str.substring(8);
        //    debugger;
        //});



        $(document).on('change','.render-po', function(){
            var getdym = jQuery(this).data('rederpo');

           // alert(getdym);

            var Getexcisetype = '@Url.Action("GetExciseBySelect", "IndentPurchaseOrders")';

            //var str =  $("td[class^='Exciseduty_']").attr('class');
            //var aa = str.substring(10);


            if($(this).val()!=-1)
            {
              //  $("#ExciseDutyType" +aa).empty();
                $.ajax({
                    type: 'POST',
                    url: Getexcisetype, // Calling json method

                    dataType: 'json',

                    data: { Type: $(this).val() },
                    //// Get Selected Country ID.
                    //complete: function () {

                    //},
                    success: function (obj) {
                        obj = $.parseJSON(obj)

                   

                        // console.log(obj)
                        BindExciseData(obj,getdym);

                    },
                    error: function (ex) {

                    }
                });
                return false;
            }else
            { var markup = "<option value='-1'>Select</option>";

            $("#ExciseDutyType" +getdym).html(markup).show();
            }





        });

        // for cartage 1

        $(document).on('change','.carstat-usge', function(){

            var getIscartage_dynamicId=jQuery(this).data('redcartge');

            var GetCartageAll= '@Url.Action("GetCartage1BySelect", "IndentPurchaseOrders")';

            if($(this).val()!=-1)
            {
              
                $.ajax({
                    type: 'POST',
                    url: GetCartageAll, 

                    dataType: 'json',

                    data: { Type: $(this).val() },
                    success: function (obj1) {
                       
                        obj = $.parseJSON(obj1)
                        BindCartageAllSelectedTypeData(obj,getIscartage_dynamicId);
                       
                    },
                    error: function (ex) {

                    }
                });
                return false;
            }else
            { var markup = "<option value='-1'>Select</option>";

            $("#CartageTypeddl_" +getIscartage_dynamicId).html(markup).show();
            }



        });

        // for Cartage 2

        $(document).on('change','.carstat-usge2', function(){

            var getIscar2Id=jQuery(this).data('redcartgetwo');

            var GetCartage2All= '@Url.Action("GetCartage1BySelect", "IndentPurchaseOrders")';

            if($(this).val()!=-1)
            {
              
                $.ajax({
                    type: 'POST',
                    url: GetCartage2All, 

                    dataType: 'json',

                    data: { Type: $(this).val() },
                    success: function (obj1) {
                       
                        obj = $.parseJSON(obj1)
                        BindCartageAllSelectedTypeData2(obj,getIscar2Id);
                       
                    },
                    error: function (ex) {

                    }
                });
                return false;
            }else
            { var markup = "<option value='-1'>Select</option>";

            $("#CartageTypeddl2_" +getIscar2Id).html(markup).show();
            }



        });


        BindInsurance();

        BindTax();

        //end

        $(document).on('change','.car1-type1', function(){
         
            var Ctg_ID =jQuery(this).data('cartage1');
            
             //  alert($(this).val());
            //alert(Ctg_ID);
        
           // alert($(this).parent().prev().children().find(":selected").text());

            var checktxt = $(this).parent().prev().children().find(":selected").text();
            if(checktxt=='Yes')
            {
               
                $(".CartagerateValue_" +Ctg_ID).enabled;
                $(".CartageValue_" +Ctg_ID).enabled;
                if($(this).val() ==4)
                {
                  //  $(".CartagerateValue_" +Ctg_ID).prop('disabled',false);
                    $(".CartagerateValue_" +Ctg_ID).find('input').prop('disabled',false);


                    var qty = $(".CQty_" +Ctg_ID).find('input').val();
                    var Cartagw_rate = $(".CartagerateValue_" +Ctg_ID).find('input').val(); 
                    
                    if(qty !=null && Cartagw_rate !=null)
                    { Cl();}

                }
                else if($(this).val() ==3)
                {
                 
                   // $(".CartageRate1_" +Ctg_ID).prop('disabled',true);
                    $(".CartagerateValue_" +Ctg_ID).find('input').prop('disabled',true);

                    $(".caramt_" +Ctg_ID).prop('disabled',false); C1_lum();
                }

                else if($(this).val() =="-1")
                {
                    $(".CartagerateValue_" +Ctg_ID).find('input').val('');
                    $(".Cartageamt_" +Ctg_ID).find('input').val('');
                }
                
               

            }
            else if(checktxt=='No')
            {
               
                $(".CartagerateValue_" +Ctg_ID).find('input').prop('disabled',true);
                $(".caramt_" +Ctg_ID).prop('disabled',true);
                $(".caramt_" +Ctg_ID).val(0);
            }
       

        });

        FindValueOfCarTageRateAndAmount();
       

     }

    function isNumeric(n) {
        return !isNaN(parseFloat(n)) && isFinite(n);
    }



    function T1()
    {
        $(document).on('change','.exx-type', function(){

            debugger;

            var gertdd = jQuery(this).data('redo');
            var Ex_val =0;

            //var str =  $("td[class^='Exciseduty_']").attr('class');
            //var aa = str.substring(10);


            // alert($(this).val()) //ExciseDutyValue_18134

           



            $("#ExciseDutyValue_" + gertdd).val($(this).val());
           

            var Isex_val =$('td.Exciseduty_'+gertdd).find('#ExciseDutyType_'+gertdd).find(':selected').val();
            alert(isNumeric(Isex_val));
            //if(isNumeric(Isex_val)) { alert('number'); } 
            //else { alert('not number'); }
            if(Isex_val ==-1 || isNumeric(Isex_val) == false)
            {
                Ex_val =0;
            }
            else
            {
                Ex_val = $(this).val();
            }


            if($('td.IsExcise_'+gertdd).find('#Isexcisedd-'+gertdd).find(':selected').val() =="-1")
            {
              
                $("#ExciseDutyAmtUptoValue_" + gertdd).val('');
            }
            else{
                F1(gertdd,Ex_val);
            }


           // F1(gertdd,$(this).val());
           


        });


        $(document).on('change','.Insi-Type-1-L', function(){ debugger;
            var gid =jQuery(this).data('insi1w'); debugger;
            $("#Insurancerate1_" + gid).val($(this).val());

        });

        $(document).on('change','.Insi-Type-2-L', function(){ debugger;
            var gid2 =jQuery(this).data('insi2w'); debugger;
            $("#Insurancerate2_" + gid2).val($(this).val());

        });
        $(document).on('change','.Insi-Type-3-L', function(){ debugger;
            var gid3 =jQuery(this).data('insi3w'); debugger;
            $("#Insurancerate3_" + gid3).val($(this).val());

        });

        $(document).on('change','.Insi-Type-4-L', function(){ debugger;
            var gid4 =jQuery(this).data('insi4w'); debugger;
            $("#Insurancerate4_" + gid4).val($(this).val());

        });
        

        $(document).on('change','.tax-ddl-bind', function(){ debugger;
            var gid_tax =jQuery(this).data('mytaxv'); debugger;
            $("#txtamtval_" + gid_tax).val($(this).val());

        });


    }



    function BindExciseData(data,getdym) {
       // alert("2="+getdym);
       
        var markup = "<option value='-1'>Select</option>";
    
        for (var x = 0; x < data.length; x++) {


            if (data[x].Value != null)
                markup += "<option value=" + data[x].Value + ">" + data[x].Text + "</option>";

        }
        $("#ExciseDutyType_" +getdym).html(markup).show();


    }

    function  BindCartageAllSelectedTypeData(data,D_Id)
    { 
      //  alert(D_Id);
        var markup = "<option value='-1'>Select</option>";
        for (var x = 0; x < data.length; x++) {


            if (data[x].Value != null)
                markup += "<option value=" + data[x].Value + ">" + data[x].Text + "</option>";

        }
        $("#CartageTypeddl_" +D_Id).html(markup).show();
    }

  
    function BindCartageAllSelectedTypeData2(data,D_Id)
    {
        var markup = "<option value='-1'>Select</option>";
        for (var x = 0; x < data.length; x++) {


            if (data[x].Value != null)
                markup += "<option value=" + data[x].Value + ">" + data[x].Text + "</option>";

        }
        $("#CartageTypeddl2_" +D_Id).html(markup).show();
    }



    function Cl()
    {
        var CartageTotal=0; var qty=0;
      
        $(document).on('keyup', '.cartage1-Inputrate', function () {
          
            var d = jQuery(this).data('itval');
            var j = $(this).val();
            var qty = $(".CQty_" +d).find('input').val();

            CartageTotal = qty * j;
            $(".Cartageamt_" +d).find('input').val(CartageTotal.toFixed(2))

            F2(d,j)
        
        });
    }

    function C1_lum()
    {
        $(document).on('keyup', '.car1amttkval', function () {
            var idss = jQuery(this).data('cart1amtvalsum');
            F2(idss,'lupsum');
        });
    }


    function C2()
    {
        var CartageTotal=0; var qty=0;
      
        $(document).on('keyup', '.cartage2-Inputrate', function () {
          
            var d = jQuery(this).data('itvaltwo');
            var j = $(this).val();
            var qty = $(".CQty_" +d).find('input').val();

            CartageTotal = qty * j;
            $(".Cartageamt2_" +d).find('input').val(CartageTotal.toFixed(2))

         //  F2_2(d,j)
        
        });
    }

    //function C2_lum2()
    //{
    //    $(document).on('keyup', '.car2itemvalsumd', function () {
    //        var idoj = jQuery(this).data('bssdo');
    //        F2(idss,'lupsum');
    //    });
    //}

   

    function F1(Id,Val)
    {
        var PackageVal =0; var tol=0; var TT=0; Sumt1=0;
      
        //$('div.table-responsive').find('tr').find("td[class^='Cartageamt_']").each(function ()
        //{ debugger;
        //    alert("yes")
        //}); debugger
        debugger;
       
         PackageVal =  $(".Packingcharge_" +Id).find('input').val();
        if(isNaN(PackageVal) || PackageVal =='')
        {
            PackageVal = 0;
        }
        else
        {
            PackageVal =PackageVal;
        }
        var tol = $("#Ctotal_amount" +'_' +Id).val();
        

        var sum = parseFloat(PackageVal)+parseFloat(tol);
        TT=sum*(Val/100);   
        Sumt1 = parseFloat(TT) + parseFloat(tol) + parseFloat(PackageVal);

        $("#total_SubTotal_Amount1_" + Id).val(Sumt1.toFixed(2));
        $("#ExciseDutyAmtUptoValue_" + Id).val(TT.toFixed(2));
        
    }


    function F2(Idd,cartage_rate)
    {
        debugger; 
        var E =0;var D=0; var G=0; var H=0; var Tolt=0; var Ins=0;
        E =  $(".Packingcharge_" +Idd).find('input').val(); if(isNaN(E) || E =='') { E=0; } else { E=E;}
        D = $("#Ctotal_amount" +'_' +Idd).val(); 
        var Ex_val = $(".ExciseDutyValue_" +Idd).find('input').val();
        var sum = parseFloat(E)+parseFloat(D);

        if(isNaN(Ex_val) || Ex_val =='')
        {
            Ex_val =0;
        }
        else
        {
            Ex_val = $(".ExciseDutyValue_" +Idd).find('input').val();
        }

         G=sum*(Ex_val/100);   

         if(cartage_rate =='lupsum')
         {
             H = $(".Cartageamt_" +Idd).find('input').val();
         }
         else{
             var qty = $(".CQty_" +Idd).find('input').val();
             H = qty * cartage_rate;
         }

         if($('td.InsuranceTypeSel1_'+Idd).find('#Insurance_Type_1_'+Idd).find(':selected').val() != "" && $('td.InsuranceTypeSel1_'+Idd).find('#Insurance_Type_1_'+Idd).find(':selected').val() !="-1" )
         {
         var insi =  $('td.InsuranceTypeSel1_'+Idd).find('#Insurance_Type_1_'+Idd).find(':selected').text();
         if(insi =='lupsum')
         {
              Ins=0;
         }
         else
         {
              Ins =  $('td.InsuranceAmtUpto1_'+Idd).find('#InsuranceAmtUptoValue1_'+Idd).val();
         }
         }

         //var qty = $(".CQty_" +Idd).find('input').val();
         //H = qty * cartage_rate;
         Tolt = parseFloat(D) + parseFloat(E) +parseFloat(G) +parseFloat(H) + parseFloat(Ins) ;



         $("#total_SubTotal_Amount1_" + Idd).val('');
         $("#total_SubTotal_Amount1_" + Idd).val(Tolt.toFixed(2));
    }

    function F2_2(Idd,cartage_rate)
    {
        //debugger;
        //var E =0;var D=0; var G=0; var H=0; var Tolt=0;
        //E =  $(".Packingcharge_" +Idd).find('input').val();
        //D = $("#Ctotal_amount" +'_' +Idd).val();
        //var Ex_val = $(".ExciseDutyValue_" +Idd).find('input').val();
        //var sum = parseFloat(E)+parseFloat(D);
        //G=sum*Ex_val;   


        //var qty = $(".CQty_" +Idd).find('input').val();
        //H = qty * cartage_rate;
        //Tolt = parseFloat(D) + parseFloat(E) +parseFloat(G) +parseFloat(H);
        //$("#total_SubTotal_Amount1_" + Idd).val('');
        //$("#total_SubTotal_Amount1_" + Idd).val(Tolt.toFixed(2));
    }

    function BindInsurance()
    {
        $(document).on('change','.Insi-1-IsType', function(){

            var getIse_dyId = jQuery(this).data('insio');
            alert(getIse_dyId)

            var GetInsi_1_All= '@Url.Action("GetInsuranceAll", "IndentPurchaseOrders")';
     
            
            if($(this).val()!=-1)
            {
              
                $.ajax({
                    type: 'POST',
                    url: GetInsi_1_All, 

                    dataType: 'json',

                    data: { Type: $(this).val() },
                    success: function (obj2) {
                       
                        obj = $.parseJSON(obj2)
                      
                        BindInsiAll(obj,getIse_dyId);
                       
                    },
                    error: function (ex) {

                    }
                });
                return false;
            }else
            { var markup = "<option value='-1'>Select</option>";

             $("#Insurance_Type_1_" +getIse_dyId).html(markup).show();
            }



        });


        $(document).on('change','.Insi-2-IsType', function(){

            var getIse_dyId2 = jQuery(this).data('insio2');
          

            var GetInsi_2_All= '@Url.Action("GetInsuranceAll", "IndentPurchaseOrders")';
     
            
            if($(this).val()!=-1)
            {
              
                $.ajax({
                    type: 'POST',
                    url: GetInsi_2_All, 

                    dataType: 'json',

                    data: { Type: $(this).val() },
                    success: function (obj2) {
                       
                        obj = $.parseJSON(obj2)
                      
                        BindInsiAll2(obj,getIse_dyId2);
                       
                    },
                    error: function (ex) {

                    }
                });
                return false;
            }else
            { var markup = "<option value='-1'>Select</option>";

            $("#Insurance_Type_2_" +getIse_dyId2).html(markup).show();
            }



        });



        $(document).on('change','.Insi-3-IsType', function(){

            var getIse_dyId3 = jQuery(this).data('insio3');
          

            var GetInsi_3_All= '@Url.Action("GetInsuranceAll", "IndentPurchaseOrders")';
     
            
            if($(this).val()!=-1)
            {
              
                $.ajax({
                    type: 'POST',
                    url: GetInsi_3_All, 

                    dataType: 'json',

                    data: { Type: $(this).val() },
                    success: function (obj3) {
                       
                        obj = $.parseJSON(obj3)
                      
                        BindInsiAll3(obj,getIse_dyId3);
                       
                    },
                    error: function (ex) {

                    }
                });
                return false;
            }else
            { var markup = "<option value='-1'>Select</option>";

            $("#Insurance_Type_3_" +getIse_dyId3).html(markup).show();
            }



        });


        $(document).on('change','.Insi-4-IsType', function(){

            var getIse_dyId4 = jQuery(this).data('insio4');
          

            var GetInsi_4_All= '@Url.Action("GetInsuranceAll", "IndentPurchaseOrders")';
     
            
            if($(this).val()!=-1)
            {
              
                $.ajax({
                    type: 'POST',
                    url: GetInsi_4_All, 

                    dataType: 'json',

                    data: { Type: $(this).val() },
                    success: function (obj4) {
                       
                        obj = $.parseJSON(obj4)
                      
                        BindInsiAll4(obj,getIse_dyId4);
                       
                    },
                    error: function (ex) {

                    }
                });
                return false;
            }else
            { var markup = "<option value='-1'>Select</option>";

            $("#Insurance_Type_4_" +getIse_dyId4).html(markup).show();
            }



        });



    }

    function BindTax()
    {
        $(document).on('change','.tax-is-type', function(){

            var gettaxrowid = jQuery(this).data('istax');
          

            var Gettax= '@Url.Action("GetTaxAll", "IndentPurchaseOrders")';
     
            
            if($(this).val()!=-1)
            {
              
                $.ajax({
                    type: 'POST',
                    url: Gettax, 

                    dataType: 'json',

                    data: { Type: $(this).val() },
                    success: function (obj2) {
                       
                        obj = $.parseJSON(obj2)
                      
                        BindTax_All(obj,gettaxrowid);
                       
                    },
                    error: function (ex) {

                    }
                });
                return false;
            }else
            { var markup = "<option value='-1'>Select</option>";

            $("#ddl_tax" +gettaxrowid).html(markup).show();
            }



        });
    }


   function BindInsiAll(data,ins_id)
   { 
       var markup = "<option value='-1'>Select</option>";
       for (var x = 0; x < data.length; x++) {


           if (data[x].Value != null)
               markup += "<option value=" + data[x].Value + ">" + data[x].Text + "</option>";

       }
       $("#Insurance_Type_1_" +ins_id).html(markup).show();



    }

   function BindInsiAll2(data,ins_id)
   {
       var markup = "<option value='-1'>Select</option>";
       for (var x = 0; x < data.length; x++) {


           if (data[x].Value != null)
               markup += "<option value=" + data[x].Value + ">" + data[x].Text + "</option>";

       }
       $("#Insurance_Type_2_" +ins_id).html(markup).show();
   }

   function BindInsiAll3(data,ins_id)
   {
       var markup = "<option value='-1'>Select</option>";
       for (var x = 0; x < data.length; x++) {


           if (data[x].Value != null)
               markup += "<option value=" + data[x].Value + ">" + data[x].Text + "</option>";

       }
       $("#Insurance_Type_3_" +ins_id).html(markup).show();
   }

   function BindInsiAll4(data,ins_id)
   {
       var markup = "<option value='-1'>Select</option>";
       for (var x = 0; x < data.length; x++) {


           if (data[x].Value != null)
               markup += "<option value=" + data[x].Value + ">" + data[x].Text + "</option>";

       }
       $("#Insurance_Type_4_" +ins_id).html(markup).show();
   }


   function BindTax_All(data,tax_id)
   {
       var markup = "<option value='-1'>Select</option>";
       for (var x = 0; x < data.length; x++) {


           if (data[x].Value != null)
               markup += "<option value=" + data[x].Value + ">" + data[x].Text + "</option>";

       }
       $("#ddl_tax" +tax_id).html(markup).show();
   }

   function FindValueOfCarTageRateAndAmount()
   {
       $(document).on('change','.car2-type2', function(){
         
           var Cid =jQuery(this).data('cartage2');
        

           var checktxt = $(this).parent().prev().children().find(":selected").text();
           if(checktxt=='Yes')
           {
               
             
               if($(this).val() ==4)
               {
                  
                   $(".CartagerateValue2_" +Cid).find('input').prop('disabled',false);


                   var qty = $(".CQty_" +Cid).find('input').val();
                   var Cartagw_rate = $(".CartagerateValue2_" +Cid).find('input').val(); 
                    
                   if(qty !=null && Cartagw_rate !=null)
                   { C2();}

               }
               else if($(this).val() ==3)
               {
                 
                 
                   $(".CartagerateValue2_" +Cid).find('input').prop('disabled',true);

                   $(".caramt2_" +Cid).prop('disabled',false);

                 //  C2_lum2();

               }
                
               else if($(this).val() =="-1")
               {
                   $(".CartagerateValue2_" +Cid).find('input').val('');
                   $(".Cartageamt2_" +Cid).find('input').val('');
               }

           }
           else if(checktxt=='No')
           {
               
               $(".CartagerateValue2_" +Cid).find('input').prop('disabled',true);
               $(".caramt2_" +Cid).prop('disabled',true);
               
           }
       

       });
   }


   function SeconedLevelRowCal()
   {debugger;
       var Insurancer_rate2 = 0; NetamtOnInsurance2 = 0;   Tax1_rate= 0;  NetAmtOnTax1 = 0; Cartage_rate2=0; CartageAmt2=0; NetAmtOnCartage2=0;
       var SubTotal1Val=0; var SubTotal2=0; var GrandTotal = 0;  var Netamtoninsi4 = 0; var SubTotal3 = 0; var NetamtOnInsurance3=0; var NetamtOnInsurance4=0;

       // for insurance1

       $(document).on('change','.Insi-Type-1-L',function(){
           debugger;
           var amtprevinsi1 =0;
           var gid1 =jQuery(this).data('insi1w'); 
           var  Insurancer_rate1=$(this).val();


           if(Insurancer_rate1 =="-1")
           {
               Insurancer_rate1 = 0;
           }
           else{
               Insurancer_rate1=$(this).val();
           }





           if($('td.Exciseduty_'+gid1).find('#ExciseDutyType_'+gid1).find(':selected').val() =="-1" && $('td.CartageType_'+gid1).find('#CartageTypeddl_'+gid1).find(':selected').val() =="-1" )
           {
               amtprevinsi1 = $("#Ctotal_amount_" +gid1).val();
           }
           else{
               amtprevinsi1 = $("#total_SubTotal_Amount1_" +gid1).val();
           }

           if($('td.Exciseduty_'+gid1).find('#ExciseDutyType_'+gid1).find(':selected').val() =='' && $('td.CartageType_'+gid1).find('#CartageTypeddl_'+gid1).find(':selected').val() =='')
           {
               amtprevinsi1 = $("#Ctotal_amount_" +gid1).val();
           }
           else{
               amtprevinsi1 = $("#total_SubTotal_Amount1_" +gid1).val();
           }






           //if($('td.InsuranceTypeSel1_'+gid1).find('#Insurance_Type_1_'+gid1).find(':selected').val() =="-1")
           //{
           //    amtprevinsi1= $("#Ctotal_amount_" +gid1).val();
           //}
           //if($('td.InsuranceTypeSel1_'+gid1).find('#Insurance_Type_1_'+gid1).find(':selected').val() =='')
           //{
           //    amtprevinsi1= $("#Ctotal_amount_" +gid1).val();
           //}
           //else
           //{
           //    amtprevinsi1= $("#Ctotal_amount_" +gid1).val();
           //}
           var netamtoninsi1 = parseFloat((Insurancer_rate1/100) * amtprevinsi1);
           $("#InsuranceAmtUptoValue1_" + gid1).val(netamtoninsi1.toFixed(2));  

       
       });



       // for insurance2
       $(document).on('change','.Insi-Type-2-L', function(){   
           var subt=0;
           var gid =jQuery(this).data('insi2w'); 
           Insurancer_rate2=$(this).val();
           if(Insurancer_rate2 =="-1") {Insurancer_rate2=0;} else {Insurancer_rate2=$(this).val();}
           if($('td.Exciseduty_'+gid).find('#ExciseDutyType_'+gid).find(':selected').val() =="-1" && $('td.CartageType_'+gid).find('#CartageTypeddl_'+gid).find(':selected').val() =="-1" )
           {
               SubTotal1Val = $("#Ctotal_amount_" +gid).val();
           }
           else{
               SubTotal1Val = $("#total_SubTotal_Amount1_" +gid).val();
           }

           if($('td.Exciseduty_'+gid).find('#ExciseDutyType_'+gid).find(':selected').val() =='' && $('td.CartageType_'+gid).find('#CartageTypeddl_'+gid).find(':selected').val() =='')
           {
               SubTotal1Val = $("#Ctotal_amount_" +gid).val();
           }
           else{
               SubTotal1Val = $("#total_SubTotal_Amount1_" +gid).val();
           }
           
           NetamtOnInsurance2= parseFloat((Insurancer_rate2/100) * SubTotal1Val);
           subt = parseFloat(NetamtOnInsurance2) + parseFloat(SubTotal1Val);
         
           $("#total_SubTotal_Amount2_" + gid).val(subt.toFixed(2));  
           $("#InsuranceAmtUptoValue2_" + gid).val(NetamtOnInsurance2.toFixed(2));  

          // GetGrand(gid);
       });

       //for tax
       $(document).on('change','.tax-ddl-bind', function(){ debugger;
           var I=0; var sum2t=0;
           var gid_tax =jQuery(this).data('mytaxv'); debugger;
           Tax1_rate=$(this).val();
           if(Tax1_rate =="-1") {Tax1_rate=0;} else { Tax1_rate=$(this).val();}


           //if($('td.Exciseduty_'+gid_tax).find('#ExciseDutyType_'+gid_tax).find(':selected').val() =="-1" && $('td.CartageType_'+gid_tax).find('#CartageTypeddl_'+gid_tax).find(':selected').val() =="-1" )
           //{
           //    //if($('td.InsuranceTypeSel2_'+gid_tax).find('#Insurance_Type_2_'+gid_tax).find(':selected').val() =="-1")
           //    //{
           //    //    I= $("#Ctotal_amount_" +gid_tax).val();
           //    //}
           //    //if($('td.InsuranceTypeSel2_'+gid_tax).find('#Insurance_Type_2_'+gid_tax).find(':selected').val() =='')
           //    //{
           //    //    I= $("#Ctotal_amount_" +gid_tax).val();
           //    //}
           //    I= $("#Ctotal_amount_" +gid_tax).val();
           //}
           //else
           //{
           //    I= $("#total_SubTotal_Amount1_" +gid_tax).val();
           //}

           //if($('td.Exciseduty_'+gid_tax).find('#ExciseDutyType_'+gid_tax).find(':selected').val() =='' && $('td.CartageType_'+gid_tax).find('#CartageTypeddl_'+gid_tax).find(':selected').val() =='')
           //{
           ////    if($('td.InsuranceTypeSel2_'+gid_tax).find('#Insurance_Type_2_'+gid_tax).find(':selected').val() =="-1")
           ////    {
           ////        I= $("#Ctotal_amount_" +gid_tax).val();
           ////    }
           ////    if($('td.InsuranceTypeSel2_'+gid_tax).find('#Insurance_Type_2_'+gid_tax).find(':selected').val() =='')
           ////    {
           ////        I= $("#Ctotal_amount_" +gid_tax).val();
           //    //    }
           //    I= $("#Ctotal_amount_" +gid_tax).val();
           //}
           //else
           //{
           //    I= $("#total_SubTotal_Amount1_" +gid_tax).val();
           //}

           I= $("#total_SubTotal_Amount1_" +gid_tax).val();
       

           
           var sm = parseFloat(NetamtOnInsurance2) + parseFloat(I);
           NetAmtOnTax1 = parseFloat(sm*(Tax1_rate/100));

           sum2t =  parseFloat(NetAmtOnTax1) + parseFloat(I) + parseFloat(NetamtOnInsurance2);

           $("#total_SubTotal_Amount2_" + gid_tax).val(sum2t.toFixed(2));  
           $("#txtamtvalupto_" + gid_tax).val(NetAmtOnTax1.toFixed(2)); 
          // GetGrand(gid_tax);
       });



       // for insurance 3 
       $(document).on('change','.Insi-Type-3-L', function(){   debugger; 
           var subt3=0;
           var gid3 =jQuery(this).data('insi3w'); 
           Insurancer_rate3=$(this).val();
           if(Insurancer_rate3 =="-1") { Insurancer_rate3 = 0; } else {Insurancer_rate3=$(this).val();}

           if($('td.Tax_'+gid3).find('#ddl_'+gid3).find(':selected').val() =="-1" || $('td.Tax_'+gid3).find('#ddl_'+gid3).find(':selected').val() =='' ||
               $('td.Tax_'+gid3).find('#ddl_'+gid3).find(':selected').text() == "Select" ||  $('td.Tax_'+gid3).find('#ddl_'+gid3).find(':selected').text() == "")
           {
               SubTotal3 = $("#total_SubTotal_Amount1_" +gid3).val();
           }
           else{
               SubTotal3 = $("#total_SubTotal_Amount3" +gid3).val();
           }

           
           
           NetamtOnInsurance3= parseFloat((Insurancer_rate3/100) * SubTotal3);
           subt3 = parseFloat(NetamtOnInsurance3) + parseFloat(SubTotal3);
         
           $("#total_SubTotal_Amount2_" + gid3).val(subt3.toFixed(2));  
           $("#InsuranceAmtUptoValue3_" + gid3).val(NetamtOnInsurance3.toFixed(2));  

           // GetGrand(gid);
       });



       //cartage 2
       $(document).on('keyup', '.cartage2-Inputrate', function () { debugger;
           // var ntsub_tot=0; nt_ins_amt=0;nt_tax_amt=0;NetAmtOnCartage2=0;
           var Sum2=0; am1 =0;
           var d = jQuery(this).data('itvaltwo');
           NetAmtOnCartage2 = $("#CartageAmount2_" +d).val();  

           if($('td.Exciseduty_'+d).find('#ExciseDutyType_'+d).find(':selected').val() =="-1" && $('td.CartageType_'+d).find('#CartageTypeddl_'+d).find(':selected').val() =="-1" )
           {
               if($('td.InsuranceTypeSel1_'+d).find('#Insurance_Type_1_'+d).find(':selected').val() =="-1" || $('td.Tax_'+d).find('#ddl_tax'+d).find(':selected').val() =="-1" )
               {
                   am1= $("#Ctotal_amount_" +d).val();
               }
               if($('td.InsuranceTypeSel1_'+d).find('#Insurance_Type_1_'+d).find(':selected').val() =='' || $('td.Tax_'+d).find('#ddl_tax'+d).find(':selected').val() =='')
               {
                   am1= $("#Ctotal_amount_" +d).val();
               }
           }
           else
           {
               am1= $("#total_SubTotal_Amount1_" +d).val();
           }

           if($('td.Exciseduty_'+d).find('#ExciseDutyType_'+d).find(':selected').val() =='' && $('td.CartageType_'+d).find('#CartageTypeddl_'+d).find(':selected').val() =='')
           {
               if($('td.InsuranceTypeSel1_'+d).find('#Insurance_Type_1_'+d).find(':selected').val() =="-1" || $('td.Tax_'+d).find('#ddl_tax'+d).find(':selected').val() =="-1")
               {
                   am1= $("#Ctotal_amount_" +d).val();
               }
               if($('td.InsuranceTypeSel1_'+d).find('#Insurance_Type_1_'+d).find(':selected').val() =='' || $('td.Tax_'+d).find('#ddl_tax'+d).find(':selected').val() =='')
               {
                   am1= $("#Ctotal_amount_" +d).val();
               }
           }
           else
           {
               am1= $("#total_SubTotal_Amount1_" +d).val();
           }

           if($('td.Tax_'+d).find('#ddl_tax'+d).find(':selected').val() =="-1" || $('td.Tax_'+d).find('#ddl_tax'+d).find(':selected').val() =='' ||
              $('td.Tax_'+d).find('#ddl_tax'+d).find(':selected').text() == "Select" ||  $('td.Tax_'+d).find('#ddl_tax'+d).find(':selected').text() == "")
           {
               am1= $("#total_SubTotal_Amount1_" +d).val();
           }
           else
           {
               am1= $("#total_SubTotal_Amount2_" +d).val();
           }




           //NetAmtOnCartage2 = parseFloat(SubTotal1Val) + parseFloat(NetamtOnInsurance1) + parseFloat(NetAmtOnTax1) + parseFloat(NetAmtOnCartage2)
          // NetAmtOnCartage2 = parseFloat(am1) + parseFloat(NetamtOnInsurance1) + parseFloat(NetAmtOnTax1) + parseFloat(NetAmtOnCartage2)
           NetAmtOnCartage2 = parseFloat(am1) + parseFloat(NetAmtOnCartage2) + parseFloat(NetamtOnInsurance3)

           $("#total_SubTotal_Amount2_" + d).val(NetAmtOnCartage2.toFixed(2));  
           // Net Subtotal1
        //   var ntsub_tot = $("#total_SubTotal_Amount1_" +d).val();
        //   //Calculated net insurance amt1 
          // var nt_ins_amt = $("#total_SubTotal_Amount2_" +d).val();
           // Calculated Net Tax amount 
        //   var nt_tax_amt = $("#total_SubTotal_Amount2_" +d).val();

           //GetGrand(d);
       
       });



      





       // for insurance2

       $(document).on('change','.Insi-Type-4-L', function(){ debugger;
         
           var insi_4_id =jQuery(this).data('insi4w'); 
           Insurancer_rate4=$(this).val();
           if(Insurancer_rate4 =="-1") {Insurancer_rate4=0;} else {Insurancer_rate4=$(this).val();}
           var tosum4=0; PrevSumupto4 =0;
           debugger;

           if($('td.Exciseduty_'+insi_4_id).find('#ExciseDutyType_'+insi_4_id).find(':selected').val() =="-1" || $('td.Exciseduty_'+insi_4_id).find('#ExciseDutyType_'+insi_4_id).find(':selected').val() =='' )
           {
               PrevSumupto4= $("#Ctotal_amount_" +insi_4_id).val();
           }
           else
           {
               PrevSumupto4= $("#total_SubTotal_Amount1_" +insi_4_id).val();
           }



           if($('td.Tax_'+insi_4_id).find('#ddl_'+insi_4_id).find(':selected').val() =="-1" || $('td.Tax_'+insi_4_id).find('#ddl_'+insi_4_id).find(':selected').val() =='' ||
             $('td.Tax_'+insi_4_id).find('#ddl_'+insi_4_id).find(':selected').text() == "Select" ||  $('td.Tax_'+insi_4_id).find('#ddl_'+insi_4_id).find(':selected').text() == "")
           {
               PrevSumupto4= $("#total_SubTotal_Amount1_" +insi_4_id).val();
           }
           else
           {
               PrevSumupto4= $("#total_SubTotal_Amount2_" +insi_4_id).val();
           }

           if($('td.CartageType2_'+insi_4_id).find('#CartageTypeddl2_'+insi_4_id).find(':selected').val() !="-1" || $('td.CartageType2_'+insi_4_id).find('#CartageTypeddl2_'+insi_4_id).find(':selected').val() !="" ||
                $('td.CartageType2_'+insi_4_id).find('#CartageTypeddl2_'+insi_4_id).find(':selected').text() !="Select")
           {
               PrevSumupto4= $("#total_SubTotal_Amount2_" +insi_4_id).val();
           }




           //if($('td.Exciseduty_'+insi_4_id).find('#ExciseDutyType_'+insi_4_id).find(':selected').val() =="-1" && $('td.CartageType_'+insi_4_id).find('#CartageTypeddl_'+insi_4_id).find(':selected').val() =="-1" )
           //{
           //    if($('td.InsuranceTypeSel1_'+insi_2_id).find('#Insurance_Type_1_'+insi_2_id).find(':selected').val() =="-1" && $('td.Tax_'+insi_2_id).find('#ddl_tax'+insi_2_id).find(':selected').val() =="-1" && $('td.CartageType2_'+insi_2_id).find('#CartageTypeddl2_'+insi_2_id).find(':selected').val() =="-1" )
           //    {
           //        PrevSum= $("#Ctotal_amount_" +insi_2_id).val();
           //    }
           //    else
           //    {
           //        PrevSum= $("#total_SubTotal_Amount2_" +insi_2_id).val();
           //    }
           //    if($('td.InsuranceTypeSel1_'+insi_2_id).find('#Insurance_Type_1_'+insi_2_id).find(':selected').val() =='' && $('td.Tax_'+insi_2_id).find('#ddl_tax'+insi_2_id).find(':selected').val() =='' && $('td.CartageType2_'+insi_2_id).find('#CartageTypeddl2_'+insi_2_id).find(':selected').val() =='')
           //    {
           //        PrevSum= $("#Ctotal_amount_" +insi_2_id).val();
           //    }
           //    else
           //    {
           //        PrevSum= $("#total_SubTotal_Amount2_" +insi_2_id).val();
           //    }
           //}
           //else if(($('td.Exciseduty_'+insi_2_id).find('#ExciseDutyType_'+insi_2_id).find(':selected').val() !="-1" || $('td.CartageType_'+insi_2_id).find('#CartageTypeddl_'+insi_2_id).find(':selected').val() !="-1"  ))
           //{ 
           //    if(($('td.Exciseduty_'+insi_2_id).find('#ExciseDutyType_'+insi_2_id).find(':selected').val() != '' || $('td.CartageType_'+insi_2_id).find('#CartageTypeddl_'+insi_2_id).find(':selected').val() !='' ))
           //    {
               

           //        if($('td.InsuranceTypeSel1_'+insi_2_id).find('#Insurance_Type_1_'+insi_2_id).find(':selected').val() =="-1" && $('td.Tax_'+insi_2_id).find('#ddl_tax'+insi_2_id).find(':selected').val() =="-1" && $('td.CartageType2_'+insi_2_id).find('#CartageTypeddl2_'+insi_2_id).find(':selected').val() =="-1")
           //    {
           //        PrevSum= $("#total_SubTotal_Amount1_" +insi_2_id).val();
           //    }
           //    else
           //    {
           //        PrevSum= $("#total_SubTotal_Amount2_" +insi_2_id).val();
           //    }
           //    if($('td.InsuranceTypeSel1_'+insi_2_id).find('#Insurance_Type_1_'+insi_2_id).find(':selected').val() =='' &&  $('td.Tax_'+insi_2_id).find('#ddl_tax'+insi_2_id).find(':selected').val() =='' &&  $('td.CartageType2_'+insi_2_id).find('#CartageTypeddl2_'+insi_2_id).find(':selected').val() =='')
           //    {
           //        PrevSum= $("#total_SubTotal_Amount1_" +insi_2_id).val();
           //    }
           //    else
           //    {
           //        PrevSum= $("#total_SubTotal_Amount2_" +insi_2_id).val();
           //    }

           //    }

           //}

           //if($('td.Exciseduty_'+insi_2_id).find('#ExciseDutyType_'+insi_2_id).find(':selected').val() =='' && $('td.CartageType_'+insi_2_id).find('#CartageTypeddl_'+insi_2_id).find(':selected').val() =='')
           //{
           //    if($('td.InsuranceTypeSel1_'+insi_2_id).find('#Insurance_Type_1_'+insi_2_id).find(':selected').val() =="-1" && $('td.Tax_'+insi_2_id).find('#ddl_tax'+insi_2_id).find(':selected').val() =="-1" && $('td.CartageType2_'+insi_2_id).find('#CartageTypeddl2_'+insi_2_id).find(':selected').val() =="-1")
           //    {
           //        PrevSum= $("#Ctotal_amount_" +insi_2_id).val();
           //    }
           //    else
           //    {
           //        if($('td.InsuranceTypeSel1_'+insi_2_id).find('#Insurance_Type_1_'+insi_2_id).find(':selected').val() !='' && $('td.Tax_'+insi_2_id).find('#ddl_tax'+insi_2_id).find(':selected').val() !='' && $('td.CartageType2_'+insi_2_id).find('#CartageTypeddl2_'+insi_2_id).find(':selected').val() !='')
           //        {
           //            PrevSum= $("#total_SubTotal_Amount2_" +insi_2_id).val();
           //        }


                  
           //    }
           //    if($('td.InsuranceTypeSel1_'+insi_2_id).find('#Insurance_Type_1_'+insi_2_id).find(':selected').val() =='' &&  $('td.Tax_'+insi_2_id).find('#ddl_tax'+insi_2_id).find(':selected').val() =='' &&  $('td.CartageType2_'+insi_2_id).find('#CartageTypeddl2_'+insi_2_id).find(':selected').val() =='')
           //    {
           //        PrevSum= $("#Ctotal_amount_" +insi_2_id).val();
           //    }
           //    else
           //    {
           //        PrevSum= $("#total_SubTotal_Amount2_" +insi_2_id).val();
           //    }
           //}
           //else
           //{

           //    if($('td.InsuranceTypeSel1_'+insi_2_id).find('#Insurance_Type_1_'+insi_2_id).find(':selected').val() =="-1" && $('td.Tax_'+insi_2_id).find('#ddl_tax'+insi_2_id).find(':selected').val() =="-1" &&  $('td.CartageType2_'+insi_2_id).find('#CartageTypeddl2_'+insi_2_id).find(':selected').val() =="-1")
           //    {
           //        PrevSum= $("#total_SubTotal_Amount1_" +insi_2_id).val();
           //    }
           //    else
           //    {
           //        PrevSum= $("#total_SubTotal_Amount2_" +insi_2_id).val();
           //    }
           //    if($('td.InsuranceTypeSel1_'+insi_2_id).find('#Insurance_Type_1_'+insi_2_id).find(':selected').val() =='' &&  $('td.Tax_'+insi_2_id).find('#ddl_tax'+insi_2_id).find(':selected').val() =='' &&  $('td.CartageType2_'+insi_2_id).find('#CartageTypeddl2_'+insi_2_id).find(':selected').val() =='')
           //    {
           //        PrevSum= $("#total_SubTotal_Amount1_" +insi_2_id).val();
           //    }
           //    else
           //    {
           //        PrevSum= $("#total_SubTotal_Amount2_" +insi_2_id).val();
           //    }

           //}










         //  Netamtoninsi2 = parseFloat(NetAmtOnCartage2 * (Insurancer_rate2/100));

           Netamtoninsi4 = parseFloat(PrevSumupto4 * (Insurancer_rate4/100));

           GrandTotal = parseFloat(PrevSumupto4) + parseFloat(Netamtoninsi4);
          // tosum = parseFloat(PrevSum) + parseFloat(Netamtoninsi2);
           $("#total_SubTotal_Amount2_" + insi_4_id).val(GrandTotal.toFixed(2)); 
           $("#Insurancerate4amtUptoVal_" + insi_4_id).val(Netamtoninsi4.toFixed(2)); 

          // GetGrand(insi_2_id);
       });

       //function GetGrand(Incrm_Id)
       //{
       //    GrandTotal = parseFloat(NetAmtOnCartage2) + parseFloat(Netamtoninsi2);

       //    $("#total_GrandTotal_Amount_" + Incrm_Id).val(GrandTotal.toFixed(2)); 
       //}

      


   }

   function EnableOrDisableOfCartageAndInsurance ()
   {
       $(document).on('change','.carstat-usge', function(){
           var find_id = jQuery(this).data('redcartge');
           var isVal = $(this).val();
           if(isVal !="-1")
           {
               $('td.CartageType2_'+find_id).find('#CartageTypeddl2_'+find_id).prop('disabled',true);
               $('td.IsCartageType2_'+find_id).find('#IsCar_tageddl2_'+find_id).prop('disabled',true);
               $('td.Cartageamt2_'+find_id).find('#CartageAmount2_'+find_id).prop('disabled',true);
               $('td.CartagerateValue2_'+find_id).find('#CartageRate2_'+find_id).prop('disabled',true);
           $('td.Cartageamt2_'+find_id).find('#CartageAmount2_'+find_id).val(0);
           }
           else
           {
               $('td.CartageType2_'+find_id).find('#CartageTypeddl2_'+find_id).prop('disabled',false);
               $('td.IsCartageType2_'+find_id).find('#IsCar_tageddl2_'+find_id).prop('disabled',false);
               $('td.Cartageamt2_'+find_id).find('#CartageAmount2_'+find_id).prop('disabled',false);
               $('td.CartagerateValue2_'+find_id).find('#CartageRate2_'+find_id).prop('disabled',false);
              $('td.Cartageamt2_'+find_id).find('#CartageAmount2_'+find_id).val('');
           }

       });


       $(document).on('change','.carstat-usge2', function(){
           var find_id = jQuery(this).data('redcartgetwo');
           var isVal = $(this).val();
           if(isVal !="-1")
           {
               $('td.CartageType_'+find_id).find('#CartageTypeddl_'+find_id).prop('disabled',true);
               $('td.IsCartageType_'+find_id).find('#IsCar_tageddl_'+find_id).prop('disabled',true);
             //  $('td.Cartageamt_'+find_id).find('#caramt_'+find_id).prop('disabled',true);
               $('td.Cartageamt_'+find_id).find('input').prop('disabled',true);
               $('td.CartagerateValue_'+find_id).find('#CartageRate1_'+find_id).prop('disabled',true);
               $('td.Cartageamt_'+find_id).find('input').val(0);
           }
           else
           {
               $('td.CartageType_'+find_id).find('#CartageTypeddl_'+find_id).prop('disabled',false);
               $('td.IsCartageType_'+find_id).find('#IsCar_tageddl_'+find_id).prop('disabled',false);
               $('td.Cartageamt_'+find_id).find('input').prop('disabled',false);
               $('td.CartagerateValue_'+find_id).find('#CartageRate1_'+find_id).prop('disabled',false);
               $('td.Cartageamt_'+find_id).find('input').val('');
           }

       });

       $(document).on('change','.Insi-1-IsType', function(){
           var find_id = jQuery(this).data('insio');
           var isVal = $(this).val();
           if(isVal !="-1")
           {
               // for insi 2 disable
               $('td.Insurance2_'+find_id).find('#Insuranceddl2_'+find_id).prop('disabled',true);
               $('td.InsuranceTypeSel2_'+find_id).find('#Insurance_Type_2_'+find_id).prop('disabled',true);
               $('td.InsuranceValue2_'+find_id).find('#Insurancerate2_'+find_id).prop('disabled',true);
               $('td.InsuranceAmtUpto2_'+find_id).find('#InsuranceAmtUptoValue2_'+find_id).prop('disabled',true);

               // for insi 3 disable
               $('td.Insurance3_'+find_id).find('#Insuranceddl3_'+find_id).prop('disabled',true);
               $('td.InsuranceTypeSel3_'+find_id).find('#Insurance_Type_3_'+find_id).prop('disabled',true);
               $('td.InsuranceValue3_'+find_id).find('#Insurancerate3_'+find_id).prop('disabled',true);
               $('td.InsuranceAmtUpto3_'+find_id).find('#InsuranceAmtUptoValue3_'+find_id).prop('disabled',true);

               // for isni 4 disable
               $('td.Insurance4_'+find_id).find('#Insuranceddl4_'+find_id).prop('disabled',true);
               $('td.InsuranceSelect4_'+find_id).find('#Insurance_Type_4_'+find_id).prop('disabled',true);
               $('td.InsuranceTypeSel4_'+find_id).find('#Insurancerate4_'+find_id).prop('disabled',true);
               $('td.InsuranceAmtUptoTypeSel4_'+find_id).find('#Insurancerate4amtUptoVal_'+find_id).prop('disabled',true);






               $('td.InsuranceAmtUpto2_'+find_id).find('#InsuranceAmtUptoValue2_'+find_id).val(0);
               $('td.InsuranceAmtUpto3_'+find_id).find('#InsuranceAmtUptoValue3_'+find_id).val(0);
               $('td.InsuranceAmtUptoTypeSel4_'+find_id).find('#Insurancerate4amtUptoVal_'+find_id).val(0);
           }
           else{
           
               // for insi 2 disable
               $('td.Insurance2_'+find_id).find('#Insuranceddl2_'+find_id).prop('disabled',false);
               $('td.InsuranceTypeSel2_'+find_id).find('#Insurance_Type_2_'+find_id).prop('disabled',false);
               $('td.InsuranceValue2_'+find_id).find('#Insurancerate2_'+find_id).prop('disabled',false);
               $('td.InsuranceAmtUpto2_'+find_id).find('#InsuranceAmtUptoValue2_'+find_id).prop('disabled',false);

               // for insi 3 disable
               $('td.Insurance3_'+find_id).find('#Insuranceddl3_'+find_id).prop('disabled',false);
               $('td.InsuranceTypeSel3_'+find_id).find('#Insurance_Type_3_'+find_id).prop('disabled',false);
               $('td.InsuranceValue3_'+find_id).find('#Insurancerate3_'+find_id).prop('disabled',false);
               $('td.InsuranceAmtUpto3_'+find_id).find('#InsuranceAmtUptoValue3_'+find_id).prop('disabled',false);

               // for isni 4 disable
               $('td.Insurance4_'+find_id).find('#Insuranceddl4_'+find_id).prop('disabled',false);
               $('td.InsuranceSelect4_'+find_id).find('#Insurance_Type_4_'+find_id).prop('disabled',false);
               $('td.InsuranceTypeSel4_'+find_id).find('#Insurancerate4_'+find_id).prop('disabled',false);
               $('td.InsuranceAmtUptoTypeSel4_'+find_id).find('#Insurancerate4amtUptoVal_'+find_id).prop('disabled',false);






               $('td.InsuranceAmtUpto2_'+find_id).find('#InsuranceAmtUptoValue2_'+find_id).val('');
               $('td.InsuranceAmtUpto3_'+find_id).find('#InsuranceAmtUptoValue3_'+find_id).val('');
               $('td.InsuranceAmtUptoTypeSel4_'+find_id).find('#Insurancerate4amtUptoVal_'+find_id).val('');
           
           }
            

       });

       $(document).on('change','.Insi-2-IsType', function(){
           var find_id = jQuery(this).data('insio2');
           var isVal = $(this).val();
           if(isVal !="-1")
           {
               $('td.InsuranceTypeSel1_'+find_id).find('#Insurance_Type_1_'+find_id).prop('disabled',true);
               $('td.Insurance1_'+find_id).find('#Insuranceddl1_'+find_id).prop('disabled',true);
               $('td.InsuranceValue1_'+find_id).find('#Insurancerate1_'+find_id).prop('disabled',true);
               $('td.InsuranceAmtUpto1_'+find_id).find('#InsuranceAmtUptoValue1_'+find_id).prop('disabled',true);

               // for insi 3 disable
               $('td.Insurance3_'+find_id).find('#Insuranceddl3_'+find_id).prop('disabled',true);
               $('td.InsuranceTypeSel3_'+find_id).find('#Insurance_Type_3_'+find_id).prop('disabled',true);
               $('td.InsuranceValue3_'+find_id).find('#Insurancerate3_'+find_id).prop('disabled',true);
               $('td.InsuranceAmtUpto3_'+find_id).find('#InsuranceAmtUptoValue3_'+find_id).prop('disabled',true);

               // for isni 4 disable
               $('td.Insurance4_'+find_id).find('#Insuranceddl4_'+find_id).prop('disabled',true);
               $('td.InsuranceSelect4_'+find_id).find('#Insurance_Type_4_'+find_id).prop('disabled',true);
               $('td.InsuranceTypeSel4_'+find_id).find('#Insurancerate4_'+find_id).prop('disabled',true);
               $('td.InsuranceAmtUptoTypeSel4_'+find_id).find('#Insurancerate4amtUptoVal_'+find_id).prop('disabled',true);


               $('td.InsuranceAmtUpto1_'+find_id).find('#InsuranceAmtUptoValue1_'+find_id).val(0);
               $('td.InsuranceAmtUpto3_'+find_id).find('#InsuranceAmtUptoValue3_'+find_id).val(0);
               $('td.InsuranceAmtUptoTypeSel4_'+find_id).find('#Insurancerate4amtUptoVal_'+find_id).val(0);
           }else
           {
               $('td.InsuranceTypeSel1_'+find_id).find('#Insurance_Type_1_'+find_id).prop('disabled',false);
               $('td.Insurance1_'+find_id).find('#Insuranceddl1_'+find_id).prop('disabled',false);
               $('td.InsuranceValue1_'+find_id).find('#Insurancerate1_'+find_id).prop('disabled',false);
               $('td.InsuranceAmtUpto1_'+find_id).find('#InsuranceAmtUptoValue1_'+find_id).prop('disabled',false);

               // for insi 3 disable
               $('td.Insurance3_'+find_id).find('#Insuranceddl3_'+find_id).prop('disabled',false);
               $('td.InsuranceTypeSel3_'+find_id).find('#Insurance_Type_3_'+find_id).prop('disabled',false);
               $('td.InsuranceValue3_'+find_id).find('#Insurancerate3_'+find_id).prop('disabled',false);
               $('td.InsuranceAmtUpto3_'+find_id).find('#InsuranceAmtUptoValue3_'+find_id).prop('disabled',false);

               // for isni 4 disable
               $('td.Insurance4_'+find_id).find('#Insuranceddl4_'+find_id).prop('disabled',false);
               $('td.InsuranceSelect4_'+find_id).find('#Insurance_Type_4_'+find_id).prop('disabled',false);
               $('td.InsuranceTypeSel4_'+find_id).find('#Insurancerate4_'+find_id).prop('disabled',false);
               $('td.InsuranceAmtUptoTypeSel4_'+find_id).find('#Insurancerate4amtUptoVal_'+find_id).prop('disabled',false);





               $('td.InsuranceAmtUpto1_'+find_id).find('#InsuranceAmtUptoValue1_'+find_id).val('');
               $('td.InsuranceAmtUpto3_'+find_id).find('#InsuranceAmtUptoValue3_'+find_id).val('');
               $('td.InsuranceAmtUptoTypeSel4_'+find_id).find('#Insurancerate4amtUptoVal_'+find_id).val('');
           }

        

       });


       $(document).on('change','.Insi-3-IsType', function(){
           var find_id = jQuery(this).data('insio3');
           var isVal = $(this).val();
           if(isVal !="-1")
           {
               $('td.InsuranceTypeSel1_'+find_id).find('#Insurance_Type_1_'+find_id).prop('disabled',true);
               $('td.Insurance1_'+find_id).find('#Insuranceddl1_'+find_id).prop('disabled',true);
               $('td.InsuranceValue1_'+find_id).find('#Insurancerate1_'+find_id).prop('disabled',true);
               $('td.InsuranceAmtUpto1_'+find_id).find('#InsuranceAmtUptoValue1_'+find_id).prop('disabled',true);

               // for insi 2 disable
               $('td.Insurance2_'+find_id).find('#Insuranceddl2_'+find_id).prop('disabled',true);
               $('td.InsuranceTypeSel2_'+find_id).find('#Insurance_Type_2_'+find_id).prop('disabled',true);
               $('td.InsuranceValue2_'+find_id).find('#Insurancerate2_'+find_id).prop('disabled',true);
               $('td.InsuranceAmtUpto2_'+find_id).find('#InsuranceAmtUptoValue2_'+find_id).prop('disabled',true);
             

               // for isni 4 disable
               $('td.Insurance4_'+find_id).find('#Insuranceddl4_'+find_id).prop('disabled',true);
               $('td.InsuranceSelect4_'+find_id).find('#Insurance_Type_4_'+find_id).prop('disabled',true);
               $('td.InsuranceTypeSel4_'+find_id).find('#Insurancerate4_'+find_id).prop('disabled',true);
               $('td.InsuranceAmtUptoTypeSel4_'+find_id).find('#Insurancerate4amtUptoVal_'+find_id).prop('disabled',true);


               $('td.InsuranceAmtUpto1_'+find_id).find('#InsuranceAmtUptoValue1_'+find_id).val(0);
               $('td.InsuranceAmtUpto2_'+find_id).find('#InsuranceAmtUptoValue2_'+find_id).val(0);
               $('td.InsuranceAmtUptoTypeSel4_'+find_id).find('#Insurancerate4amtUptoVal_'+find_id).val(0);
           }else
           {
               $('td.InsuranceTypeSel1_'+find_id).find('#Insurance_Type_1_'+find_id).prop('disabled',false);
               $('td.Insurance1_'+find_id).find('#Insuranceddl1_'+find_id).prop('disabled',false);
               $('td.InsuranceValue1_'+find_id).find('#Insurancerate1_'+find_id).prop('disabled',false);
               $('td.InsuranceAmtUpto1_'+find_id).find('#InsuranceAmtUptoValue1_'+find_id).prop('disabled',false);
               // for insi 2 disable
               $('td.Insurance2_'+find_id).find('#Insuranceddl2_'+find_id).prop('disabled',false);
               $('td.InsuranceTypeSel2_'+find_id).find('#Insurance_Type_2_'+find_id).prop('disabled',false);
               $('td.InsuranceValue2_'+find_id).find('#Insurancerate2_'+find_id).prop('disabled',false);
               $('td.InsuranceAmtUpto2_'+find_id).find('#InsuranceAmtUptoValue2_'+find_id).prop('disabled',false);
           

               // for isni 4 disable
               $('td.Insurance4_'+find_id).find('#Insuranceddl4_'+find_id).prop('disabled',false);
               $('td.InsuranceSelect4_'+find_id).find('#Insurance_Type_4_'+find_id).prop('disabled',false);
               $('td.InsuranceTypeSel4_'+find_id).find('#Insurancerate4_'+find_id).prop('disabled',false);
               $('td.InsuranceAmtUptoTypeSel4_'+find_id).find('#Insurancerate4amtUptoVal_'+find_id).prop('disabled',false);





               $('td.InsuranceAmtUpto1_'+find_id).find('#InsuranceAmtUptoValue1_'+find_id).val('');
               $('td.InsuranceAmtUpto2_'+find_id).find('#InsuranceAmtUptoValue2_'+find_id).val('');
               $('td.InsuranceAmtUptoTypeSel4_'+find_id).find('#Insurancerate4amtUptoVal_'+find_id).val('');
           }


       });


       $(document).on('change','.Insi-4-IsType', function(){
           var find_id = jQuery(this).data('insio4');
           var isVal = $(this).val();
           if(isVal !="-1")
           {
               $('td.InsuranceTypeSel1_'+find_id).find('#Insurance_Type_1_'+find_id).prop('disabled',true);
               $('td.Insurance1_'+find_id).find('#Insuranceddl1_'+find_id).prop('disabled',true);
               $('td.InsuranceValue1_'+find_id).find('#Insurancerate1_'+find_id).prop('disabled',true);
               $('td.InsuranceAmtUpto1_'+find_id).find('#InsuranceAmtUptoValue1_'+find_id).prop('disabled',true);

               // for insi 2 disable
               $('td.Insurance2_'+find_id).find('#Insuranceddl2_'+find_id).prop('disabled',true);
               $('td.InsuranceTypeSel2_'+find_id).find('#Insurance_Type_2_'+find_id).prop('disabled',true);
               $('td.InsuranceValue2_'+find_id).find('#Insurancerate2_'+find_id).prop('disabled',true);
               $('td.InsuranceAmtUpto2_'+find_id).find('#InsuranceAmtUptoValue2_'+find_id).prop('disabled',true);
             

               // for insi 3 disable
               $('td.Insurance3_'+find_id).find('#Insuranceddl3_'+find_id).prop('disabled',true);
               $('td.InsuranceTypeSel3_'+find_id).find('#Insurance_Type_3_'+find_id).prop('disabled',true);
               $('td.InsuranceValue3_'+find_id).find('#Insurancerate3_'+find_id).prop('disabled',true);
               $('td.InsuranceAmtUpto3_'+find_id).find('#InsuranceAmtUptoValue3_'+find_id).prop('disabled',true);


               $('td.InsuranceAmtUpto1_'+find_id).find('#InsuranceAmtUptoValue1_'+find_id).val(0);
               $('td.InsuranceAmtUpto2_'+find_id).find('#InsuranceAmtUptoValue2_'+find_id).val(0);
               $('td.InsuranceAmtUpto3_'+find_id).find('#InsuranceAmtUptoValue3_'+find_id).val(0);
           }else
           {
               $('td.InsuranceTypeSel1_'+find_id).find('#Insurance_Type_1_'+find_id).prop('disabled',false);
               $('td.Insurance1_'+find_id).find('#Insuranceddl1_'+find_id).prop('disabled',false);
               $('td.InsuranceValue1_'+find_id).find('#Insurancerate1_'+find_id).prop('disabled',false);
               $('td.InsuranceAmtUpto1_'+find_id).find('#InsuranceAmtUptoValue1_'+find_id).prop('disabled',false);
               // for insi 2 disable
               $('td.Insurance2_'+find_id).find('#Insuranceddl2_'+find_id).prop('disabled',false);
               $('td.InsuranceTypeSel2_'+find_id).find('#Insurance_Type_2_'+find_id).prop('disabled',false);
               $('td.InsuranceValue2_'+find_id).find('#Insurancerate2_'+find_id).prop('disabled',false);
               $('td.InsuranceAmtUpto2_'+find_id).find('#InsuranceAmtUptoValue2_'+find_id).prop('disabled',false);
           
               // for insi 3 disable
               $('td.Insurance3_'+find_id).find('#Insuranceddl3_'+find_id).prop('disabled',false);
               $('td.InsuranceTypeSel3_'+find_id).find('#Insurance_Type_3_'+find_id).prop('disabled',false);
               $('td.InsuranceValue3_'+find_id).find('#Insurancerate3_'+find_id).prop('disabled',false);
               $('td.InsuranceAmtUpto3_'+find_id).find('#InsuranceAmtUptoValue3_'+find_id).prop('disabled',false);





               $('td.InsuranceAmtUpto1_'+find_id).find('#InsuranceAmtUptoValue1_'+find_id).val('');
               $('td.InsuranceAmtUpto2_'+find_id).find('#InsuranceAmtUptoValue2_'+find_id).val('');
               $('td.InsuranceAmtUpto3_'+find_id).find('#InsuranceAmtUptoValue3_'+find_id).val('');
           }


       });



   }


   function ItemWiseFullCalculation()
   {
       
       $(document).on('click','.itemwise_cal', function(){  debugger;
           var find_id = jQuery(this).data('btnautoidbind');
           var escise = $('td.Exciseduty_'+find_id).find('#ExciseDutyType_'+find_id).find(':selected').val();
           if( escise =="-1" || escise =='')
           {
               $('td.ExciseAmtUpto_'+find_id).find('#ExciseDutyAmtUptoValue_'+find_id).val(0);
           }
           var cartage1 = $('td.CartageType_'+find_id).find('#CartageTypeddl_'+find_id).find(':selected').val();
           if( cartage1 =="-1" || cartage1=='')
           {
               $('td.Cartageamt_'+find_id).find('input').val(0) ;
           }
          
           var Cart2 = $('td.CartageType2_'+find_id).find('#CartageTypeddl2_'+find_id).find(':selected').val();
           if( Cart2 =="-1" || Cart2=='')
           {
               $('td.Cartageamt2_'+find_id).find('#CartageAmount2_'+find_id).val(0);
           }
           var isni1 = $('td.InsuranceTypeSel1_'+find_id).find('#Insurance_Type_1_'+find_id).find(':selected').val();
           if( isni1 =="-1" || isni1=='')
           {
               $('td.InsuranceAmtUpto1_'+find_id).find('#InsuranceAmtUptoValue1_'+find_id).val(0);
           }

           var Insi2  = $('td.Insurance_'+find_id).find('#Insurance_Type_2_'+find_id).find(':selected').val();
           if( Insi2=="-1" || Insi2 =='')
           {
               $('td.InsuranceAmtUptoTypeSel2_'+find_id).find('#Insurancerate2amtUptoVal_'+find_id).val(0);
           }
           var packingcharge =  $('td.Packingcharge_'+find_id).find('input').val();
           if(isNaN(packingcharge) || packingcharge=='')
           {
               $('td.Packingcharge_'+find_id).find('input').val(0)
           }
           var Tax  = $('td.Tax_'+find_id).find('#ddl_tax'+find_id).find(':selected').val();
           if( Tax =="-1" || Tax =='')
           {
               $('td.taxAmtUptoValue_'+find_id).find('#txtamtvalupto_'+find_id).val(0);
           }

           
           Setof_ItemWiseFullCalculation(find_id);




       });
   }


   function Setof_ItemWiseFullCalculation(Id)
   { var Packge =0; var Total=0; var exciseVal=0; var cartage1 =0; var Tolt=0;
       var insiamt =0; var tatxamt =0; var Cart2amt =0; var Insi2amt =0; var Insi3amt =0; var Insi4amt =0; var Subtotal2 =0; var grnadtotl= 0;
       var A =0; var B =0; var C=0; var D=0; var E=0; var F=0; var I =0 ; var J_i1=0; var K=0; var H=0; var J=0; 
       var L=0; var M=0; var N=0; var O=0; var P=0; var Q=0; var R=0; var S=0; var T=0; var U=0; var V=0; var W=0;
       debugger;
       A=$("td.CQty_" +Id).find('input').val(); if(isNaN(A) || A =='') { A=0; } else { A=A;}
       B= $(".CRate_" +Id).find('input').val();  if(isNaN(B) || B =='') { B=0; } else { B=B;}
       C=$(".CDiscount_" +Id).find('input').val(); if(isNaN(C) || C =='') { C=0; } else { C=C;}
       D=parseFloat(A*B) - parseFloat(parseFloat(A*B)* (C/100)) ; if(isNaN(D) || D =='') { D=0; } else { D=D;}
       $("#Ctotal_amount" + Id).val(D.toFixed(2));
       E =  $(".Packingcharge_" +Id).find('input').val(); if(isNaN(E) || E =='') { E=0; } else { E=E;}
       F=  $('td.ExciseDutyValue_'+Id).find('#ExciseDutyValue_'+Id).val(); if(isNaN(F) || F=='' || F <= 0) { F=0; } else {F=F;}
       G=  parseFloat((parseFloat(D) + parseFloat(E)) * (F/100));
       $('td.ExciseAmtUpto_'+Id).find('#ExciseDutyAmtUptoValue_'+Id).val(G.toFixed(2))
       I=parseFloat(D) + parseFloat(E) + parseFloat(G); if(isNaN(I) || I =='') {I=0;} else {I=I;}
       J_i1 = $('td.InsuranceValue1_'+Id).find('#Insurancerate1_'+Id).val();
       K=parseFloat(parseFloat(I) * parseFloat(J_i1/100)); if(isNaN(K) || K =='') {K=0} else {K=K;}
       $('td.InsuranceAmtUpto1_'+Id).find('#InsuranceAmtUptoValue1_'+Id).val(K.toFixed(2));
       H= $('td.Cartageamt_'+Id).find('input').val();  if(isNaN(H) || H =='') { H=0; } else { H=H;}
       J=parseFloat(I) + parseFloat(K) + parseFloat(H);
       $("#total_SubTotal_Amount1_" + Id).val(J.toFixed(2));
       L = $('td.InsuranceValue2_'+Id).find('#Insurancerate2_'+Id).val(); if(isNaN(L) || L=='' || L <= 0) { L=0; } else {L=L;}
       M= parseFloat((L/100) * J); if(isNaN(M) || M =='') { M=0; } else { M=M;}
       $('td.InsuranceAmtUpto2_'+Id).find('#InsuranceAmtUptoValue2_'+Id).val(M.toFixed(2));
       N= $('td.taxValue_'+Id).find('#txtamtval_'+Id).val();  if(isNaN(N) || N=='' || N <= 0) { N=0; } else {N=N;}
       O= parseFloat((parseFloat(J) + parseFloat(M)) * (N/100)); if(isNaN(O) || O =='') { O=0; } else { O=O;}
       $('td.taxAmtUptoValue_'+Id).find('#txtamtvalupto_'+Id).val(O.toFixed(2));
       P= parseFloat(parseFloat(J) + parseFloat(M) + parseFloat(O));  if(isNaN(P) || P =='') { P=0; } else { P=P;}
       Q=$('td.InsuranceValue3_'+Id).find('#Insurancerate3_'+Id).val(); if(isNaN(Q) || Q=='' || Q <= 0) { Q=0; } else {Q=Q;}
       R=parseFloat(P * (Q/100)); if(isNaN(R) || R =='') { R=0; } else { R=R;}
       $('td.InsuranceAmtUpto3_'+Id).find('#InsuranceAmtUptoValue3_'+Id).val(R.toFixed(2));
       S=$('td.Cartageamt2_'+Id).find('#CartageAmount2_'+Id).val();   if(isNaN(S) || S =='') { S=0; } else { S=S;}
       T=parseFloat(parseFloat(P) + parseFloat(R) + parseFloat(S)); if(isNaN(T) || T =='') { T=0; } else { T=T;}
       U = $('td.InsuranceTypeSel4_'+Id).find('#Insurancerate4_'+Id).val(); if(isNaN(U) || U=='' || U <= 0) { U=0; } else {U=U;}
       V = parseFloat(T * (U/100)) ;  if(isNaN(V) || V =='') { V=0; } else { V=V;}
       $('td.InsuranceAmtUptoTypeSel4_'+Id).find('#Insurancerate4amtUptoVal_'+Id).val(V.toFixed(2));
       W = parseFloat(parseFloat(T) + parseFloat(V));  if(isNaN(W) || W =='') { W=0; } else { W=W;}
       // alert(G);

       





       Packge= $(".Packingcharge_" +Id).find('input').val();
       Total = $("#Ctotal_amount" +'_' +Id).val(); 
       exciseVal = $('td.ExciseAmtUpto_'+Id).find('#ExciseDutyAmtUptoValue_'+Id).val();  if(isNaN(exciseVal) || exciseVal =='') { exciseVal=0; } else { exciseVal=exciseVal;}
       cartage1 = $('td.Cartageamt_'+Id).find('input').val();  if(isNaN(cartage1) || cartage1 =='') { cartage1=0; } else { cartage1=cartage1;}
       insiamt = $('td.InsuranceAmtUpto1_'+Id).find('#InsuranceAmtUptoValue1_'+Id).val(); if(isNaN(insiamt) || insiamt =='') {insiamt=0} else {insiamt=insiamt;}
       Tolt = parseFloat(Packge) + parseFloat(Total) +parseFloat(exciseVal) +parseFloat(cartage1) + parseFloat(insiamt) ;
       $("#total_SubTotal_Amount1_" + Id).val('');
       $("#total_SubTotal_Amount1_" + Id).val(Tolt.toFixed(2));

       Insi2amt =  $('td.InsuranceAmtUpto2_'+Id).find('#InsuranceAmtUptoValue2_'+Id).val(); if(isNaN(Insi2amt) || Insi2amt =='') {Insi2amt=0;} else {Insi2amt=Insi2amt;}
       tatxamt = $('td.taxAmtUptoValue_'+Id).find('#txtamtvalupto_'+Id).val(); if(isNaN(tatxamt) || tatxamt =='') {tatxamt=0;} else {tatxamt=tatxamt;}

       Insi3amt =  $('td.InsuranceAmtUpto3_'+Id).find('#InsuranceAmtUptoValue3_'+Id).val(); if(isNaN(Insi3amt) || Insi3amt =='') {Insi3amt=0;} else {Insi3amt=Insi3amt;}  

       Cart2amt = $('td.Cartageamt2_'+Id).find('#CartageAmount2_'+Id).val(); if(isNaN(Cart2amt) || Cart2amt =='') {Cart2amt=0;} else {Cart2amt=Cart2amt;}
        
       Insi4amt =  $('td.InsuranceAmtUptoTypeSel4_'+Id).find('#Insurancerate4amtUptoVal_'+Id).val(); if(isNaN(Insi4amt) || Insi4amt =='') {Insi4amt=0;} else {Insi4amt=Insi4amt;}  

       Subtotal2 =  parseFloat(Tolt) + parseFloat(Insi2amt) + parseFloat(tatxamt)  + parseFloat(Insi3amt)   + parseFloat(Cart2amt) + parseFloat(Insi4amt)  ; 
       $("#total_SubTotal_Amount2_" + Id).val('');
       $("#total_SubTotal_Amount2_" + Id).val(Subtotal2.toFixed(2));

       grnadtotl = parseFloat(Subtotal2) ;

       $("#total_GrandTotal_Amount_" + Id).val('');
       $("#total_GrandTotal_Amount_" + Id).val(grnadtotl.toFixed(2));

   }

</script>

<script type="text/javascript">
     $(document).ready(function () {
         //Country Dropdown Selectedchange event

         // for above strip data

         //$(document).on('click', '.mahajet', function(){
         //    var ytttsds = jQuery(this).data('trautoincrm');
         //    var vg=  $("#Ctotal_amount_" +ytttsds).val()
         //    alert(vg);

         //    //$("#18135").each(function ()
         //    //{ debugger;
         //    //    alert("yes")
         //    //});
         //});



         // for Ineer Block
         $('#test_myval_nowtst').click(function (e)
         {      


             //var V=   Valid();
            
             //if(V==false)
             //    return;
            debugger;
             var _griddata = gridToArray();
            debugger;
            // alert(_griddata)
             //console.log(_griddata);
             //console.log(otArr);
             var url = AddM_AddC;
            


             function gridToArray() {
                
                 var otArr = [];
                 var oAtrUpper= [];
                 var oatFirstBlock = [];
                 var oatSecndBlock = [];

                 // for Upper Strip 
                 //$('div.single').find('div.table-responsive').find('table').find('tr.mahajet').each(function (i)
                 //{
                 //   // var jdd = jQuery(this).data('trautoincrm');

                 //  //  alert(jdd);
                 //});

                 $('div.single').find('div.second').each(function (i)
                 {
                     var obj = new Object();
                     var getdata =  $(this).attr('id'); //dhdn
                     var jh = jQuery(this).data('dhdn');
                     var currQty=$('td.CQty_'+jh).find('input').val();
                     var s =$('td.Exciseduty_'+jh).find('#ExciseDutyType_'+jh).find(':selected').text();

                     if(currQty !=null && currQty !=0)
                     {
                         obj.Qty = $('td.CQty_'+jh).find('input').val();
                         obj.Rate = $('td.CRate_'+jh).find('input').val();
                         obj.Discount = $('td.CDiscount_'+jh).find('input').val();
                         obj.PackingCharges  = $('td.Packingcharge_'+jh).find('input').val();
                         obj.ExciseDutyType = $('td.Exciseduty_'+jh).find('#ExciseDutyType_'+jh).find(':selected').text();
                         obj.ExcisepercentageAmt = $('td.ExciseAmtUpto_'+jh).find('#ExciseDutyAmtUptoValue_'+jh).val();
                         obj.Cartage1_ID = $('td.CartageType_'+jh).find('#CartageTypeddl_'+jh).find(':selected').val();
                         obj.Cartage_rate =  $('td.CartagerateValue_'+jh).find('#CartageRate1_'+jh).val();
                         obj.CartageAmount =  $('td.Cartageamt_'+Id).find('input').val(); 

                         //2nd Block
                         obj.Insurance1_Type = $('td.InsuranceTypeSel1_'+jh).find('#Insurance_Type_1_'+jh).find(':selected').text();
                         obj.Insurance1Amount =  $('td.InsuranceAmtUpto1_'+jh).find('#InsuranceAmtUptoValue1_'+jh).val();
                         obj.Tax_Type =  $('td.Tax_'+jh).find('#ddl_tax'+jh).find(':selected').text();
                         obj.Tax_Amount = $('td.taxAmtUptoValue_'+jh).find('#taxAmtUptoValue_'+jh).val();
                         obj.Cartage2_Id  =  $('td.CartageType2_'+jh).find('#CartageTypeddl2_'+jh).find(':selected').val();
                         obj.Cartage2_rate =   $('td.CartagerateValue2_'+jh).find('#CartageRate2_'+jh).val();
                         obj.CartageAmount2 = $('td.Cartageamt2_'+jh).find('#CartageAmount2_'+jh).val();
                         obj.Insurance2_Type = $('td.Insurance_'+jh).find('#Insurance_Type_2_'+jh).find(':selected').text();
                         obj.Insurance2_Amount = $('td.InsuranceAmtUptoTypeSel2_'+jh).find('#Insurancerate2amtUptoVal_'+jh).val();
                       

                         oatFirstBlock.push(obj);
                     }

                    
                    
                 });



                 
                 $('div.single').find('div.second').find('div.table-responsive').find('table').find('tr.getItems-1').each(function (i)
                 {
                     //var obj = new Object();
                     //var getdata =  $(this).attr('id');
                     //var CurQty = 0;
                     //CurQty = $('td.CQty_'+getdata).find('input').val();
                     //if(CurQty !=null && CurQty !=0)
                     //{
                        
                     //    obj.Qty = $('td.CQty_'+getdata).find('input').val();
                     //    obj.Rate = $('td.CRate_'+getdata).find('input').val();
                     //    obj.Discount = $('td.CDiscount_'+getdata).find('input').val();
                     //    obj.PackingCharges  = $('td.Packingcharge_'+getdata).find('input').val();
                     //    obj.ExciseDutyId = $('td.Exciseduty_'+getdata).find('#ExciseDutyType_'+getdata).find(':selected').text();
                     //    obj.ExcisepercentageAmt = $('td.ExciseDutyValue_'+getdata).find('#ExciseDutyValue_'+getdata).val();
                     //    obj.Cartage1_ID = $('td.CartageType_'+getdata).find('#CartageTypeddl_'+getdata).find(':selected').val();
                     //    obj.Cartage_rate =  $('td.CartagerateValue_'+getdata).find('#CartageRate1_'+getdata).val();
                     //    oatFirstBlock.push(obj);
                     
                     //}
               
                 });


                 $('div.single').find('div.second').find('div.table-responsive').find('table').find('tr.getItems').each(function (i)
                 {
                    
                     //var obj = new Object();
                     //var getdata =  $(this).attr('id');
                     //var CurQty = 0;
                     //CurQty = $('td.CQty_'+getdata).find('input').val();
                     //if(CurQty !=null && CurQty !=0)
                     //{
                     //    obj.Insurance1_id = $('td.InsuranceTypeSel1_'+getdata).find('#Insurance_Type_1_'+getdata).find(':selected').text();
                     //    obj.InsurancePercentage =  $('td.InsuranceValue1_'+getdata).find('#Insurancerate1_'+getdata).val();
                     //    obj.Tax_Id =  $('td.Tax_'+getdata).find('#ddl_tax'+getdata).find(':selected').text();
                     //    obj.Tax_Percentage = $('td.taxValue_'+getdata).find('#txtamtval_'+getdata).val();
                     //    obj.Cartage2_Id  =  $('td.CartageType2_'+getdata).find('#CartageTypeddl2_'+getdata).find(':selected').val();
                     //    obj.Cartage2_rate =   $('td.CartagerateValue2_'+getdata).find('#CartageRate2_'+getdata).val();
                     //    obj.Insurance2_Id = $('td.Insurance_'+getdata).find('#Insurance_Type_2_'+getdata).find(':selected').text();
                     //    obj.Insurance2_percentage = $('td.InsuranceTypeSel2_'+getdata).find('#Insurancerate2_'+getdata).val();
                     //    oatSecndBlock.push(obj);

                     //}


                    // var getidvalq = $('td.InsuranceTypeSel1_'+getdata).find('#Insurance_Type_1_'+getdata).find(':selected').val();
                   //  var getidval = $('td.Cartageamt2_'+getdata).find('#CartageAmount2_'+getdata).val();

                    
                     //  alert(getidval);
                 });





               //  otArr = oatFirstBlock.concat(oatSecndBlock) ;




               debugger;

                 var ses = {
                     'Child' :oatFirstBlock    


                 }


                 // var session = {
                 //    'Child': otArr,
                 //    'Child2': otArr2,
                 //    'Child3': otArr3,
                 //    'Child4': otArr4,
                 //    'Child5': obj5,
                 //    'Master': obj1
                 //};
                 // return session;
              debugger;
                 return ses;
             }








             // for Upper Strip 
             //$('div.single').find('div.table-responsive').find('table').find('tr.mahajet').each(function (i)
             //{
             //    var jdd = jQuery(this).data('trautoincrm');

             //    alert(jdd);
             //});


             //$('div.single').find('div.second').find('div.table-responsive').find('table').find('tr.getItems').each(function (i)
             //{
             //    var getdata =  $(this).attr('id');
             //    var getidvalq = $('td.InsuranceTypeSel1_'+getdata).find('#Insurance_Type_1_'+getdata).find(':selected').val();
             //    var getidval = $('td.Cartageamt2_'+getdata).find('#CartageAmount2_'+getdata).val();

               
             //});

             //$('div.single').find('div.second').find('div.table-responsive').find('table').find('tr.getItems-1').each(function (i)
             //{
             
             //    var getffg = $('td.CQty_'+getdata).find('input').val();
              
             //});

         });

         //  var SumRt=0; SumTotal=0;SumTotpackingCharge=0; SumOfExciseDutyAmt=0; SumTotCart1=0;
       
         
    


     });


     function RateSum()
     {
         debugger;
         var SumRt=0; SumTotal=0;SumTotpackingCharge=0; SumOfExciseDutyAmt=0; SumTotCart1=0;
         var SumTotal1=0; SumInsuSum1=0; SunTaxAmt= 0; SumCartageamt2Sum=0; SumSubTott2Sum= 0;
         var SumInsi2Sum =0; SumGransSum=0;

         $('div.single').find('div.second').each(function (i)
         {
             var Id = jQuery(this).data('dhdn');
             var currentQty=$('td.CQty_'+Id).find('input').val();

             if(currentQty !=null && currentQty !=0)
             {
                 debugger;
                 var d=0; Dtotal=0,dPacktot=0,dexciseamtTol=0;  dcartg1tot=0;
                 d=$('td.CRate_'+Id).find('input').val();
                 SumRt = parseFloat(SumRt) + parseFloat(d);
                 Dtotal = $('#Ctotal_amount_'+Id).val();
                 dPacktot= $('td.Packingcharge_'+Id).find('input').val()
                 if(!isNaN(dPacktot) && dPacktot !="")
                 {
                     dPacktot = dPacktot;
                 } else{
                     dPacktot = 0;
                 }
                 dexciseamtTol = $('td.ExciseAmtUpto_'+Id).find('#ExciseDutyAmtUptoValue_'+Id).val();
                 if(!isNaN(dexciseamtTol) && dexciseamtTol !="")
                 {
                     dexciseamtTol = dexciseamtTol;
                 }else
                 {
                     dexciseamtTol =0;
                 }
                 dcartg1tot = $('td.Cartageamt_'+Id).find('input').val(); 
                 if(!isNaN(dcartg1tot) && dcartg1tot !="")
                 {
                     dcartg1tot = dcartg1tot
                 }
                 else
                 {
                     dcartg1tot=0;
                 }
            
                 var SubTotl1 = $('#total_SubTotal_Amount1_'+Id).val();
                 if(!isNaN(SubTotl1) && SubTotl1 !=null)
                 { SubTotl1 = SubTotl1;
                 }else
                 { SubTotl1 = 0;
                 }
                 var Insuamt1 = $('td.InsuranceAmtUpto1_'+Id).find('#InsuranceAmtUptoValue1_'+Id).val();
                 if(!isNaN(Insuamt1) && Insuamt1 !=null)
                 { Insuamt1 =Insuamt1;
                 }
                 else
                 {
                     Insuamt1= 0;
                 }

                 var Taxamt =  $('td.taxAmtUptoValue_'+Id).find('#txtamtvalupto_'+Id).val();
                 if(!isNaN(Taxamt) && Taxamt !=null && Taxamt !='')
                 {
                     Taxamt= Taxamt;
                 }else{
                     Taxamt=0;
                 }

                 var Cartagesum2 = $('td.Cartageamt2_'+Id).find('#CartageAmount2_'+Id).val();
                 if(!isNaN(Cartagesum2) && Cartagesum2 !=null)
                 {
                     Cartagesum2= Cartagesum2;
                 }
                 else
                 {
                     Cartagesum2=0;
                 }

                 var SumSubTotal2 = $('#total_SubTotal_Amount2_'+Id).val();
                 if(!isNaN(SumSubTotal2) && SumSubTotal2 !=null)
                 { SumSubTotal2 = SumSubTotal2;
                 }
                 else
                 {
                     SumSubTotal2 =0;
                 }
                 var InsuSum2 = $('td.InsuranceAmtUptoTypeSel2_'+Id).find('#Insurancerate2amtUptoVal_'+Id).val();
                 if(!isNaN(InsuSum2) && InsuSum2 !=null)
                 {
                     InsuSum2 =InsuSum2;
                 }
                 else
                 {
                     InsuSum2 = 0;
                 }

                 var GrandTot = $('#total_GrandTotal_Amount_'+Id).val();
                 if(!isNaN(GrandTot) && GrandTot !=null)
                 { GrandTot =GrandTot;}
                 else{ GrandTot = 0;
                 }

                 SumTotal = parseFloat(SumTotal) + parseFloat(Dtotal);
                 SumTotpackingCharge = parseFloat(SumTotpackingCharge) + parseFloat(dPacktot);
                 SumOfExciseDutyAmt = parseFloat(SumOfExciseDutyAmt) + parseFloat(dexciseamtTol);
                 SumTotCart1 = parseFloat(SumTotCart1) + parseFloat(dcartg1tot);
                 SumTotal1 = parseFloat(SumTotal1) + parseFloat(SubTotl1);
                 SumInsuSum1 = parseFloat(SumInsuSum1) + parseFloat(Insuamt1);
                 SunTaxAmt = parseFloat(SunTaxAmt) + parseFloat(Taxamt);
                 SumCartageamt2Sum = parseFloat(SumCartageamt2Sum) + parseFloat(Cartagesum2);
                 SumSubTott2Sum = parseFloat(SumSubTott2Sum) + parseFloat(SumSubTotal2);
                 SumInsi2Sum = parseFloat(SumInsi2Sum) + parseFloat(InsuSum2);
                 SumGransSum = parseFloat(SumGransSum) + parseFloat(GrandTot);
                 // SumTotpackingChargegolbal = SumTotpackingCharge +SumTotpackingChargegolbal ;
             

                 $("#Total_Rate").val(SumRt.toFixed(2))
                 $("#SumOfTotalVal").val(SumTotal.toFixed(2))
                 $("#SumOfPackingCharge").val(SumTotpackingCharge.toFixed(2))
                 $("#SumOfExciseDutyAmt").val(SumOfExciseDutyAmt.toFixed(2))
                 $("#SumOfCartageAll1Amt").val(SumTotCart1.toFixed(2))
                 $("#SumOfSubTotalAll1Amt").val(SumTotal1.toFixed(2))
                 $("#Total_SumOf_Insurance_1").val(SumInsuSum1.toFixed(2))
                 $("#SumOfTwo_Tax_Amt").val(SunTaxAmt.toFixed(2))
                 $("#SumOf_All_Cartage_Amt").val(SumCartageamt2Sum.toFixed(2))
                 $("#SumOf_total_Sub_2").val(SumSubTott2Sum.toFixed(2))
                 $("#SumOfAll_Insurance2_amt").val(SumInsi2Sum.toFixed(2))
                 $("#SumOfAll_Grand_Total_amt").val(SumGransSum.toFixed(2))
             }

         });

         testSkill(); 
         BindDropdownChangeOnPoValue()
     }
   
</script>


<script type="text/javascript">
    $(document).ready(function () {

        $(".Detailon_PO").on("click", function (e) {
            debugger;
            var url = $(this).attr('href');
            $("#dialog-myonPO").dialog({
                title: 'Remarks Details',
                autoOpen: false,
                resizable: false,
                height: 400,
                width: 950,
                show: { effect: 'drop', direction: "up" },
                modal: true,
                draggable: true,
                open: function (event, ui) {
                    $(this).load(url);

                },
                buttons: {
                    "Close": function () {
                        $(this).dialog("close");

                    }
                },
                close: function (event, ui) {
                    $("#dialog-myonPO").dialog('close');
                    //window.location.href = url;
                }
            });

            $("#dialog-myonPO").dialog('open');
           // $("#dialog-edit").dialog('close');
            return false;
        });

        $("#btncancel").on("click", function (e) {
            $("#dialog-myonPO").dialog('close');

        });
    });
</script>


<script>

    function BindDropdownChangeOnPoValue()
    { debugger;
        var poval =$("#hdn_poLimitval").val();
        var Gdtot = $("#SumOfAll_Grand_Total_amt").val();
        if(parseFloat(poval) >= parseFloat(Gdtot))
        {
            $("#po_purinlimit").show();
            $("#po_pmcoutlimit").hide();
        }
        else
        {
            
            $("#po_purinlimit").hide();
            $("#po_pmcoutlimit").show();
        }
    }





    function GetDataOnPO() {
        debugger;
        //var url = "/FloorMasters/Grid/";
        var url = '@Url.Action("GetPurchaseReqDetailOnPO", "IndentPurchaseOrders")';

        $.ajax({
            url: url,
            type: 'GET',
            data: { Status: $('#text1_PO').val() },
            complete: function () {
                $('#progress').hide();
            },
            success: function (result) {

                $('#formbody').html(result);
            }
        });
        return false;
    }

</script>





<section id="content_wrapper">
    <!-- Begin: Content -->
    <section id="content" class="table-layout animated fadeIn">

        <!-- begin: .tray-center -->
        <div class="tray tray-center">

            <div class="mw1000 center-block">
                <div class="admin-form theme-primary">
                    <!-- Begin: Content Header -->
                    <!-- Begin: Admin Form -->
                    <div class="form-headerStyle theme-primary">

                        <div class="panel heading-border">
                            <div class="panel-body bg-light">
                                <div class="section-divider mb40" id="spy1">
                                    <span style="color:#4a89dc">Generate Purchase Order</span>
                                </div>
                                <!-- .section-divider -->
                                <!-- Basic Inputs -->
                                @*<p>
                                    @Html.ActionLink("Back to List", "Index", null, new { @class = "btn btn-danger" })
                                </p>*@
                                <!-- Input Icons -->



                                <div class="panel">
                                    <div class="panel-heading">


                                        <div class="container tabs-wrap">
                                            @*<div class="panel-heading"><span class="panel-title"><span class="glyphicon glyphicon-hand-down"></span>Well Tabs</span></div>*@
                                            <div class="container tabs-wrap">
                                                <ul class="nav nav-tabs nav-tabs-border" role="tablist">
                                                    <li role="presentation" class="active">
                                                        <a href="#indentorder" aria-controls="indentorder" role="tab" data-toggle="tab" aria-expanded="true">Purchase Order</a>
                                                    </li>
                                                    <li>
                                                        <a href="#deliverydetails" aria-controls="deliverydetails" role="tab" data-toggle="tab" aria-expanded="false">Delivery Details</a>
                                                    </li>
                                                    <li>
                                                        <a href="#billing" aria-controls="billing" role="tab" data-toggle="tab" aria-expanded="false">Specific Terms & Conditions</a>
                                                    </li>
                                                    <li>
                                                        <a href="#shipping" aria-controls="shipping" role="tab" data-toggle="tab" aria-expanded="false">Specific Instructions</a>
                                                    </li>
                                                    <li>
                                                        <a href="#review" aria-controls="review" role="tab" data-toggle="tab" aria-expanded="false">General Terms & Conditions</a>
                                                    </li>
                                                </ul>

                                                <div class="panel-body">
                                                    <div class="tab-content pn br-n">
                                                        <div role="tabpanel" class="tab-pane active" id="indentorder">

                                                            <div class="row">
                                                                <div class="col-md-12">
                                                                     @*@using (Html.BeginForm())
                                                                     {*@
                                                                     @Html.AntiForgeryToken()

                                                                <div class="form-horizontal">

                                                                    @Html.ValidationSummary(true, "", new { @class = "text-danger" })

                                                                    <div class="row">
                                                                        <div class="col-md-6">
                                                                            <div class="section">
                                                                                <label class="field prepend-icon">
                                                                                    <span style="font:bold" id="dateTime"></span>

                                                                                </label>
                                                                                <input type="hidden"  value="@ViewBag.PI_reqNo" id="hdn_PurreqNo" />
                                                                            </div>
                                                                        </div> 
                                                                        <div class="col-md-6">
                                                                        <span>PO Limit : @ViewBag.POLimit</span> <input type="hidden" value="@ViewBag.POLimit" id="hdn_poLimitval" />
                                                                        </div>
                                                                        <div class="col-md-12">
                                                                    <div class="table-responsive">
                                                                        <table class="table">
                                                                            <thead>
                                                                                <tr>
                                                                                    <td class="col-md-3"><span><b> Project Name and Full Address :</b> </span></td>
                                                                                    <td class="col-md-3"><span>Purchase Indent No. :</span> </td>
                                                                                    <td class="col-md-3"><span >Purchase Indent Date</span> </td>
                                                                                    <td class="col-md-3"><span>Quotation Ref.</span> </td>
                                                                                     
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                                <tr>
                                                                                    <td class="col-md-3"><label id="lblprojctnmWithaddd"></label></td>
                                                                                    <td class="col-md-3"> 
                                                                                      <label id="lblPurch_indentno"></label>
                                                                                    (<span><u> @Html.ActionLink("Detail", "PurchaseReqViewDetail", "PurchaseRequisition", new { id = ViewBag.Purchase_id }, new { target="_blank" , @style = "color:#497bf9" }) </u></span>)
                                                                                    
                                                                                     <input type="hidden" id="hdn_Purchase_Indent_detail" /> <input type="hidden" id="hdn_purch_indent_no_ber" /> </td>
                                                                                    <td class="col-md-3"><label id="lbl_pur_indentdate"></label><input type="hidden" id="hdn_purchase_project_Id" /> </td>
                                                                                    <td class="col-md-3"> <label  id="lbl_purIndent_QuotrefNo"></label><input type="hidden" id="Quot_ion_refId" /> 
                                                                                    (<span><u>@Html.ActionLink("Detail", "ViewQuotDetail", "Quotation", new { Id = ViewBag.QuotID }, new { target = "_blank", @style = "color:#497bf9" })</u></span>)
                                                                                    </td>
                                                                                </tr>
                                                                            </tbody>
                                                                        </table>
                                                                    </div>
                                                                        </div>
                                                                        </div>
                                                                    <div class="row">
                                                                        <div class="col-md-12">
                                                                        <div class="table-responsive">
                                                                            <table class="table">
                                                                                <thead>
                                                                                    <tr>
                                                                                      
                                                                                        <td class="col-md-6">PO No :</td> 
                                                                                        <td class="col-md-6">PO Date:</td>
                                                                                       

                                                                                    </tr>
                                                                                </thead>
                                                                                <tbody>
                                                                                    <tr>
                                                                                        
                                                                                        <td class="col-md-6">

                                                                                            <label class="field prepend-icon">
                                                                                                @Html.TextBox("PurchaseOrderNo", null, new { id = "PurchaseOrderNo", @class = "form-control gui-input required", @placeholder = "Order No.", @readonly = "readonly" })

                                                                                                <label for="firstname" class="field-icon">
                                                                                                    <i class="fa fa-building"></i>
                                                                                                </label>
                                                                                            </label>

                                                                                        </td>

                                                                                        <td class="col-md-6">

                                                                                            <label class="field prepend-icon">
                                                                                                @Html.TextBox("Date", string.Format("{0:dd MMM yyy}", Date), new { @class = "DatePicker form-control", @id = "Date", @placeholder = "Order Date" })
                                                                                                <label for="RefNo" class="field-icon">
                                                                                                    <i class="fa fa-calendar"></i>
                                                                                                </label>
                                                                                            </label>

                                                                                        </td>
                                                                                       

                                                                                    </tr>
                                                                                </tbody>
                                                                            </table>
                                                                        </div>
                                                                        </div>
                                                                    </div>

                                                                    

                                                                    <div class="row">
                                                                        <div class="col-md-12">
                                                                            <div class="table-responsive">
                                                                                <table class="table">
                                                                                    <thead>
                                                                                        <tr>
                                                                                            <td class="col-md-6">
                                                                                                Vendor Group :
                                                                                            </td>
                                                                                            <td class="col-md-6">Vendor Name</td>
                                                                                          
                                                                                        </tr>
                                                                                    </thead>
                                                                                    <tbody>
                                                                                        <tr>
                                                                                            <td class="col-md-6">
                                                                                                <div class="section">
                                                                                                    <label class="field select">
                                                                                                        @Html.DropDownList("VGId", null, "Select Vendor Group", htmlAttributes: new { @id = "VGID", @class = "form-control" })

                                                                                                        <i class="arrow"></i>
                                                                                                    </label>
                                                                                                </div>
                                                                                            </td>
                                                                                            <td class="col-md-6">
                                                                                                <div class="section">
                                                                                                    <label class="field select">

                                                                                                        @Html.DropDownList("VNAME", new List<SelectListItem>() { new SelectListItem() { Text = "", Value = "" } }, "Select Vendor", htmlAttributes: new { @id = "VNAME", @class = "form-control" })
                                                                                                        @*<select id="ddlBlock" name="BlockId" style="width: 250px" onchange="javascript:GetFloor(this.value);"></select>*@
                                                                                                        <i class="arrow"></i>
                                                                                                    </label>
                                                                                                </div>
                                                                                            </td>
                                                                                            
                                                                                        </tr>
                                                                                    </tbody>
                                                                                </table>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                    <div class="row" id="pnl_toggel_vendor-detail" style="display:none">
                                                                        <div class="col-md-12">
                                                                            <div class="table-responsive">
                                                                                <table class="table">
                                                                                    <thead>
                                                                                        <tr>
                                                                                            <td class="col-md-3"><span><b> Vendor Address :</b> </span></td>
                                                                                            <td class="col-md-3"><span>Vendor TIN / GST :</span> </td>
                                                                                            <td class="col-md-3"><span>Vendor Aadhaar :</span> </td>
                                                                                            <td class="col-md-3"><span>Contact Person :</span> </td>

                                                                                        </tr>
                                                                                    </thead>
                                                                                    <tbody>
                                                                                        <tr>
                                                                                            <td class="col-md-3"><label id="lbl_vendor_address"></label> <br /> <label id="lbl_vendorCountry"></label>  , <label id="lbl_vendor_state"></label> , <label id="lbl_vendor_City"></label> <br /> PIN : <label id="lbl_vendor_PinNo"></label> </td>
                                                                                            <td class="col-md-3">  <label id="lbl_vendor_TinNO"></label> / <br /><label id="lbl_vendor_GSTNO"></label>  </td>
                                                                                            <td class="col-md-3"><label id="lbl_vendor_AadhaarNo"></label></td>
                                                                                            <td class="col-md-3"><label id="lbl_Vendor_CP_name"></label> , Mob: <label id="lbl_Vendor_CP_Mobile"></label> <br /> Phone: <label id="lbl_vendor_CP_Phone"></label> <br /> Email : <u><a href="#" id="lbl_vendor_CP_Email" target="_top"></a></u></td>
                                                                                        </tr>
                                                                                    </tbody>
                                                                                </table>
                                                                            </div>
                                                                        </div>
                                                                    </div>


                                                                    <div class="row">
                                                                        <div class="col-md-12">
                                                                            <div class="table-responsive">
                                                                                <table class="table">
                                                                                    <thead>
                                                                                        <tr>
                                                                                            <td>
                                                                                                Reference :
                                                                                            </td>

                                                                                        </tr>
                                                                                    </thead>

                                                                                    <tbody>
                                                                                        <tr>
                                                                                            <td>
                                                                                                @Html.TextArea("Reference", null, new { @id = "Reference1", @placeholder = "Reference", @class = "form-control" })

                                                                                            </td>
                                                                                        </tr>
                                                                                    </tbody>
                                                                                </table>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                    <br />

                                                                    @*<div class="row">
                                                                        <div class="col-md-6">

                                                                        </div>
                                                                        <div class="col-md-6" style="display:none">
                                                                            <div class="section">
                                                                                <label class="field prepend-icon">
                                                                                    @Html.TextBox("AcilTinNo", null, new { id = "AcilTinNo", @class = "form-control gui-input required", @placeholder = "Acil Tin No." })

                                                                                    <label for="firstname" class="field-icon">
                                                                                        <i class="fa fa-building"></i>
                                                                                    </label>
                                                                                </label>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                    <div class="row">
                                                                        <div class="col-md-3">
                                                                            <div class="section">
                                                                                <label class="field select">
                                                                                    @Html.DropDownList("Projects", new SelectList(string.Empty, "Value", "Text"), "Select Project", htmlAttributes: new { @id = "Projects", @class = "form-control" })
                                                                                    <i class="arrow"></i>
                                                                                </label>
                                                                            </div>
                                                                        </div>

                                                                        <div class="col-md-3">

                                                                        </div>
                                                                        <div class="col-md-3">
                                                                            <div class="section">
                                                                                <label class="field prepend-icon">
                                                                                    @Html.TextBox("ProjectAddress", null, new { id = "ProjectAddress", @class = "form-control gui-input required", @readonly = "readonly", @placeholder = "Project Address" })

                                                                                    <label for="firstname" class="field-icon">
                                                                                        <i class="fa fa-building"></i>
                                                                                    </label>
                                                                                </label>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-md-3">

                                                                        </div>



                                                                    </div>*@






                                                                </div>
                                                                @*}*@
                                                                </div>
                                                               <!--naveen-->
                                                                <div class="col-md-12">
                                                                    <div class="innerPanel-group" id="formbody">


                                                                    </div>  
                                                                </div>
                                                                <!--naveen-->

                                                                <div class="col-md-12">

                                                                    <br />
                                                                    <div id="dvLoading"></div>
                                                                    <div id="#progress" style="display:none"><img src="~/Images/Loading.gif" /></div>

                                                                </div>

                                                                <div class="col-md-12">

                                                        


                                                                    <div class="row">
                                                                        <div class="col-md-12">

                                                                            <div class="table-responsive">
                                                                                <table class="table">
                                                                                    <thead>
                                                                                        <tr>
                                                                                            <td class="col-md-2"> Total Rate  </td>
                                                                                            <td class="col-md-2"> Sum Of Total  </td>
                                                                                            <td class="col-md-2"> Sum Of Packing Charges  </td>
                                                                                            <td class="col-md-2"> Sum of Excise  </td>
                                                                                            <td class="col-md-2"> Sum of Cartage 1  </td>
                                                                                            <td class="col-md-2"> Sum of Sub Total 1  </td>
                                                                                        </tr>
                                                                                    </thead>
                                                                                    <tbody>
                                                                                        <tr>
                                                                                            <td class="col-md-2"> @Html.TextBox("Total_Rate", null, new { id = "Total_Rate", @class = "form-control gui-input required", @readonly = "readonly" }) </td>
                                                                                            <td class="col-md-2"> @Html.TextBox("SumOfTotal", null, new { id = "SumOfTotalVal", @class = "form-control gui-input required" , @readonly = "readonly" }) </td>
                                                                                            <td class="col-md-2"> @Html.TextBox("SumOfPacking", null, new { id = "SumOfPackingCharge", @class = "form-control gui-input required" , @readonly = "readonly" }) </td>
                                                                                            <td class="col-md-2"> @Html.TextBox("SumOfExciseDuty", null, new { id = "SumOfExciseDutyAmt", @class = "form-control gui-input required" , @readonly = "readonly" }) </td>
                                                                                            <td class="col-md-2"> @Html.TextBox("SumOfCartageAmt", null, new { id = "SumOfCartageAll1Amt", @class = "form-control gui-input required" , @readonly = "readonly" }) </td>
                                                                                            <td class="col-md-2"> @Html.TextBox("SumOfSubTotal1", null, new { id = "SumOfSubTotalAll1Amt", @class = "form-control gui-input required" , @readonly = "readonly" }) </td>
                                                                                        </tr>
                                                                                    </tbody>
                                                                                </table>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                    <div class="row">

                                                                        <div class="col-md-12">

                                                                            <div class="table-responsive">
                                                                                <table class="table">
                                                                                    <thead>
                                                                                        <tr>
                                                                                            <td class="col-md-2"> Total SumOf Insurance 1  </td>
                                                                                            <td class="col-md-2"> Sum Of Taxes  </td>
                                                                                            <td class="col-md-2"> Sum Of Cartage Amount 2 </td>
                                                                                            <td class="col-md-2"> Sum of Sub Total 2  </td>
                                                                                            <td class="col-md-2"> Sum of Insurance 2  </td>
                                                                                            <td class="col-md-2"> Sum of Grand Total  </td>
                                                                                        </tr>
                                                                                    </thead>
                                                                                    <tbody>
                                                                                        <tr>
                                                                                            <td class="col-md-2"> @Html.TextBox("Total_SumOf_Insurance", null, new { id = "Total_SumOf_Insurance_1", @class = "form-control gui-input required", @readonly = "readonly" }) </td>
                                                                                            <td class="col-md-2"> @Html.TextBox("SumOfTotalTaxs", null, new { id = "SumOfTwo_Tax_Amt", @class = "form-control gui-input required" , @readonly = "readonly" }) </td>
                                                                                            <td class="col-md-2"> @Html.TextBox("SumOfCartageAmt2", null, new { id = "SumOf_All_Cartage_Amt", @class = "form-control gui-input required" , @readonly = "readonly" })   </td>
                                                                                            <td class="col-md-2"> @Html.TextBox("SumOfTotalSub2", null, new { id = "SumOf_total_Sub_2", @class = "form-control gui-input required" , @readonly = "readonly" })</td>
                                                                                            <td class="col-md-2"> @Html.TextBox("SumOfInsurance2Amt", null, new { id = "SumOfAll_Insurance2_amt", @class = "form-control gui-input required" , @readonly = "readonly" }) </td>
                                                                                            <td class="col-md-2"> @Html.TextBox("SumOfAllGrnadTotal", null, new { id = "SumOfAll_Grand_Total_amt", @class = "form-control gui-input required" , @readonly = "readonly" }) </td>
                                                                                        </tr>
                                                                                    </tbody>
                                                                                </table>
                                                                            </div>
                                                                        </div>







                                                                    </div>





                                                                    <div class="row">
                                                                        <div class="col-md-6">
                                                                            <div class="section">
                                                                                <label class="field prepend-icon">
                                                                                    @Html.TextBox("Rupees", null, new { id = "Rupees", @class = "form-control gui-input required", @placeholder = "Amount in Word" })


                                                                                </label>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-md-6" style="display:none" id="po_pmcoutlimit">
                                                                            <label class="field select">
                                                                                @Html.DropDownList("Employee", null, "Forward For Approval", htmlAttributes: new { @id = "Employee", @class = "form-control" })

                                                                                @*@Html.DropDownList("Employee", new SelectList(string.Empty, "Value", "Text"), "Forward For Approval", htmlAttributes: new { @id = "Employee", @class = "form-control" })*@


                                                                              <i class="arrow"></i>
                                                                            </label>

                                                                        </div>
                                                                        <div class="col-md-6" id="po_purinlimit">
                                                                            <label class="field select">
                                                                                @Html.DropDownList("PMCEmployee", null, "Forward For Approval", htmlAttributes: new { @id = "PMCEmployee", @class = "form-control" })

                                                                                @*@Html.DropDownList("PMCEmployee", new SelectList(string.Empty, "Value", "Text"), "Forward For Approval", htmlAttributes: new { @id = "PMCEmployee", @class = "form-control" })*@


                                                                                <i class="arrow"></i>
                                                                            </label>

                                                                        </div>
                                                                    </div>

                                                                   <div class="row">
                                                                       <div class="col-md-6">
                                                                           <div class="section">
                                                                               <label class="field prepend-icon">
                                                                                   @Html.TextArea("Remarks", null, new { id = "PORemarks", @class = "form-control gui-input required", @placeholder = "Remarks" })
                                                                              </label>
                                                                           </div>
                                                                       </div>
                                                                   </div>






                                                                </div>
                                                                <div class="col-md-12">
                                                                    @*<input  type="button" value="test" id="test_myval_nowtst" />*@

                                                                    <input type="button" class="btn btn-danger" value="Calculate" onclick="RateSum()" />
                                                                    <a class="btn btn-primary continue">Next >></a>
                                                                    @*<input type="button" name="sr1" value="Click Here" onClick="testSkill()" />*@
                                                                    <div style="visibility:hidden;" id="container"></div>
                                                                    @*@Html.ActionLink("Print PO Slip", "Index", "Print_PO_Slip", null, new { @class = "btn btn-system" })*@
                                                                </div>


                                                                @*<div id="myModal" class="modal fade">
                                                                        <div class="modal-dialog">
                                                                            <div class="modal-content">
                                                                                <div class="modal-header">
                                                                                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">X</button>
                                                                                    <h4 class="modal-title">Confirmation</h4>
                                                                                </div>
                                                                                <div class="modal-body">

                                                                                    <p class="text-danger">Data Save Successfully</p>
                                                                                </div>
                                                                                <div class="modal-footer">
                                                                                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>

                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>*@

                                                                <div class="section-divider mt40 mb25" id="spy5">
                                                                    <span></span>
                                                                </div>

                                                                <!-- end .section row section -->
                                                                <!-- end .form-footer section -->


                                                                <div id="dialog-myonPO" style="display: none">
                                                                </div>




                                                            </div>


                                                        </div>

                                                        <div role="tabpanel" class="tab-pane" id="deliverydetails">

                                                            <div class="row">
                                                                <div class="col-md-12">

                                                                    <div class="row">
                                                                        <div class="col-md-12">
                                                                            <div class="row">
                                                                                <div class="col-md-6">
                                                                                    <div class="section">
                                                                                        <label class="field select">
                                                                                            @Html.DropDownList("prjtidsssss", null, "Select Project", htmlAttributes: new { @id = "prjtid1", @class = "form-control" })
                                                                                            <i class="arrow"></i>
                                                                                        </label>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-md-6">
                                                                                   <div class="section">
                                                                                       <label class="field select">
                                                                                           @Html.DropDownList("DeleryPurchseEmp", new List<SelectListItem>() { new SelectListItem() { Text = "", Value = "" } }, "Select Contact Person Name", htmlAttributes: new { @id = "ddlPurchaseEmployePerson", @class = "form-control" })

                                                                                           <i class="arrow"></i>
                                                                                       </label>
                                                                                   </div>

                                                                                   

                                                                                    @*@Html.TextBox("Delivery_Address", null, new { id = "Delivery_Address1", @class = "form-control gui-input", @placeholder = "Delivery Address", @readonly = "readonly" })*@
                                                                                </div>


                                                                            </div>
                                                                            <div class="row">
                                                                                <div class="col-md-12">

                                                                                    @Html.TextBox("contact_Person_Mobile", null, new { id = "contact_Person_Mobile1", @class = "form-control gui-input", @placeholder = "Contact Number", @readonly = "readonly" })

                                                                                
                                                                                </div>


                                                                            </div>
                                                                            <br />
                                                                            <div class="row">
                                                                                <div class="col-md-6">
                                                                                    @*@Html.TextArea("contact_Person_Info", null, new { id = "contact_Person_Info1", @class = "form-control gui-input", @placeholder = "Contact Person Name", @readonly = "readonly" })*@
                                                                                    @Html.TextArea("Delivery_Address", null, new { id = "Delivery_Address1", @class = "form-control gui-input", @placeholder = "Delivery Address" , @Styles = "height:60px;" })
                                                                                  
                                                                                </div>
                                                                                <div class="col-md-6">
                                                                                    @Html.TextArea("Billing_Address", null, new { id = "Billing_Address1", @class = "form-control gui-input", @placeholder = "Billing Address", @Styles = "height:60px;" })
                                                                                </div>

                                                                            </div>
                                                                            <br />
                                                                            <div class="row">
                                                                                <div class="col-md-12">
                                                                                    @Html.TextArea("Delivery_Schedule", null, new { id = "Delivery_Schedule1", @class = "form-control", @placeholder = "Enter Delivery Schedule", Styles = "height:40px;" })
                                                                                </div>
                                                                            </div>
                                                                        </div>

                                                                    </div>
                                                                    <!-- end .form-body section -->

                                                                </div>

                                                            </div>


                                                            <a class="btn btn-primary back"><< Back</a>
                                                            @*<input type="button" id="Submit" class="btn btn-danger" value="Submit" />*@
                                                            <a class="btn btn-primary continue">Next >></a>
                                                        </div>

                                                        <div role="tabpanel" class="tab-pane" id="billing">

                                                            <div class="row">
                                                                <div class="col-md-12">

                                                                    <div class="row">
                                                                        <div class="col-md-12">
                                                                            <div class="" id="STC_DatasLoad">
                                                                                <div id="progress">
                                                                                    <img src="~/Images/Loading.gif" alt="Loading" id="imgLoading1" class="Load" />
                                                                                </div>
                                                                            </div>

                                                                        </div>

                                                                    </div>
                                                                    <!-- end .form-body section -->

                                                                </div>

                                                            </div>


                                                            <a class="btn btn-primary back"><< Back</a>
                                                            @*<input type="button" id="Submit" class="btn btn-danger" value="Submit" />*@
                                                            <a class="btn btn-primary continue">Next >></a>
                                                        </div>

                                                        <div role="tabpanel" class="tab-pane" id="shipping">
                                                            <div class="row">
                                                                <div class="col-md-12">

                                                                    <div class="row">

                                                                        <div class="col-md-12">
                                                                            <div class="" id="Si_DatasLoad">
                                                                                <div id="progress">
                                                                                    <img src="~/Images/Loading.gif" alt="Loading" id="imgLoading1" class="Load" />
                                                                                </div>
                                                                            </div>

                                                                        </div>

                                                                    </div>
                                                                    <!-- end .form-body section -->

                                                                </div>

                                                            </div>
                                                            <a class="btn btn-primary back"><< Back</a>
                                                            @*<input type="button" id="Submit2" class="btn btn-danger" value="Submit" />*@
                                                            <a class="btn btn-primary continue">Next >></a>
                                                        </div>

                                                        <div role="tabpanel" class="tab-pane" id="review">
                                                            <div class="row">
                                                                <div class="col-md-12">
                                                                    <div class="row">
                                                                        <div class="col-md-12">
                                                                            <div class="" id="Gtc_DatasLoad">
                                                                                <div id="progress">
                                                                                    <img src="~/Images/Loading.gif" alt="Loading" id="imgLoading1" class="Load" />
                                                                                </div>
                                                                            </div>

                                                                        </div>
                                                                    </div>
                                                                    <!-- end .form-body section -->
                                                                </div>
                                                            </div>
                                                            <a class="btn btn-primary back"><< Back</a>
                                                            <input type="button" id="btnsave" class="btn btn-danger" value="Submit" />

                                                            @*<input type="button" id="Submit3" class="btn btn-danger" value="Submit" />*@
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>

                                        </div>

                                    </div>
                                </div>
                            </div>

                        </div>



                    </div>
                </div>
            </div>
        </div>
        <!-- end: .tray-center -->
        <!-- begin: .tray-right -->
        <!-- end: .tray-right -->

    </section>
    <!-- End: Content -->
</section>

